<!doctype html><html lang=zh-cn dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width"><link rel=icon type=image/ico href=https://blog.yzyy.de/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://blog.yzyy.de/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://blog.yzyy.de/favicon-32x32.png><link rel=icon type=image/png sizes=192x192 href=https://blog.yzyy.de/android-chrome-192x192.png><link rel=apple-touch-icon sizes=180x180 href=https://blog.yzyy.de/apple-touch-icon.png><link rel=alternate type=application/rss+xml href=https://blog.yzyy.de/tags/%E6%98%9F%E9%9C%B2%E8%B0%B7%E7%89%A9%E8%AF%AD/index.xml title=G-Hung的博客><meta name=description content><title>星露谷物语 | G-Hung的博客</title><link rel=canonical href=https://blog.yzyy.de/tags/%E6%98%9F%E9%9C%B2%E8%B0%B7%E7%89%A9%E8%AF%AD/><meta property="og:url" content="https://blog.yzyy.de/tags/%E6%98%9F%E9%9C%B2%E8%B0%B7%E7%89%A9%E8%AF%AD/"><meta property="og:site_name" content="G-Hung的博客"><meta property="og:title" content="星露谷物语"><meta property="og:description" content="一个关于Java后端开发和技术学习的个人博客"><meta property="og:locale" content="zh_cn"><meta property="og:type" content="website"><link rel=stylesheet href=/assets/combined.min.737dab787e0dfa3088180adf040304574c336cd3805516c938598d23fd96b675.css media=all><script async src="https://www.googletagmanager.com/gtag/js?id=G-88BLW4V0HZ"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-88BLW4V0HZ")}</script></head><body class=auto><div class=content><header><div class=header><h1 class=header-title><a href=https://blog.yzyy.de/>G-Hung的博客</a></h1><div class=header-menu><p class=small><a href=/>/home</a></p><p class=small><a href=/post>/日常</a></p><p class=small><a href=/explore>/探索记录</a></p><p class=small><a href=/tags>/tags</a></p><a href=/index.xml target=_blank title=RSS class=rss-icon><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 11a9 9 0 019 9"/><path d="M4 4a16 16 0 0116 16"/><circle cx="5" cy="19" r="1"/></svg></a></div></div></header><main class=main><div class=list-container><div class=breadcrumbs><a href=/>Home</a><span class=breadcrumbs-separator>/</span><a href=/tags/>Tags</a><span class=breadcrumbs-separator>/</span>
<a href=/tags/%E6%98%9F%E9%9C%B2%E8%B0%B7%E7%89%A9%E8%AF%AD/>星露谷物语</a></div><h1>星露谷物语</h1><div class=post-line><p class=line-date>2025 Nov 30</p><div><p class=line-title><a href=/post/%E6%98%9F%E9%9C%B2%E8%B0%B7%E7%89%A9%E8%AF%AD%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%90%AD%E5%BB%BA/>一步步搭建星露谷物语服务器，实现和远方朋友的流畅联机。</a></p><p class=line-summary><p>最近小橙的空闲时间比较多，而我也想多和她玩耍，前两天一直在看owcs的总决赛，导致小橙有些心生不满。思前想后，还是找个游戏来玩吧，早就知道星露谷的大名，种田经营的题材可能也会感兴趣，那就来玩星露谷吧。</p><p>说干就干，在ios上花了5$买了一个游戏本体，当我打开的那一刻，发现联机之路苦难重重。</p><p>虽然说pc和主机早早就已经支持了局域网联机，并且可以依赖steam网络进行互联，但是移动端刚在1.6版本引入了局域网联机功能。并且由于当前代码还不是很完善，作者还将联机界面隐藏，只能通过触发「彩蛋」来解锁。</p><ul><li>解锁方式如下：</li></ul><blockquote><p>在游戏主标题画面。
看到“Stardew Valley”的Logo上有几片叶子。
按以下顺序点击叶子（模拟手柄方向键）：
<strong>上</strong>（↑）：点击Logo右上角的叶子
<strong>上</strong>（↑）：再次点击右上角
<strong>下</strong>（↓）：点击左下角的叶子
<strong>下</strong>（↓）：再次点击左下角
<strong>左</strong>（←）：点击左上角的叶子
<strong>右</strong>（→）：点击右下角的叶子
<strong>左</strong>（←）：再次点击左上角
<strong>右</strong>（→）：再次点击右下角
最后点击屏幕右下角的 <strong>“?”</strong> 问号按钮。
退出问号菜单后，主界面就会出现 <strong>“合作”（Co-op）</strong> 按钮！</p></blockquote><p>解锁方式还是很有趣的，著名的「Konami Code」，记起了和我哥一起玩魂斗罗，通过这个菜单加了30条命但还是关卡没过去的故事。</p><p>到了联机的界面我又犯了愁：移动端只支持通过输入IP进行连接，也就是局域网联机，如何让远在五百公里外的小橙和我进行联机？</p><p>当然根据我的折腾史，不用想也可以通过打洞或者中转服务器建立一个虚拟局域网，但是这样做有一个弊端是<strong>很麻烦</strong>，每次都需要打开游戏外的一个软件才可以运行，并且十分不稳定！</p><p>还有另外一个方案是frp，暴露我本地pc的一个端口到公网这样也可以，但只是方便了小橙，我额外还需要保持pc开启，这显然也麻烦。</p><hr><h1 class=heading id=搭建服务器端>搭建服务器端
<a class=anchor href=#%e6%90%ad%e5%bb%ba%e6%9c%8d%e5%8a%a1%e5%99%a8%e7%ab%af>#</a></h1><p>想想MC玩家是怎么做的：建立一个服务器端不就好了。</p><p>经过我了解，星露谷并没有像MC的服务端程序，本质上还是一个P2P游戏，存档必须绑定在房主这个角色身上。</p><p>最终，发现了社区大佬们给出的解决方案：通过 <strong>Docker 容器</strong> 来跑一个<strong>无头（Headless）客户端</strong>，并配合<strong>模组（Mod）</strong> 来接管逻辑。</p><h2 class=heading id=实现原理>实现原理
<a class=anchor href=#%e5%ae%9e%e7%8e%b0%e5%8e%9f%e7%90%86>#</a></h2><ul><li><strong>容器化：</strong> 使用 Docker 拉取一个集成了 Linux 版星露谷物语环境的镜像。</li><li><strong>虚拟显示：</strong> 因为游戏必须要有图形输出才能运行，Docker 内部使用 <code>Xvfb</code> 模拟一个虚拟显示器。</li><li><strong>核心Mod - &ldquo;Always On Server&rdquo;：</strong> 这是一个至关重要的 Mod。<ul><li>它让这个“机器人房主”自动接受连接。</li><li><strong>最重要功能：</strong> 当没有真实玩家在线时，<strong>它会自动暂停时间</strong>。星露谷这个游戏的时间流逝很重要。</li></ul></li></ul><h2 class=heading id=部署流程>部署流程
<a class=anchor href=#%e9%83%a8%e7%bd%b2%e6%b5%81%e7%a8%8b>#</a></h2><p>项目地址：<a href=https://github.com/truman-world/puppy-stardew-server>GitHub - truman-world/puppy-stardew-server: Stardew Server | 星露谷物语服务器一键搭建开服联机</a></p></p></div></div></div></main></div><footer><p>All content licensed under <a href=https://creativecommons.org/licenses/by-sa/4.0/>CC BY-SA 4.0</a> unless otherwise stated. Copyright © 2025 ghung<br>Powered by <a href=https://gohugo.io/>Hugo</a> and <a href=https://github.com/tomfran/typo>tomfran/typo</a></p></footer></body><script src=/js/theme-switch.js></script><script defer src=/js/copy-code.js></script></html>