<!doctype html><html lang=zh-cn dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width"><link rel=icon type=image/ico href=https://blog.yzyy.de/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://blog.yzyy.de/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://blog.yzyy.de/favicon-32x32.png><link rel=icon type=image/png sizes=192x192 href=https://blog.yzyy.de/android-chrome-192x192.png><link rel=apple-touch-icon sizes=180x180 href=https://blog.yzyy.de/apple-touch-icon.png><meta name=description content="å› äº‘æœåŠ¡å™¨å•†ã€ŒClawCloudã€è°ƒæ•´ä¸­å›½ä¼˜åŒ–çº¿è·¯ï¼Œè·å¾—äº†å†…å­˜ç¿»å€çš„æ–°åŠ å¡/æ—¥æœ¬8GB VDSã€‚æœ¬æ–‡è¯¦ç»†è®°å½•äº†æ–°è´­æœåŠ¡å™¨åçš„å®‰å…¨é…ç½®ã€Dockerä¸æœåŠ¡ç¯å¢ƒæ­å»ºã€Cloudflare APIä¸‹acme.shè‡ªåŠ¨ç»­ç­¾SSLè¯ä¹¦çš„ç®€åŒ–æµç¨‹ï¼Œä»¥åŠOpenWebUIç­‰æœåŠ¡çš„æ•°æ®è¿ç§»å®æ“ä¸é‡åˆ°çš„é—®é¢˜ï¼Œæ—¨åœ¨ä¸ºæœåŠ¡å™¨æ¬å®¶å’Œè¿ç»´æä¾›å®ç”¨å‚è€ƒã€‚"><title>æ–°è´­ä¸€å°8GBçš„VDSä¸æ¬å®¶ | G-Hungçš„åšå®¢</title><link rel=canonical href=https://blog.yzyy.de/post/%E6%96%B0%E8%B4%AD%E4%B8%80%E5%8F%B08gb%E7%9A%84vds/><meta property="og:url" content="https://blog.yzyy.de/post/%E6%96%B0%E8%B4%AD%E4%B8%80%E5%8F%B08gb%E7%9A%84vds/"><meta property="og:site_name" content="G-Hungçš„åšå®¢"><meta property="og:title" content="æ–°è´­ä¸€å°8GBçš„VDSä¸æ¬å®¶"><meta property="og:description" content="å› äº‘æœåŠ¡å™¨å•†ã€ŒClawCloudã€è°ƒæ•´ä¸­å›½ä¼˜åŒ–çº¿è·¯ï¼Œè·å¾—äº†å†…å­˜ç¿»å€çš„æ–°åŠ å¡/æ—¥æœ¬8GB VDSã€‚æœ¬æ–‡è¯¦ç»†è®°å½•äº†æ–°è´­æœåŠ¡å™¨åçš„å®‰å…¨é…ç½®ã€Dockerä¸æœåŠ¡ç¯å¢ƒæ­å»ºã€Cloudflare APIä¸‹acme.shè‡ªåŠ¨ç»­ç­¾SSLè¯ä¹¦çš„ç®€åŒ–æµç¨‹ï¼Œä»¥åŠOpenWebUIç­‰æœåŠ¡çš„æ•°æ®è¿ç§»å®æ“ä¸é‡åˆ°çš„é—®é¢˜ï¼Œæ—¨åœ¨ä¸ºæœåŠ¡å™¨æ¬å®¶å’Œè¿ç»´æä¾›å®ç”¨å‚è€ƒã€‚"><meta property="og:locale" content="zh_cn"><meta property="og:type" content="article"><meta property="article:section" content="post"><meta property="article:published_time" content="2025-07-17T00:00:00+00:00"><meta property="article:modified_time" content="2025-07-17T00:00:00+00:00"><meta property="article:tag" content="ç”Ÿæ´»"><meta property="article:tag" content="æœåŠ¡å™¨"><link rel=stylesheet href=/assets/combined.min.b72766531fc58b8c9eb741223d816b1c10ab962791e1d50d5f6fcb81345cde80.css media=all><script async src="https://www.googletagmanager.com/gtag/js?id=G-88BLW4V0HZ"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-88BLW4V0HZ")}</script></head><body class=auto><div class=content><header><div class=header><h1 class=header-title><a href=https://blog.yzyy.de/>G-Hungçš„åšå®¢</a></h1><div class=header-menu><p class=small><a href=/>/home</a></p><p class=small><a href=/post>/æ—¥å¸¸</a></p><p class=small><a href=/explore>/æ¢ç´¢è®°å½•</a></p><p class=small><a href=/tags>/tags</a></p><a href=/index.xml target=_blank title=RSS class=rss-icon><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 11a9 9 0 019 9"/><path d="M4 4a16 16 0 0116 16"/><circle cx="5" cy="19" r="1"/></svg></a></div></div></header><main class=main><div class=breadcrumbs><a href=/>Home</a><span class=breadcrumbs-separator>/</span><a href=/post/>Posts</a><span class=breadcrumbs-separator>/</span>
<a href=/post/%E6%96%B0%E8%B4%AD%E4%B8%80%E5%8F%B08gb%E7%9A%84vds/>æ–°è´­ä¸€å°8GBçš„VDSä¸æ¬å®¶</a></div><div class=autonumber><article><header class=single-intro-container><h1 class=single-title>æ–°è´­ä¸€å°8GBçš„VDSä¸æ¬å®¶</h1><p class=single-summary>è®°å½•ä¸€æ¬¡æ–°è´­VDSå¹¶è¿ç§»æœåŠ¡çš„å…¨è¿‡ç¨‹ï¼ŒåŒ…æ‹¬æ•°æ®è¿ç§»ä¸è¸©å‘å¿ƒå¾—ã€‚</p><div class=single-subsummary><img src=/avatar.jpg alt="Author Avatar"><div><p class=author>ghung</p><p class=single-date><time datetime=2025-07-17T00:00:00+00:00>2025 Jul 17</time>
&nbsp; Â· &nbsp;7 min read</p></div></div></header><div class=single-tags><span><a href=https://blog.yzyy.de/tags/%E7%94%9F%E6%B4%BB/>#ç”Ÿæ´»</a>
</span><span><a href=https://blog.yzyy.de/tags/%E6%9C%8D%E5%8A%A1%E5%99%A8/>#æœåŠ¡å™¨</a></span></div><aside class=toc><p><strong>Table of contents</strong></p><nav id=TableOfContents><ul><li><a href=#å®‰å…¨>å®‰å…¨</a></li><li><a href=#å®‰è£…docker>å®‰è£…docker</a></li><li><a href=#sslè¯ä¹¦>SSLè¯ä¹¦</a><ul><li><a href=#è‡ªåŠ¨ç»­ç­¾æ”¹è¿›åçš„æ–¹æ¡ˆ>è‡ªåŠ¨ç»­ç­¾æ”¹è¿›åçš„æ–¹æ¡ˆ</a></li></ul></li><li><a href=#è¿ç§»æœåŠ¡>è¿ç§»æœåŠ¡</a><ul><li><a href=#openwebui--newapi>OpenWebUI + NewAPI</a></li><li><a href=#openlist>OpenList</a></li><li><a href=#sub-store>sub-store</a></li><li><a href=#gemini-balance>Gemini-balance</a></li><li><a href=#pdfmathtranslate>PDFMathTranslate</a></li></ul></li><li><a href=#å®‰è£…æ–°æœåŠ¡>å®‰è£…æ–°æœåŠ¡</a><ul><li><a href=#1panel>1Panel</a></li><li><a href=#å“ªå’ç›‘æ§v1>å“ªå’ç›‘æ§V1</a></li></ul></li><li><a href=#å…³é—­-ipv6--å¼€å¯bbr>å…³é—­ ipv6 & å¼€å¯bbr</a></li></ul></nav></aside><div class=single-content><p>åœ¨7æœˆ8æ—¥ï¼Œäººç§°â€œå°é˜¿é‡Œâ€çš„äº‘æœåŠ¡å™¨æä¾›å•†ã€ŒClawCloudã€å®£å¸ƒä¸‹çº¿æ”¯æŒä¸­å›½ä¼˜åŒ–çº¿è·¯çš„é¦™æ¸¯æœåŠ¡å™¨ã€‚è¿™ä¸ªå…¬å‘Šä¸­è¿˜æåˆ°äº†ä¸‰ä¸ªèµ”å¿æ–¹æ¡ˆï¼Œå…¶ä¸­ä¸¤ä¸ªä¸ºä¸åŒçš„é€€æ¬¾æ–¹æ¡ˆï¼Œè¿™é‡Œé‡ç‚¹å…³æ³¨æ–¹æ¡ˆäºŒï¼šå¯ä»¥å…è´¹è¿ç§»åˆ°æ–°åŠ å¡æˆ–æ—¥æœ¬èŠ‚ç‚¹ï¼Œå¹¶ä¸”**åŸæœ¬æœºå™¨çš„å†…å­˜å®¹é‡è¿˜ä¼šç›´æ¥ç¿»å€ã€‚</p><p>è¿™å°±å¯¼è‡´äº†å¸‚åœºä¸Šå‡ºç°äº†2æ ¸8GBçš„çº¿è·¯è‰¯å¥½çš„æ–°åŠ å¡\æ—¥æœ¬æœºå™¨ï¼Œå¹¶ä¸”ä»·æ ¼ä¸º4$/mï¼Œæœ‰æ²¡æœ‰å¾ˆå¿ƒåŠ¨ï¼Œæˆ‘åæ­£æ˜¯å¿ƒåŠ¨äº†ã€‚</p><p>å›æƒ³èµ·é‚£å¤œè¿œç¨‹å¼€å‘ä½¿ç”¨claude codeå†…å­˜çˆ†ç‚¸ï¼Œç‹¼ç‹ˆé‡å¯ã€‚é‚£å¤œä¸ºäº†å®‰è£…OpenWebUIï¼Œä¸€å£æ°”å¼€äº†2gçš„swapã€‚ç•ç•ç¼©ç¼©ä¸æ•¢ä½¿ç”¨åŠ¨æ€åšå®¢ã€ä¸æ•¢ä½¿ç”¨1panelç­‰è¿ç»´é¢æ¿ã€‚æ€•äº†çœŸæ€•äº†ï¼ŒğŸ˜­ç‹¼ç‹ˆçš„æˆ‘å«æ³ªæº¢ä»·ä¸€ç™¾å—æ”¶ä¸‹ä¸€å°æœºå™¨ï¼Œåªå¸Œæœ›èƒ½ç”¨çš„é•¿ä¹…å§ã€‚</p><p>ä»¥ä¸‹è®°å½•ä¸€ä¸‹æˆ‘æ‹¿åˆ°ä¸€å°æ–°æœºå™¨ä¼šåšä»€ä¹ˆä»¥åŠè¿ç§»è¿‡ç¨‹ã€‚</p><hr><h2 class=heading id=å®‰å…¨>å®‰å…¨
<a class=anchor href=#%e5%ae%89%e5%85%a8>#</a></h2><p>æœ€é‡è¦çš„å½“ç„¶æ˜¯å®‰å…¨ï¼Œä¹‹å‰å·²ç»ç»™å‡ºäº†æœåŠ¡å™¨çš„å®‰å…¨è®ºï¼Œè¯·çœ‹<a href=/explore/%E6%9C%8D%E5%8A%A1%E5%99%A8/vps%E5%9F%BA%E6%9C%AC%E5%AE%89%E5%85%A8%E6%8E%AA%E6%96%BD/>VPSåŸºç¡€å®‰å…¨é…ç½®å®è·µæŒ‡å—</a>ã€‚</p><h2 class=heading id=å®‰è£…docker>å®‰è£…docker
<a class=anchor href=#%e5%ae%89%e8%a3%85docker>#</a></h2><p>å› ä¸ºå¤šæ•°æœåŠ¡æ˜¯è¿è¡Œåœ¨dockerä¸Šçš„ï¼Œå®‰è£…docker & docker composeæ˜¯å¿…ä¸å¯å°‘çš„ã€‚</p><h2 class=heading id=sslè¯ä¹¦>SSLè¯ä¹¦
<a class=anchor href=#ssl%e8%af%81%e4%b9%a6>#</a></h2><p>ä¸æ˜¯ç®€å•åœ°è¿ç§»å·²æœ‰è¯ä¹¦å°±è¡Œäº†ï¼Œè¿˜è¦è¿ç§»é…ç½®å¥½çš„è‡ªåŠ¨ç»­ç­¾æœåŠ¡ï¼Œç»è¿‡æŸ¥çœ‹åœ¨ä¸€å°æœºå™¨ä¸Šæœ‰å››ä¸ªåŸŸåçš„è‡ªåŠ¨ç»­ç­¾æœåŠ¡ï¼Œä½†æ˜¯æˆ‘å‡†å¤‡ç˜¦èº«ä¸€ä¸‹ï¼Œæœ‰äº›åŸŸåå¿«åˆ°æœŸäº†ã€‚<figure><div class=img-container><img loading=lazy alt src=https://webp.050612.xyz/2025/07/certificates.png></div></figure></p><h3 class=heading id=è‡ªåŠ¨ç»­ç­¾æ”¹è¿›åçš„æ–¹æ¡ˆ>è‡ªåŠ¨ç»­ç­¾æ”¹è¿›åçš„æ–¹æ¡ˆ
<a class=anchor href=#%e8%87%aa%e5%8a%a8%e7%bb%ad%e7%ad%be%e6%94%b9%e8%bf%9b%e5%90%8e%e7%9a%84%e6%96%b9%e6%a1%88>#</a></h3><p>å‘ç°ä¹‹å‰çš„å¤šä¸ªåŸŸåçš„è‡ªåŠ¨ç»­ç­¾ç®¡ç†ååˆ†ç¹çï¼Œä¸AIäº¤æµåè·å¾—äº†ä¸€ä¸ªæ›´ä¸ºç®€æ´çš„å¯è¡Œçš„æ–¹æ¡ˆï¼Œç®€åŒ–äº†æ“ä½œä¸é…ç½®ã€‚</p><h4 class=heading id=cloudflare-api>Cloudflare API
<a class=anchor href=#cloudflare-api>#</a></h4><p>ä½¿ç”¨ Cloudflare DNS æ¨¡å¼éœ€è¦å‡†å¤‡:</p><ul><li>Account ID</li><li>API Token</li></ul><h5 class=heading id=è·å–-account-id>è·å– Account ID
<a class=anchor href=#%e8%8e%b7%e5%8f%96-account-id>#</a></h5><p>è¿™ä¸¤ç§ ID ç›´æ¥åœ¨ Overview é¡µå°±èƒ½æ‰¾åˆ°ã€‚</p><p><figure><div class=img-container><img loading=lazy alt=cloudflare_account_id src=https://webp.050612.xyz/2025/07/cloudflare_account_id.png></div></figure></p><h5 class=heading id=è·å–-api-token>è·å– API Token
<a class=anchor href=#%e8%8e%b7%e5%8f%96-api-token>#</a></h5><p>Overview é¡µç‚¹å‡» <code>è·å–æ‚¨çš„ API ä»¤ç‰Œ</code> è¿›å…¥ API Tokens é¡µã€‚</p><p>ç‚¹å‡» API Tokens é¡¹æ—è¾¹ <code>åˆ›å»ºä»¤ç‰Œ</code> æŒ‰é’®ï¼Œæ¥ç€é€‰æ‹© <code>ç¼–è¾‘åŒºåŸŸ DNS</code> çš„æ¨¡æ¿ï¼Œç‚¹å‡» <code>ä½¿ç”¨æ¨¡æ¿</code>ã€‚</p><p><figure><div class=img-container><img loading=lazy alt=image src=https://webp.050612.xyz/2025/02/e15d8a0a1de821faab5355e610b581016975b974_2_690x265.png></div></figure></p><p><figure><div class=img-container><img loading=lazy alt=image src=https://webp.050612.xyz/2025/02/42f87595d27a6fb3ed1fe329934517f5416920c6_2_690x210.png></div></figure></p><p><code>åŒºåŸŸèµ„æº</code> é‡Œé€‰æ‹©éœ€è¦ç­¾å‘çš„åŸŸåï¼Œå¤šä¸ªåŸŸåé€‰æ‹©å¤šä¸ªã€‚ä¸å»ºè®®é€‰æ‹©å…¨éƒ¨çš„åŸŸåï¼Œ**æœ€å°æƒé™åŸåˆ™ã€‚</p><p>åœ¨ <code>å®¢æˆ·ç«¯ IP åœ°å€ç­›é€‰</code> é‡Œå»ºè®®å†™ä¸‹ acme.sh æ‰€åœ¨çš„ä¸»æœºåšä¸ºç™½åå•ï¼Œéœ€è¦æ³¨æ„ï¼Œå¦‚æœæœåŠ¡å™¨æœ‰ ipv6 åœ°å€ï¼Œåˆ™ä¹Ÿéœ€è¦æ·»åŠ ï¼Œå› ä¸ºæœ‰å¯èƒ½ä¼š ipv6 ä¼˜å…ˆè®¿é—®ã€‚</p><p>å‡» <code>ç»§ç»­ä»¥æ˜¾ç¤ºæ‘˜è¦</code> , ç¡®è®¤æ²¡é—®é¢˜åæœ€åç‚¹å‡» <code>åˆ›å»ºä»¤ç‰Œ</code>ã€‚</p><p><figure><div class=img-container><img loading=lazy alt=image src=https://webp.050612.xyz/2025/02/e88966d6049c27c31c632f9471ec1b79be287b59_2_510x499.png></div></figure></p><p>æ­¤æ—¶å°±ä¼šå‡ºç°ä¸€ä¸ª Token,ï¼Œå³ CF_Tokenï¼Œæ‹·è´å¤‡ç”¨ã€‚</p><p><figure><div class=img-container><img loading=lazy alt=image src=https://webp.050612.xyz/2025/02/ca6093ea6bf83325809ea6179d4239ae2c9818cc_2_690x404.png></div></figure></p><h5 class=heading id=æ³¨æ„>æ³¨æ„
<a class=anchor href=#%e6%b3%a8%e6%84%8f>#</a></h5><ul><li><strong>æ³¨æ„æ–°å¢åŸŸåæ—¶ï¼Œéœ€è¦æ›´æ”¹API Tokenæ‰€åŒ…å«çš„åŸŸå</strong></li><li><strong>æ³¨æ„æœ‰å¤šå°æœºå™¨æ—¶ï¼Œéœ€è¦æ–°å¢æœºå™¨çš„IPåˆ°ç™½åå•</strong>ã€‚</li></ul><p><figure><div class=img-container><img loading=lazy alt=update_cf_api_token src=https://webp.050612.xyz/2025/02/update_cf_api_token.png></div></figure><figure><div class=img-container><img loading=lazy alt=cf-api-token-ip src=https://webp.050612.xyz/2025/02/cf-api-token-ip.png></div></figure></p><h4 class=heading id=ä¸€ä¸ªå®Œæ•´çš„æ¼”ç¤º>ä¸€ä¸ªå®Œæ•´çš„æ¼”ç¤º
<a class=anchor href=#%e4%b8%80%e4%b8%aa%e5%ae%8c%e6%95%b4%e7%9a%84%e6%bc%94%e7%a4%ba>#</a></h4><p>è·å–åˆ°äº†ä»¥ä¸Šä¸¤ä¸ªtokenå³å¯å¼€å§‹æ“ä½œã€‚</p><p>ä¸ºäº†ä½¿æ•´ä¸ªæµç¨‹æ›´åŠ æ¸…æ™°ï¼ˆ<del>æ–¹ä¾¿è‡ªå·±æ“ä½œ</del>ï¼‰ï¼Œè¿™é‡Œè´´ä¸€ä¸ªè‡ªå·±å¹³æ—¶ä½¿ç”¨ acme.sh ç”³è¯·è¯ä¹¦çš„å®Œæ•´æµç¨‹ã€‚</p><ul><li>ç”³è¯·æ–¹å¼ï¼šDNS è®¤è¯ï¼ˆä½¿ç”¨ Cloudflare APIï¼‰</li><li>ç”³è¯·è¯ä¹¦ CAï¼šLetâ€™s Encrypt</li><li>ç”³è¯·è¯ä¹¦ç±»å‹ï¼šRSA + ECC ä¸¤ä¸ªé€šé…ç¬¦è¯ä¹¦</li></ul><p>åç»­ç”³è¯·è¯ä¹¦çš„å‘½ä»¤ï¼Œéƒ½æ˜¯åœ¨ root ç”¨æˆ·ä¸‹æ‰§è¡Œçš„ï¼Œè¯·å…ˆä½¿ç”¨ <code>su</code> åˆ‡æ¢åˆ° root ç”¨æˆ·ã€‚</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#888;font-style:italic># è¿›å…¥rootç”¨æˆ·</span>
</span></span><span style=display:flex><span>su
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#888;font-style:italic># å®‰è£… acme.sh</span>
</span></span><span style=display:flex><span>curl  https://get.acme.sh | sh
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#888;font-style:italic># åˆ·æ–° shell å˜é‡é…ç½®</span>
</span></span><span style=display:flex><span><span style=font-weight:700;font-style:italic>source</span> ~/.bashrc
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#888;font-style:italic># å¯¼å…¥ Cloudflare API Token</span>
</span></span><span style=display:flex><span><span style=font-weight:700;font-style:italic>export</span> <span style=color:#666;font-weight:700;font-style:italic>CF_Token</span>=<span style=color:#666;font-style:italic>&#34;xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx&#34;</span>
</span></span><span style=display:flex><span><span style=font-weight:700;font-style:italic>export</span> <span style=color:#666;font-weight:700;font-style:italic>CF_Account_ID</span>=<span style=color:#666;font-style:italic>&#34;xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#888;font-style:italic># è®¾ç½®é»˜è®¤ CA ä¸º Let&#39;s Encrypt</span>
</span></span><span style=display:flex><span>acme.sh --set-default-ca --server letsencrypt
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#888;font-style:italic># ç­¾å‘ RSA è¯ä¹¦</span>
</span></span><span style=display:flex><span>acme.sh --issue --dns dns_cf -d xxx.xyz -d *.xxx.xyz --keylength 2048
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#888;font-style:italic># å®‰è£… RSA è¯ä¹¦åˆ°æŒ‡å®šè·¯å¾„</span>
</span></span><span style=display:flex><span>acme.sh --install-cert -d domain.tld <span style=color:#666;font-style:italic>\
</span></span></span><span style=display:flex><span><span style=color:#666;font-style:italic></span>--key-file       /path/to/ssl/domain.tld_private.key  <span style=color:#666;font-style:italic>\
</span></span></span><span style=display:flex><span><span style=color:#666;font-style:italic></span>--fullchain-file /path/to/ssl/domain.tld_chain.pem <span style=color:#666;font-style:italic>\
</span></span></span><span style=display:flex><span><span style=color:#666;font-style:italic></span>--reloadcmd      <span style=color:#666;font-style:italic>&#34;service nginx reload&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#888;font-style:italic># ç­¾å‘ ECC è¯ä¹¦ï¼Œè‹¥ä¸éœ€è¦ï¼Œè·³è¿‡å³å¯</span>
</span></span><span style=display:flex><span>acme.sh --issue --dns dns_cf -d domain.tld -d *.domain.tld --keylength ec-256
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#888;font-style:italic># å®‰è£… ECC è¯ä¹¦åˆ°æŒ‡å®šè·¯å¾„</span>
</span></span><span style=display:flex><span>acme.sh --install-cert -d domain.tld --ecc <span style=color:#666;font-style:italic>\
</span></span></span><span style=display:flex><span><span style=color:#666;font-style:italic></span>--key-file       /path/to/ssl/ecc_domain.tld_private.key  <span style=color:#666;font-style:italic>\
</span></span></span><span style=display:flex><span><span style=color:#666;font-style:italic></span>--fullchain-file /path/to/ssl/ecc_domain.tld_chain.pem <span style=color:#666;font-style:italic>\
</span></span></span><span style=display:flex><span><span style=color:#666;font-style:italic></span>--capath         /path/to/ssl/ecc_domain.tld_ca.pem  <span style=color:#666;font-style:italic>\
</span></span></span><span style=display:flex><span><span style=color:#666;font-style:italic></span>--reloadcmd      <span style=color:#666;font-style:italic>&#34;service nginx reload&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#888;font-style:italic># è‡³æ­¤è¯ä¹¦å®‰è£…å®Œæ¯•</span>
</span></span><span style=display:flex><span><span style=color:#888;font-style:italic># ä¸‹é¢æ˜¯åŒä¸€å°ä¸»æœºç”³è¯·ç¬¬äºŒä¸ªåŸŸåè¯ä¹¦</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#888;font-style:italic>###############################ç¬¬äºŒä¸ªåŸŸå#####################################################################</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#888;font-style:italic># ç­¾å‘ RSA è¯ä¹¦</span>
</span></span><span style=display:flex><span>acme.sh --issue --dns dns_cf -d xxx.xyz -d *.xxx.xyz --keylength 2048
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#888;font-style:italic># å®‰è£… RSA è¯ä¹¦åˆ°æŒ‡å®šè·¯å¾„</span>
</span></span><span style=display:flex><span>acme.sh --config-home /root/.acme2 <span style=color:#666;font-style:italic>\
</span></span></span><span style=display:flex><span><span style=color:#666;font-style:italic></span>--install-cert -d domain.tld <span style=color:#666;font-style:italic>\
</span></span></span><span style=display:flex><span><span style=color:#666;font-style:italic></span>--key-file       /path/to/ssl/domain.tld_private.key  <span style=color:#666;font-style:italic>\
</span></span></span><span style=display:flex><span><span style=color:#666;font-style:italic></span>--fullchain-file /path/to/ssl/domain.tld_chain.pem <span style=color:#666;font-style:italic>\
</span></span></span><span style=display:flex><span><span style=color:#666;font-style:italic></span>--reloadcmd      <span style=color:#666;font-style:italic>&#34;service nginx reload&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#888;font-style:italic># ç­¾å‘ ECC è¯ä¹¦ï¼Œè‹¥ä¸éœ€è¦ï¼Œè·³è¿‡å³å¯</span>
</span></span><span style=display:flex><span>acme.sh --config-home /root/.acme2 --issue --dns dns_cf -d domain.tld -d *.domain.tld --keylength ec-256
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#888;font-style:italic># å®‰è£… ECC è¯ä¹¦åˆ°æŒ‡å®šè·¯å¾„</span>
</span></span><span style=display:flex><span>acme.sh --config-home /root/.acme2 <span style=color:#666;font-style:italic>\
</span></span></span><span style=display:flex><span><span style=color:#666;font-style:italic></span>--install-cert -d domain.tld --ecc <span style=color:#666;font-style:italic>\
</span></span></span><span style=display:flex><span><span style=color:#666;font-style:italic></span>--key-file       /path/to/ssl/ecc_domain.tld_private.key  <span style=color:#666;font-style:italic>\
</span></span></span><span style=display:flex><span><span style=color:#666;font-style:italic></span>--fullchain-file /path/to/ssl/ecc_domain.tld_chain.pem <span style=color:#666;font-style:italic>\
</span></span></span><span style=display:flex><span><span style=color:#666;font-style:italic></span>--capath         /path/to/ssl/ecc_domain.tld_ca.pem  <span style=color:#666;font-style:italic>\
</span></span></span><span style=display:flex><span><span style=color:#666;font-style:italic></span>--reloadcmd      <span style=color:#666;font-style:italic>&#34;service nginx reload&#34;</span>
</span></span></code></pre></div><p>æ£€æŸ¥cronå®šæ—¶ä»»åŠ¡æ˜¯å¦å·²ç»æˆåŠŸåˆ›å»º</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>crontab -l
</span></span></code></pre></div><p>å¦‚æœæœ‰ä¸¤ä¸ªä»¥ä¸Šçš„åŸŸåæˆ–è€…æ–°å¢åŸŸåï¼Œ
åªéœ€è¦ï¼š</p><ol><li>åœ¨Cloudflareçš„ã€ŒAPI Tokenã€ç®¡ç†ä¸­ï¼Œæ–°å¢API Tokenæ‰€åŒ…å«çš„åŸŸå</li><li>ç­¾å‘æ–°åŸŸåçš„è¯ä¹¦å¹¶å®‰è£…åˆ°æŒ‡å®šä½ç½®</li></ol><p>acme.shä¼šæ£€æŸ¥æ‰€ç®¡ç†çš„æ‰€æœ‰åŸŸåçš„è¯ä¹¦çš„åˆ°æœŸæ—¶é—´ï¼Œå¦‚æœéœ€è¦ç»­ç­¾ï¼Œåˆ™ä¼šæ‰§è¡Œç»­ç­¾æ“ä½œå¹¶å®‰è£…å¯¼è‡´è®¢ä½ç½®ï¼Œå®ç°è¯ä¹¦çš„è‡ªåŠ¨ç»­ç­¾ã€‚ä¸€åŠ³æ°¸é€¸çš„æ“ä½œã€‚</p><h2 class=heading id=è¿ç§»æœåŠ¡>è¿ç§»æœåŠ¡
<a class=anchor href=#%e8%bf%81%e7%a7%bb%e6%9c%8d%e5%8a%a1>#</a></h2><p>åˆ°äº†æœ€å¤æ‚çš„ä¸€ä¸ªç¯èŠ‚äº†ï¼Œå³ä½¿è¿è¡Œåœ¨dockerçš„æœåŠ¡ï¼Œæ¯ä¸ªä¹Ÿè¦è¿ç§»volumesã€nginxé…ç½®ï¼Œå¼€å¹²ï¼ğŸ’ªæ­£å¥½å‡‘è¿™ä¸ªæœºä¼šç»Ÿè®¡ä¸€ä¸‹æˆ‘è¿è¡Œäº†å“ªäº›æœåŠ¡ã€‚</p><h3 class=heading id=openwebui--newapi>OpenWebUI + NewAPI
<a class=anchor href=#openwebui--newapi>#</a></h3><ol><li>æ‰“åŒ…æŒä¹…åŒ–æ•°æ®ï¼Œå…¶ä¸­NewAPIçš„MySQLä½¿ç”¨äº†Dockerçš„å‘½åå·</li></ol><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#888;font-style:italic>######## æ‰“åŒ…OpenWebUIå’ŒNewAPIçš„æŒä¹…åŒ–æ•°æ®</span>
</span></span><span style=display:flex><span>tar -czvf data.tar.gz ./openwebui ./newapi
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#888;font-style:italic>######## æ‰“åŒ…newapi MySQLæ•°æ®å· ###########</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#888;font-style:italic># æŸ¥æ‰¾å·çš„ç‰©ç†è·¯å¾„</span>
</span></span><span style=display:flex><span>docker volume inspect [é¡¹ç›®å]_mysql_data
</span></span><span style=display:flex><span><span style=color:#888;font-style:italic># åœ¨è¾“å‡ºä¸­æ‰¾åˆ° &#34;Mountpoint&#34;: &#34;/var/lib/docker/volumes/[é¡¹ç›®å]_mysql_data/_data&#34;</span>
</span></span><span style=display:flex><span>sudo tar -czvf ~/mysql_volume.tar.gz /var/lib/docker/volumes/[é¡¹ç›®å]_mysql_data/_data
</span></span></code></pre></div><ol start=2><li>ä½¿ç”¨SFTPåŠŸèƒ½ä¼ è¾“åˆ°æ–°æœºå™¨</li><li>åœ¨æ–°æœºå™¨ä¸Šè§£å‹</li></ol><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-BASH data-lang=BASH><span style=display:flex><span><span style=color:#888;font-style:italic>######## è§£å‹OpenWebUIå’ŒNewAPIçš„æŒä¹…åŒ–æ•°æ®</span>
</span></span><span style=display:flex><span>sudo tar -xzvf data.tar.gz -C ./
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#888;font-style:italic>######## è§£å‹newapi MySQLæ•°æ®å· ###########</span>
</span></span><span style=display:flex><span><span style=color:#888;font-style:italic># æ‰‹åŠ¨åˆ›å»ºç›®å½•</span>
</span></span><span style=display:flex><span>sudo mkdir -p /var/lib/docker/volumes/[é¡¹ç›®å]_mysql_data/_data
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#888;font-style:italic># è§£å‹æ–‡ä»¶</span>
</span></span><span style=display:flex><span>sudo tar -xzvf ~/mysql_volume.tar.gz -C /var/lib/docker/volumes/[é¡¹ç›®å]_mysql_data/_data
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#888;font-style:italic># ä¿®å¤æ–‡ä»¶æƒé™</span>
</span></span><span style=display:flex><span>sudo chown -R 999:999 /var/lib/docker/volumes/[é¡¹ç›®å]_mysql_data/_data
</span></span></code></pre></div><ol start=4><li>é…ç½®nginx</li></ol><p>ç›´æ¥æŠŠæ—§æœºå™¨ä¸Šçš„nginxæ‰“åŒ…ä¸Šä¼ åˆ°æ–°æœºä¸Šï¼Œæ“ä½œåªéœ€è¦å»ºç«‹site-availableä¸site-enableçš„è½¯è¿æ¥</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo ln -s /etc/nginx/sites-available/api.vtofun.me /etc/nginx/sites-enabled/api.vtofun.me
</span></span></code></pre></div><blockquote><p>ç»·ä¸ä½äº†ï¼Œç¬¬ä¸€æ¬¡æ¬å®¶ååˆ†ä¹ƒè‡³ä¸‡åˆ†ä¸é¡ºåˆ©ï¼Œä»ä¸ƒç‚¹æ¬åˆ°åä¸€ç‚¹åŠè¿˜æ²¡æ¬å®Œã€‚æ¬å®¶å¤ªç´¯äº†ğŸ˜­</p></blockquote><h3 class=heading id=openlist>OpenList
<a class=anchor href=#openlist>#</a></h3><p>æƒ³åˆ°å‰æ®µæ—¶é—´çš„alistçš„æš´é›·å•†ä¸šåŒ–ï¼Œæˆ‘è¿˜æ˜¯æŠŠé•œåƒæ¢æˆOpenListå§ã€‚</p><ol><li>dockeré•œåƒå˜æ›´</li></ol><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yml data-lang=yml><span style=display:flex><span>version: <span style=color:#666;font-style:italic>&#39;3.3&#39;</span>
</span></span><span style=display:flex><span>services:
</span></span><span style=display:flex><span>  alist:
</span></span><span style=display:flex><span>    image: <span style=color:#666;font-style:italic>&#39;openlistteam/openlist:latest&#39;</span>
</span></span><span style=display:flex><span>    container_name: alist
</span></span><span style=display:flex><span>    volumes:
</span></span><span style=display:flex><span>      - <span style=color:#666;font-style:italic>&#39;./data:/opt/alist/data&#39;</span>
</span></span><span style=display:flex><span>    ports:
</span></span><span style=display:flex><span>      - <span style=color:#666;font-style:italic>&#39;127.0.0.1:1259:5244&#39;</span>
</span></span><span style=display:flex><span>    environment:
</span></span><span style=display:flex><span>      - PUID=0
</span></span><span style=display:flex><span>      - PGID=0
</span></span><span style=display:flex><span>      - UMASK=022
</span></span><span style=display:flex><span>    restart: unless-stopped
</span></span></code></pre></div><ol start=2><li>é…ç½®nginx</li></ol><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo ln -s /etc/nginx/sites-available/api.vtofun.me /etc/nginx/sites-enabled/api.vtofun.me
</span></span></code></pre></div><ol start=3><li>æ³¨æ„æ‰“å¼€adminç”¨æˆ·çš„webdavçš„è¯»æƒé™ã€‚</li></ol><h3 class=heading id=sub-store>sub-store
<a class=anchor href=#sub-store>#</a></h3><p>å¾ˆå¥½ç”¨çš„ä»£ç†é…ç½®ç®¡ç†è½¯ä»¶</p><ol><li>nginx</li></ol><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo ln -s /etc/nginx/sites-available/substore /etc/nginx/sites-enabled/substore
</span></span><span style=display:flex><span>sudo systemctl restart nginx.service 
</span></span></code></pre></div><h3 class=heading id=gemini-balance>Gemini-balance
<a class=anchor href=#gemini-balance>#</a></h3><p>ä¸€ä¸ªå¾ˆå¥½ç”¨çš„geminiä»£ç†æœåŠ¡ï¼Œæ”¯æŒå¤šKEYï¼Œå¤±è´¥é‡è¯•ç­‰ã€‚</p><p>ç”±äºä¹‹å‰æœåŠ¡å™¨ä¸ºé¦™æ¸¯ï¼Œè€ŒAIæœåŠ¡ä¸€èˆ¬éƒ½ä¸æ”¯æŒä¸­å›½å¤§é™†ä»¥åŠé¦™æ¸¯ï¼Œæ‰€ä»¥ä¹‹å‰gemini-balanceæœåŠ¡éƒ¨ç½²åœ¨ä¸€ä¸ªå°æœºå™¨ä¸Šã€‚æ­£å¥½è¶ç€è¿™æ¬¡æ¬å®¶æ¬åˆ°ä¸€èµ·ã€‚</p><ul><li>docker-compose.ymlæ–‡ä»¶ï¼Œé€šè¿‡.envä½¿ç”¨å’ŒNew-APIåŒä¸€ä¸ªMySQLï¼Œé¿å…èµ·ä¸¤ä¸ªMySQLæœåŠ¡ï¼Œé€ æˆèµ„æºæµªè´¹ã€‚</li></ul><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yml data-lang=yml><span style=display:flex><span>  <span style=color:#888;font-style:italic># Geminiä»£ç†æ± </span>
</span></span><span style=display:flex><span>  gemini-balance:
</span></span><span style=display:flex><span>    image: ghcr.io/snailyp/gemini-balance:latest
</span></span><span style=display:flex><span>    container_name: gemini-balance
</span></span><span style=display:flex><span>    restart: unless-stopped
</span></span><span style=display:flex><span>    ports:
</span></span><span style=display:flex><span>      - <span style=color:#666;font-style:italic>&#34;127.0.0.1:1260:8000&#34;</span> 
</span></span><span style=display:flex><span>    env_file:
</span></span><span style=display:flex><span>      - .env <span style=color:#888;font-style:italic># åŒæ ·ä½¿ç”¨ .env æ–‡ä»¶ç®¡ç†é…ç½®</span>
</span></span><span style=display:flex><span>    networks:
</span></span><span style=display:flex><span>      - app_network <span style=color:#888;font-style:italic># åŠ å…¥ç»Ÿä¸€ç½‘ç»œ</span>
</span></span><span style=display:flex><span>    depends_on:
</span></span><span style=display:flex><span>      mysql:
</span></span><span style=display:flex><span>        condition: service_healthy <span style=color:#888;font-style:italic># ä¾èµ–äºæˆ‘ä»¬ç»Ÿä¸€çš„ mysql æœåŠ¡</span>
</span></span><span style=display:flex><span>    healthcheck:
</span></span><span style=display:flex><span>      test: [<span style=color:#666;font-style:italic>&#34;CMD-SHELL&#34;</span>, <span style=color:#666;font-style:italic>&#34;python -c \&#34;import requests; exit(0) if requests.get(&#39;http://localhost:8000/health&#39;).status_code == 200 else exit(1)\&#34;&#34;</span>]
</span></span><span style=display:flex><span>      interval: 30s
</span></span><span style=display:flex><span>      timeout: 5s
</span></span><span style=display:flex><span>      retries: 3
</span></span><span style=display:flex><span>      start_period: 10s
</span></span></code></pre></div><p>nginxé…ç½®æ–‡ä»¶æ²¡æœ‰ä»€ä¹ˆç‰¹æ®Šçš„ï¼Œåä»£ä¸€ä¸‹å³å¯ã€‚</p><h3 class=heading id=pdfmathtranslate>PDFMathTranslate
<a class=anchor href=#pdfmathtranslate>#</a></h3><p>ä¸€ä¸ªåŸºäº AI å®Œæ•´ä¿ç•™æ’ç‰ˆçš„ PDF æ–‡æ¡£å…¨æ–‡åŒè¯­ç¿»è¯‘ï¼Œæ”¯æŒ Google/DeepL/Ollama/OpenAI ç­‰æœåŠ¡ã€‚</p><h2 class=heading id=å®‰è£…æ–°æœåŠ¡>å®‰è£…æ–°æœåŠ¡
<a class=anchor href=#%e5%ae%89%e8%a3%85%e6%96%b0%e6%9c%8d%e5%8a%a1>#</a></h2><h3 class=heading id=1panel>1Panel
<a class=anchor href=#1panel>#</a></h3><p>ä¸€é”®å®‰è£…çš„å‘½ä»¤ï¼š</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>bash -c <span style=color:#666;font-style:italic>&#34;</span><span style=font-weight:700;text-decoration:underline>$(</span>curl -sSL https://resource.fit2cloud.com/1panel/package/v2/quick_start.sh<span style=font-weight:700;text-decoration:underline>)</span><span style=color:#666;font-style:italic>&#34;</span>
</span></span></code></pre></div><p><figure><div class=img-container><img loading=lazy alt src=https://webp.050612.xyz/2025/07/20250718151202885.png></div></figure></p><blockquote><p>2025-07-18æ—¥æ›´æ–°
1panel é¢æ¿bugå¥½å¤šï¼Œä½¿ç”¨nginxåä»£é¢æ¿æœ¬èº«å®ç°httpsè®¿é—®ï¼Œä¸€ç›´å¡åœ¨loadingã€‚ä¸çŸ¥æ˜¯ä¸æ˜¯æˆ‘æ“ä½œæœ‰é—®é¢˜ã€‚</p></blockquote><p>ä¼¼ä¹é‡è§é—®é¢˜çš„æƒ…å†µæœ‰å¾ˆå¤šã€‚<figure><div class=img-container><img loading=lazy alt src=https://webp.050612.xyz/2025/07/20250718161106071.png></div></figure></p><h4 class=heading id=é—®é¢˜å®šä½>é—®é¢˜å®šä½
<a class=anchor href=#%e9%97%ae%e9%a2%98%e5%ae%9a%e4%bd%8d>#</a></h4><p>ç›®å‰ä½¿ç”¨ip:portæ–¹å¼å¯ä»¥æ­£å¸¸è®¿é—®ï¼Œä½¿ç”¨åŸŸåæ— æ³•è®¿é—®ï¼Œå¯ä»¥åˆæ­¥åˆ¤æ–­ä¸ºnginxåä»£çš„é…ç½®é—®é¢˜ã€‚</p><h4 class=heading id=é—®é¢˜è§£å†³>é—®é¢˜è§£å†³
<a class=anchor href=#%e9%97%ae%e9%a2%98%e8%a7%a3%e5%86%b3>#</a></h4><p>è´´ä¸Šä¸€ä»½å¯ä»¥æ­£å¸¸å·¥ä½œçš„nginxé…ç½®ï¼š</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-nginx data-lang=nginx><span style=display:flex><span><span style=font-weight:700;text-decoration:underline>server</span> {
</span></span><span style=display:flex><span>    <span style=font-weight:700;text-decoration:underline>listen</span> 80;
</span></span><span style=display:flex><span>    <span style=font-weight:700;text-decoration:underline>server_name</span> <span style=color:#666;font-style:italic>xxx</span>;
</span></span><span style=display:flex><span>    <span style=font-weight:700;text-decoration:underline>return</span> 301 <span style=color:#666;font-style:italic>https://</span><span style=color:#666;font-weight:700;font-style:italic>$server_name$request_uri</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=font-weight:700;text-decoration:underline>server</span> {
</span></span><span style=display:flex><span>    <span style=font-weight:700;text-decoration:underline>listen</span> 443 <span style=color:#666;font-style:italic>ssl</span> <span style=color:#666;font-style:italic>http2</span>;
</span></span><span style=display:flex><span>    <span style=font-weight:700;text-decoration:underline>server_name</span>          <span style=color:#666;font-style:italic>xxx</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=font-weight:700;text-decoration:underline>ssl_certificate</span>      <span style=color:#666;font-style:italic>/etc/ssl/certs/xxx</span>;  
</span></span><span style=display:flex><span>    <span style=font-weight:700;text-decoration:underline>ssl_certificate_key</span>  <span style=color:#666;font-style:italic>/etc/ssl/private/xxx</span>; 
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=font-weight:700;text-decoration:underline>ssl_session_timeout</span> <span style=color:#666;font-style:italic>1d</span>;
</span></span><span style=display:flex><span>    <span style=font-weight:700;text-decoration:underline>ssl_session_cache</span> <span style=color:#666;font-style:italic>shared:MozSSL:10m</span>;
</span></span><span style=display:flex><span>    <span style=font-weight:700;text-decoration:underline>ssl_ciphers</span> <span style=color:#666;font-style:italic>ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305:DHE-RSA-AES128-GCM-SHA256:DHE-RSA-AES256-GCM-SHA384</span>;
</span></span><span style=display:flex><span>    <span style=font-weight:700;text-decoration:underline>ssl_prefer_server_ciphers</span> <span style=color:#666;font-weight:700;font-style:italic>off</span>;
</span></span><span style=display:flex><span>    <span style=font-weight:700;text-decoration:underline>ssl_protocols</span> <span style=color:#666;font-style:italic>TLSv1.1</span> <span style=color:#666;font-style:italic>TLSv1.2</span> <span style=color:#666;font-style:italic>TLSv1.3</span>;
</span></span><span style=display:flex><span>    <span style=font-weight:700;text-decoration:underline>add_header</span> <span style=color:#666;font-style:italic>Strict-Transport-Security</span> <span style=color:#666;font-style:italic>&#34;max-age=63072000&#34;</span> <span style=color:#666;font-style:italic>always</span>;
</span></span><span style=display:flex><span>    <span style=font-weight:700;text-decoration:underline>client_max_body_size</span> 500m;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=font-weight:700;text-decoration:underline>location</span> <span style=color:#666;font-style:italic>/</span> {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=font-weight:700;text-decoration:underline>proxy_pass</span> <span style=color:#666;font-style:italic>http://xxxx:1255</span>; <span style=color:#888;font-style:italic># xxxæ›¿æ¢ä¸ºå†…éƒ¨è®¿é—®åœ°å€
</span></span></span><span style=display:flex><span><span style=color:#888;font-style:italic></span>
</span></span><span style=display:flex><span>        <span style=font-weight:700;text-decoration:underline>proxy_http_version</span> 1<span style=color:#666;font-style:italic>.1</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#888;font-style:italic># WebSocket ä»£ç†æ‰€éœ€çš„å¤´ï¼Œ1Panel å¯èƒ½ç”¨åˆ°
</span></span></span><span style=display:flex><span><span style=color:#888;font-style:italic></span>        <span style=font-weight:700;text-decoration:underline>proxy_set_header</span> <span style=color:#666;font-style:italic>Upgrade</span> <span style=color:#666;font-weight:700;font-style:italic>$http_upgrade</span>;
</span></span><span style=display:flex><span>        <span style=font-weight:700;text-decoration:underline>proxy_set_header</span> <span style=color:#666;font-style:italic>Connection</span> <span style=color:#666;font-style:italic>&#34;upgrade&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#888;font-style:italic># é‡è¦çš„è½¬å‘å¤´
</span></span></span><span style=display:flex><span><span style=color:#888;font-style:italic></span>        <span style=font-weight:700;text-decoration:underline>proxy_set_header</span> <span style=color:#666;font-style:italic>Host</span> <span style=color:#666;font-weight:700;font-style:italic>$host</span>; <span style=color:#888;font-style:italic># ä¼ é€’åŸå§‹è¯·æ±‚çš„ Host å¤´
</span></span></span><span style=display:flex><span><span style=color:#888;font-style:italic></span>        <span style=font-weight:700;text-decoration:underline>proxy_set_header</span> <span style=color:#666;font-style:italic>X-Real-IP</span> <span style=color:#666;font-weight:700;font-style:italic>$remote_addr</span>; <span style=color:#888;font-style:italic># ä¼ é€’çœŸå®å®¢æˆ·ç«¯IP
</span></span></span><span style=display:flex><span><span style=color:#888;font-style:italic></span>        <span style=font-weight:700;text-decoration:underline>proxy_set_header</span> <span style=color:#666;font-style:italic>X-Forwarded-For</span> <span style=color:#666;font-weight:700;font-style:italic>$proxy_add_x_forwarded_for</span>; <span style=color:#888;font-style:italic># ä¼ é€’å®Œæ•´çš„IPé“¾
</span></span></span><span style=display:flex><span><span style=color:#888;font-style:italic></span>
</span></span><span style=display:flex><span>        <span style=color:#888;font-style:italic># *** ä¼ é€’åŸå§‹è¯·æ±‚åè®®ï¼Œè§£å†³æ··åˆå†…å®¹é—®é¢˜ ***
</span></span></span><span style=display:flex><span><span style=color:#888;font-style:italic></span>        <span style=font-weight:700;text-decoration:underline>proxy_set_header</span> <span style=color:#666;font-style:italic>X-Forwarded-Proto</span> <span style=color:#666;font-weight:700;font-style:italic>$scheme</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#888;font-style:italic># æ¨èï¼šå¦‚æœé‡åˆ°å¤§æ–‡ä»¶ä¸Šä¼ æˆ–ä¸‹è½½é—®é¢˜ï¼Œå¯ä»¥å°è¯•å…³é—­ buffering
</span></span></span><span style=display:flex><span><span style=color:#888;font-style:italic></span>        <span style=color:#888;font-style:italic># proxy_buffering off;
</span></span></span><span style=display:flex><span><span style=color:#888;font-style:italic></span>        <span style=color:#888;font-style:italic># proxy_request_buffering off;
</span></span></span><span style=display:flex><span><span style=color:#888;font-style:italic></span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h4 class=heading id=åè®°>åè®°
<a class=anchor href=#%e5%90%8e%e8%ae%b0>#</a></h4><p>åœ¨å®‰è£…1panelä¹‹å‰æ²¡æœ‰ä½¿ç”¨è¿‡å…¶ä»–è¿ç»´é¢æ¿ï¼Œä¹Ÿä¸æ˜¯ä¸“ä¸šçš„è¿ç»´äººå‘˜ï¼Œä¸è¿‡æœ‰ä¸€ä¸ªGUIæ€»å½’æ˜¯å¥½äº‹ã€‚å¯æ˜¯è£…ä¸Šäº†ä¹‹åï¼Œå‘ç°èƒ½ç”¨ä¸Šçš„åŠŸèƒ½å¯¥å¯¥æ— å‡ ã€‚</p><p>æ¥çœ‹çœ‹1panelå®˜ç½‘ä»‹ç»ï¼š</p><blockquote><p>1Panel ä½œä¸ºä¸€æ¬¾ç°ä»£åŒ–ã€å¼€æºçš„ Linux æœåŠ¡å™¨è¿ç»´ç®¡ç†é¢æ¿ï¼Œå…¶åŠŸèƒ½æ¶µç›–äº†æœåŠ¡å™¨ç®¡ç†çš„æ–¹æ–¹é¢é¢ï¼Œå¹¶ç‰¹åˆ«å¼ºè°ƒäº†æ˜“ç”¨æ€§å’Œå¯¹æ–°æŠ€æœ¯çš„æ”¯æŒã€‚</p></blockquote><h5 class=heading id=æ ¸å¿ƒæœåŠ¡å™¨ç®¡ç†-é«˜æ•ˆç®¡ç†>æ ¸å¿ƒæœåŠ¡å™¨ç®¡ç† (é«˜æ•ˆç®¡ç†)
<a class=anchor href=#%e6%a0%b8%e5%bf%83%e6%9c%8d%e5%8a%a1%e5%99%a8%e7%ae%a1%e7%90%86-%e9%ab%98%e6%95%88%e7%ae%a1%e7%90%86>#</a></h5><blockquote><p>è¿™ä¸ªè¿˜æ˜¯å¾ˆæœ‰ç”¨çš„ï¼Œå¯ä»¥ç›´è§‚çœ‹åˆ°æœåŠ¡å™¨çš„èµ„æºä½¿ç”¨æƒ…å†µã€‚</p></blockquote><ul><li><strong>ä¸»æœºç›‘æ§</strong>: å®æ—¶ç›‘æ§æœåŠ¡å™¨çš„ CPUã€å†…å­˜ã€ç£ç›˜ I/Oã€ç½‘ç»œç­‰å„é¡¹æ€§èƒ½æŒ‡æ ‡ã€‚</li><li><strong>æ–‡ä»¶ç®¡ç†</strong>: æä¾›åœ¨çº¿æ–‡ä»¶ç®¡ç†å™¨ï¼Œæ–¹ä¾¿ç”¨æˆ·ä¸Šä¼ ã€ä¸‹è½½ã€ç¼–è¾‘ã€åˆ é™¤æœåŠ¡å™¨ä¸Šçš„æ–‡ä»¶ã€‚</li><li><strong>æ•°æ®åº“ç®¡ç†</strong>: å¯è§†åŒ–ç®¡ç† MySQLã€PostgreSQLã€MongoDB ç­‰å¤šç§æ•°æ®åº“ï¼ŒåŒ…æ‹¬åˆ›å»ºã€åˆ é™¤æ•°æ®åº“ã€ç”¨æˆ·ç®¡ç†ç­‰ã€‚</li><li><strong>å®¹å™¨ç®¡ç†</strong>: ç»Ÿä¸€ç®¡ç† Docker å®¹å™¨ï¼ŒåŒ…æ‹¬å®¹å™¨çš„å¯åŠ¨ã€åœæ­¢ã€é‡å¯ã€åˆ é™¤ã€æ—¥å¿—æŸ¥çœ‹ç­‰ã€‚</li></ul><h5 class=heading id=ç½‘ç«™ä¸åŸŸåç®¡ç†-å¿«é€Ÿå»ºç«™>ç½‘ç«™ä¸åŸŸåç®¡ç† (å¿«é€Ÿå»ºç«™)
<a class=anchor href=#%e7%bd%91%e7%ab%99%e4%b8%8e%e5%9f%9f%e5%90%8d%e7%ae%a1%e7%90%86-%e5%bf%ab%e9%80%9f%e5%bb%ba%e7%ab%99>#</a></h5><blockquote><p>å¯¹æˆ‘æ¥è¯´æ— ç”¨ï¼Œç›®å‰dockerçš„åŸºæœ¬æ“ä½œå·²ç»å¤Ÿç®€å•äº†ï¼ŒNginxé…ç½®å†™èµ·æ¥ä¹Ÿä¸å›°éš¾ã€‚</p></blockquote><ul><li><strong>ä¸€é”®å»ºç«™éƒ¨ç½²</strong>: æ·±åº¦é›†æˆ WordPressã€Halo ç­‰å¼€æºå»ºç«™è½¯ä»¶ï¼Œæ”¯æŒä¸€é”®å¿«é€Ÿéƒ¨ç½²ã€‚</li><li><strong>åŸŸåç®¡ç†ä¸é…ç½®</strong>: æ–¹ä¾¿åœ°è¿›è¡ŒåŸŸåç»‘å®šã€è§£æè®¾ç½®ã€‚</li><li><strong>SSL è¯ä¹¦ç®¡ç†</strong>: æ”¯æŒè‡ªåŠ¨ç”³è¯·å’Œé…ç½® Let&rsquo;s Encrypt ç­‰ SSL è¯ä¹¦ï¼Œå®ç° HTTPS å®‰å…¨è®¿é—®ã€‚</li><li><strong>å¤šç«™ç‚¹ç®¡ç†</strong>: æ”¯æŒåœ¨åŒä¸€æœåŠ¡å™¨ä¸Šç®¡ç†å¤šä¸ªç½‘ç«™ã€‚</li></ul><h5 class=heading id=åº”ç”¨ç”Ÿæ€ä¸å•†åº—>åº”ç”¨ç”Ÿæ€ä¸å•†åº—
<a class=anchor href=#%e5%ba%94%e7%94%a8%e7%94%9f%e6%80%81%e4%b8%8e%e5%95%86%e5%ba%97>#</a></h5><blockquote><p>åŒä¸Šï¼Œå®‰è£…åº”ç”¨ä¹Ÿä¸å›°éš¾ã€‚</p></blockquote><ul><li><strong>ç²¾é€‰å¼€æºåº”ç”¨</strong>: æä¾›ä¸€ä¸ªä¸°å¯Œçš„åº”ç”¨å•†åº—ï¼Œæ¶µç›–å„ç±»é«˜è´¨é‡çš„å¼€æºå·¥å…·å’Œåº”ç”¨è½¯ä»¶ã€‚</li><li><strong>ä¸€é”®å®‰è£…éƒ¨ç½²</strong>: ç”¨æˆ·å¯ä»¥è½»æ¾é€šè¿‡ç‚¹å‡»å®‰è£…å’Œéƒ¨ç½²è¿™äº›åº”ç”¨ã€‚</li><li><strong>è‡ªåŠ¨æ›´æ–°ç®¡ç†</strong>: æ”¯æŒå·²å®‰è£…åº”ç”¨çš„è‡ªåŠ¨æ›´æ–°ã€‚</li><li><strong>æ•°æ®å¤‡ä»½ä¸æ¢å¤</strong>: æä¾›åº”ç”¨æ•°æ®çš„ä¸€é”®å¤‡ä»½å’Œæ¢å¤åŠŸèƒ½ã€‚<ul><li><strong>åº”ç”¨å•†åº—ä¸­åŒ…å«çš„å¸¸è§åº”ç”¨ç±»åˆ«ç¤ºä¾‹</strong>:<ul><li><strong>Web æœåŠ¡å™¨</strong>: OpenResty, Nginx Proxy Manager, OpenLiteSpeed</li><li><strong>æ•°æ®åº“</strong>: MySQL, Redis, PostgreSQL, MariaDB, MongoDB, Elasticsearch, Prometheus, Microsoft SQL Server</li><li><strong>DevOps å·¥å…·</strong>: Gitea, Jenkins, ç¦…é“, Docker Registry, ShowDoc, Nexus Repository</li><li><strong>å¼€å‘å·¥å…·</strong>: phpMyAdmin, code-server (æµè§ˆå™¨ä¸­çš„ VS Code), IT-Tools, Adminer</li><li><strong>å»ºç«™ç³»ç»Ÿ</strong>: Halo, WordPress, Typecho, Flarum, Wiki.js</li><li><strong>AI / å¤§æ¨¡å‹</strong>: MaxKB (æ™ºèƒ½ä½“å¹³å°), Ollama (æœ¬åœ°å¤§æ¨¡å‹è¿è¡Œ), OpenWebUI, ChatGPT-Next-Web, LobeChat</li><li><strong>è¿è¡Œç¯å¢ƒ</strong>: PHP (5/7/8), Node.js, <strong>Java</strong>, Python, Go, .NET</li><li><strong>ä¸­é—´ä»¶</strong>: MinIO (å¯¹è±¡å­˜å‚¨), RabbitMQ (æ¶ˆæ¯é˜Ÿåˆ—), Nacos (æœåŠ¡å‘ç°), Kafka, Apache Tomcat, RocketMQ</li><li><strong>å®‰å…¨å·¥å…·</strong>: JumpServer (å ¡å’æœº), AdGuardHome (DNS å¹¿å‘Šæ‹¦æˆª), uuWAF (Web åº”ç”¨é˜²ç«å¢™), OpenVPN</li><li><strong>äº‘å­˜å‚¨</strong>: AList (å¤šå­˜å‚¨æ–‡ä»¶åˆ—è¡¨), Nextcloud, Cloudreve</li><li><strong>å¤šåª’ä½“</strong>: Jellyfin (åª’ä½“æœåŠ¡å™¨), YesPlayMusic (ç½‘æ˜“äº‘æ’­æ”¾å™¨), Navidrome (éŸ³ä¹æœåŠ¡å™¨)</li><li><strong>ä¼‘é—²æ¸¸æˆ</strong>: ä¸­æ–‡ DOS æ¸¸æˆ, Minecraft æœåŠ¡å™¨ç®¡ç† (MCSManager), å¹»å…½å¸•é²æœåŠ¡ç«¯</li><li><strong>é‚®ä»¶æœåŠ¡</strong>: Mailserver, Roundcube (Web é‚®ä»¶å®¢æˆ·ç«¯)</li><li><strong>BI (å•†ä¸šæ™ºèƒ½)</strong>: DataEase, Metabase (æ•°æ®å¯è§†åŒ–åˆ†æå·¥å…·)</li></ul></li></ul></li></ul><p>å…¶ä½™çš„ä¸€äº›åŠŸèƒ½ä¸­ï¼Œèƒ½å¸å¼•æˆ‘çš„è¿˜æœ‰è‡ªåŠ¨å¤‡ä»½åŠŸèƒ½ï¼Œæœªæ¥å¯èƒ½ä¼šç”¨åˆ°ã€‚</p><p>è¯´å®è¯ï¼Œæ— æ³•ä½¿ç”¨nginxåä»£å®ç°httpsè®¿é—®å·®ç‚¹æŠŠæˆ‘åŠé€€ï¼Œ1panelçš„å¸è½½å‘½ä»¤éƒ½å·²ç»æ•²åœ¨äº†ç»ˆç«¯ä¸­ã€‚ä¸è¿‡è¿˜æ˜¯æ›´æ–°äº†ä¸€ä¸‹nginxé…ç½®ï¼Œæ‰¾åˆ°äº†é—®é¢˜æ‰€åœ¨ï¼Œç•™ä¸‹æ¥äº†è¿™ä¸ªçœ‹èµ·æ¥å¾ˆèˆ’æœçš„é¢æ¿ã€‚å¸Œæœ›ä»¥åå¯ä»¥å‘æŒ¥æ›´å¤§çš„ä½œç”¨ã€‚</p><h3 class=heading id=å“ªå’ç›‘æ§v1>å“ªå’ç›‘æ§V1
<a class=anchor href=#%e5%93%aa%e5%90%92%e7%9b%91%e6%8e%a7v1>#</a></h3><h4 class=heading id=å®‰è£…å‰å‡†å¤‡>å®‰è£…å‰å‡†å¤‡
<a class=anchor href=#%e5%ae%89%e8%a3%85%e5%89%8d%e5%87%86%e5%a4%87>#</a></h4><h5 class=heading id=åŸŸå>åŸŸå
<a class=anchor href=#%e5%9f%9f%e5%90%8d>#</a></h5><p>ä¸€ä¸ªæ‰˜ç®¡åœ¨ã€ŒCloudflareã€çš„åŸŸåã€‚</p><ol><li><p>è§£æåˆ°ä¸€ä¸ªè‡³å°‘1c512MBçš„æœåŠ¡å™¨ä¸Šä½œä¸ºé¢æ¿ç«¯ï¼ˆåç«¯ã€ç›‘æ§ç«¯ï¼‰ã€‚</p></li><li><p>å¼€å¯ã€Œwebsocketã€å’Œã€ŒgRPCã€<figure><div class=img-container><img loading=lazy alt src=https://webp.050612.xyz/2025/07/20250720201537824.png></div></figure></p></li></ol><h4 class=heading id=å®‰è£…å“ªå’é¢æ¿ç«¯>å®‰è£…å“ªå’é¢æ¿ç«¯
<a class=anchor href=#%e5%ae%89%e8%a3%85%e5%93%aa%e5%90%92%e9%9d%a2%e6%9d%bf%e7%ab%af>#</a></h4><p>å®˜æ–¹æ‰‹å†Œï¼š<a href=https://nezha.wiki/guide/dashboard.html>å®‰è£… Dashboard | å“ªå’æœåŠ¡å™¨ç›‘æ§</a></p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>curl -L https://raw.githubusercontent.com/nezhahq/scripts/refs/heads/main/install.sh -o nezha.sh &amp;&amp; chmod +x nezha.sh &amp;&amp; sudo ./nezha.sh
</span></span></code></pre></div><p>å®‰è£…æµç¨‹ï¼šä»…éœ€è¦ç‰¹åˆ«æ³¨æ„nezha-agentåœ°å€å¡«å…¥<code>è§£æåŸŸå:443</code><figure><div class=img-container><img loading=lazy alt src=https://webp.050612.xyz/2025/07/20250720201932192.png></div></figure></p><h4 class=heading id=é…ç½®nginxåå‘ä»£ç†>é…ç½®nginxåå‘ä»£ç†
<a class=anchor href=#%e9%85%8d%e7%bd%aenginx%e5%8f%8d%e5%90%91%e4%bb%a3%e7%90%86>#</a></h4><p>ä¸€ä¸ªæ¨èçš„nginxé…ç½®</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-nginx data-lang=nginx><span style=display:flex><span><span style=color:#888;font-style:italic># ===================================================================
</span></span></span><span style=display:flex><span><span style=color:#888;font-style:italic># å“ªå’ç›‘æ§ - åç«¯æœåŠ¡è¿æ¥æ± é…ç½®
</span></span></span><span style=display:flex><span><span style=color:#888;font-style:italic># å®šä¹‰ä¸€ä¸ªåä¸º &#34;dashboard&#34; çš„åç«¯æœåŠ¡æ± ï¼Œç”¨äºè¿æ¥å¤ç”¨ï¼Œæé«˜æ€§èƒ½ã€‚
</span></span></span><span style=display:flex><span><span style=color:#888;font-style:italic># ===================================================================
</span></span></span><span style=display:flex><span><span style=color:#888;font-style:italic></span><span style=font-weight:700;text-decoration:underline>upstream</span> <span style=color:#666;font-style:italic>dashboard</span> {
</span></span><span style=display:flex><span>    <span style=font-weight:700;text-decoration:underline>server</span> 127.0.0.1:8008;
</span></span><span style=display:flex><span>    <span style=font-weight:700;text-decoration:underline>keepalive</span> 512;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#888;font-style:italic># ===================================================================
</span></span></span><span style=display:flex><span><span style=color:#888;font-style:italic># HTTP (80) åˆ° HTTPS (443) çš„æ°¸ä¹…é‡å®šå‘
</span></span></span><span style=display:flex><span><span style=color:#888;font-style:italic># è¿™æ˜¯æœ€ä½³å®‰å…¨å®è·µï¼Œç¡®ä¿æ‰€æœ‰ç”¨æˆ·éƒ½é€šè¿‡åŠ å¯†è¿æ¥è®¿é—®ã€‚
</span></span></span><span style=display:flex><span><span style=color:#888;font-style:italic># ===================================================================
</span></span></span><span style=display:flex><span><span style=color:#888;font-style:italic></span><span style=font-weight:700;text-decoration:underline>server</span> {
</span></span><span style=display:flex><span>    <span style=font-weight:700;text-decoration:underline>listen</span> 80;
</span></span><span style=display:flex><span>    <span style=font-weight:700;text-decoration:underline>listen</span> <span style=color:#666;font-style:italic>[::]:80</span>;
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#888;font-style:italic># &lt;--- ä¿®æ”¹è¿™é‡Œ: å°† dashboard.example.com æ›¿æ¢ä¸ºä½ çš„çœŸå®åŸŸå
</span></span></span><span style=display:flex><span><span style=color:#888;font-style:italic></span>    <span style=font-weight:700;text-decoration:underline>server_name</span> <span style=color:#666;font-style:italic>dashboard.example.com</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#888;font-style:italic># å°†æ‰€æœ‰åˆ°æ¥çš„ HTTP è¯·æ±‚é€šè¿‡ 301 æ°¸ä¹…é‡å®šå‘åˆ°å¯¹åº”çš„ HTTPS åœ°å€
</span></span></span><span style=display:flex><span><span style=color:#888;font-style:italic></span>    <span style=font-weight:700;text-decoration:underline>return</span> 301 <span style=color:#666;font-style:italic>https://</span><span style=color:#666;font-weight:700;font-style:italic>$host$request_uri</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#888;font-style:italic># ===================================================================
</span></span></span><span style=display:flex><span><span style=color:#888;font-style:italic># HTTPS (443) ä¸»æœåŠ¡é…ç½®
</span></span></span><span style=display:flex><span><span style=color:#888;font-style:italic># æ‰€æœ‰åŠ å¯†æµé‡çš„å…¥å£ï¼Œå¤„ç† Webã€WebSocket å’Œ gRPC è¯·æ±‚ã€‚
</span></span></span><span style=display:flex><span><span style=color:#888;font-style:italic># ===================================================================
</span></span></span><span style=display:flex><span><span style=color:#888;font-style:italic></span><span style=font-weight:700;text-decoration:underline>server</span> {
</span></span><span style=display:flex><span>    <span style=font-weight:700;text-decoration:underline>listen</span> 443 <span style=color:#666;font-style:italic>ssl</span> <span style=color:#666;font-style:italic>http2</span>;
</span></span><span style=display:flex><span>    <span style=font-weight:700;text-decoration:underline>listen</span> <span style=color:#666;font-style:italic>[::]:443</span> <span style=color:#666;font-style:italic>ssl</span> <span style=color:#666;font-style:italic>http2</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#888;font-style:italic># &lt;--- ä¿®æ”¹è¿™é‡Œ: å°† dashboard.example.com æ›¿æ¢ä¸ºä½ çš„çœŸå®åŸŸå
</span></span></span><span style=display:flex><span><span style=color:#888;font-style:italic></span>    <span style=font-weight:700;text-decoration:underline>server_name</span> <span style=color:#666;font-style:italic>dashboard.example.com</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#888;font-style:italic># --- SSL è¯ä¹¦é…ç½® ---
</span></span></span><span style=display:flex><span><span style=color:#888;font-style:italic></span>    <span style=color:#888;font-style:italic># &lt;--- ä¿®æ”¹è¿™é‡Œ: æ›¿æ¢ä¸ºä½ çš„ SSL è¯ä¹¦å’Œç§é’¥çš„å®é™…è·¯å¾„
</span></span></span><span style=display:flex><span><span style=color:#888;font-style:italic></span>    <span style=font-weight:700;text-decoration:underline>ssl_certificate</span>          <span style=color:#666;font-style:italic>/etc/letsencrypt/live/dashboard.example.com/fullchain.pem</span>;
</span></span><span style=display:flex><span>    <span style=font-weight:700;text-decoration:underline>ssl_certificate_key</span>      <span style=color:#666;font-style:italic>/etc/letsencrypt/live/dashboard.example.com/key.pem</span>;
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#888;font-style:italic># --- SSL æ€§èƒ½ä¸å®‰å…¨ä¼˜åŒ– (é€šå¸¸æ— éœ€ä¿®æ”¹) ---
</span></span></span><span style=display:flex><span><span style=color:#888;font-style:italic></span>    <span style=font-weight:700;text-decoration:underline>ssl_stapling</span> <span style=color:#666;font-weight:700;font-style:italic>on</span>;
</span></span><span style=display:flex><span>    <span style=font-weight:700;text-decoration:underline>ssl_session_timeout</span> <span style=color:#666;font-style:italic>1d</span>;
</span></span><span style=display:flex><span>    <span style=font-weight:700;text-decoration:underline>ssl_session_cache</span> <span style=color:#666;font-style:italic>shared:SSL:10m</span>;
</span></span><span style=display:flex><span>    <span style=font-weight:700;text-decoration:underline>ssl_protocols</span> <span style=color:#666;font-style:italic>TLSv1.2</span> <span style=color:#666;font-style:italic>TLSv1.3</span>;
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#888;font-style:italic># å…è®¸ Header ä¸­åŒ…å«ä¸‹åˆ’çº¿ï¼Œå…¼å®¹æŸäº›ç‰¹æ®Šæƒ…å†µ
</span></span></span><span style=display:flex><span><span style=color:#888;font-style:italic></span>    <span style=font-weight:700;text-decoration:underline>underscores_in_headers</span> <span style=color:#666;font-weight:700;font-style:italic>on</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#888;font-style:italic># --- è·å–çœŸå®è®¿å®¢ IP (Cloudflare CDN ä¸“ç”¨é…ç½®) ---
</span></span></span><span style=display:flex><span><span style=color:#888;font-style:italic></span>    <span style=color:#888;font-style:italic># å› ä¸ºä½ ä½¿ç”¨äº† Cloudflareï¼Œæ‰€ä»¥ä¿ç•™è¿™ä¸¤è¡Œé…ç½®ã€‚
</span></span></span><span style=display:flex><span><span style=color:#888;font-style:italic></span>    <span style=color:#888;font-style:italic># å®ƒå‘Šè¯‰ Nginx è¦ä¿¡ä»»æ‰€æœ‰ IP å‘æ¥çš„è¯·æ±‚å¤´ï¼Œå¹¶ä» CF-Connecting-IP å¤´ä¸­è·å–çœŸå® IPã€‚
</span></span></span><span style=display:flex><span><span style=color:#888;font-style:italic></span>    <span style=color:#888;font-style:italic># æ›´å®‰å…¨çš„åšæ³•æ˜¯ä»…ä¿¡ä»»æ¥è‡ª Cloudflare å®˜æ–¹ IP æ®µçš„è¯·æ±‚ï¼Œä½†å½“å‰é…ç½®å¯¹äºç»å¤§å¤šæ•°åœºæ™¯æ˜¯è¶³å¤Ÿä¸”æ–¹ä¾¿çš„ã€‚
</span></span></span><span style=display:flex><span><span style=color:#888;font-style:italic></span>    <span style=font-weight:700;text-decoration:underline>set_real_ip_from</span> 0.0.0.0<span style=color:#666;font-style:italic>/0</span>;
</span></span><span style=display:flex><span>    <span style=font-weight:700;text-decoration:underline>real_ip_header</span> <span style=color:#666;font-style:italic>CF-Connecting-IP</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#888;font-style:italic># --- gRPC è¯·æ±‚å¤„ç† (Agent æ ¸å¿ƒæ•°æ®ä¸ŠæŠ¥) ---
</span></span></span><span style=display:flex><span><span style=color:#888;font-style:italic></span>    <span style=font-weight:700;text-decoration:underline>location</span> <span style=color:#666;font-style:italic>^~</span> <span style=color:#666;font-style:italic>/proto.NezhaService/</span> {
</span></span><span style=display:flex><span>        <span style=font-weight:700;text-decoration:underline>grpc_pass</span> <span style=color:#666;font-style:italic>grpc://dashboard</span>; <span style=color:#888;font-style:italic># å°† gRPC è¯·æ±‚è½¬å‘ç»™åç«¯æœåŠ¡æ± 
</span></span></span><span style=display:flex><span><span style=color:#888;font-style:italic></span>        
</span></span><span style=display:flex><span>        <span style=color:#888;font-style:italic># å°†çœŸå®è®¿å®¢ IP ä¼ é€’ç»™åç«¯ (ä½¿ç”¨ Cloudflare æä¾›çš„ Header)
</span></span></span><span style=display:flex><span><span style=color:#888;font-style:italic></span>        <span style=font-weight:700;text-decoration:underline>grpc_set_header</span> <span style=color:#666;font-style:italic>nz-realip</span> <span style=color:#666;font-weight:700;font-style:italic>$http_CF_Connecting_IP</span>;
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        <span style=color:#888;font-style:italic># å…¶ä»– gRPC ç›¸å…³ä¼˜åŒ– (é€šå¸¸æ— éœ€ä¿®æ”¹)
</span></span></span><span style=display:flex><span><span style=color:#888;font-style:italic></span>        <span style=font-weight:700;text-decoration:underline>grpc_set_header</span> <span style=color:#666;font-style:italic>Host</span> <span style=color:#666;font-weight:700;font-style:italic>$host</span>;
</span></span><span style=display:flex><span>        <span style=font-weight:700;text-decoration:underline>grpc_read_timeout</span> <span style=color:#666;font-style:italic>600s</span>;
</span></span><span style=display:flex><span>        <span style=font-weight:700;text-decoration:underline>grpc_send_timeout</span> <span style=color:#666;font-style:italic>600s</span>;
</span></span><span style=display:flex><span>        <span style=font-weight:700;text-decoration:underline>grpc_socket_keepalive</span> <span style=color:#666;font-weight:700;font-style:italic>on</span>;
</span></span><span style=display:flex><span>        <span style=font-weight:700;text-decoration:underline>client_max_body_size</span> 10m;
</span></span><span style=display:flex><span>        <span style=font-weight:700;text-decoration:underline>grpc_buffer_size</span> 4m;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#888;font-style:italic># --- WebSocket è¯·æ±‚å¤„ç† (ç½‘é¡µç»ˆç«¯ã€æ–‡ä»¶ç®¡ç†ç­‰å®æ—¶åŠŸèƒ½) ---
</span></span></span><span style=display:flex><span><span style=color:#888;font-style:italic></span>    <span style=font-weight:700;text-decoration:underline>location</span> ~<span style=color:#666;font-style:italic>*</span> <span style=color:#666;font-style:italic>^/api/v1/ws/(server|terminal|file)(.*)</span>$ {
</span></span><span style=display:flex><span>        <span style=font-weight:700;text-decoration:underline>proxy_pass</span> <span style=color:#666;font-style:italic>http://127.0.0.1:8008</span>; <span style=color:#888;font-style:italic># ç›´æ¥è½¬å‘ç»™åç«¯çš„ 8008 ç«¯å£
</span></span></span><span style=display:flex><span><span style=color:#888;font-style:italic></span>        
</span></span><span style=display:flex><span>        <span style=color:#888;font-style:italic># --- WebSocket ä»£ç†å…³é”®é…ç½® ---
</span></span></span><span style=display:flex><span><span style=color:#888;font-style:italic></span>        <span style=font-weight:700;text-decoration:underline>proxy_http_version</span> 1<span style=color:#666;font-style:italic>.1</span>;
</span></span><span style=display:flex><span>        <span style=font-weight:700;text-decoration:underline>proxy_set_header</span> <span style=color:#666;font-style:italic>Upgrade</span> <span style=color:#666;font-weight:700;font-style:italic>$http_upgrade</span>;
</span></span><span style=display:flex><span>        <span style=font-weight:700;text-decoration:underline>proxy_set_header</span> <span style=color:#666;font-style:italic>Connection</span> <span style=color:#666;font-style:italic>&#34;upgrade&#34;</span>;
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        <span style=color:#888;font-style:italic># å°†çœŸå®è®¿å®¢ IP ä¼ é€’ç»™åç«¯ (ä½¿ç”¨ Cloudflare æä¾›çš„ Header)
</span></span></span><span style=display:flex><span><span style=color:#888;font-style:italic></span>        <span style=font-weight:700;text-decoration:underline>proxy_set_header</span> <span style=color:#666;font-style:italic>nz-realip</span> <span style=color:#666;font-weight:700;font-style:italic>$http_CF_Connecting_IP</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#888;font-style:italic># å…¶ä»– Header å’Œè¶…æ—¶é…ç½® (é€šå¸¸æ— éœ€ä¿®æ”¹)
</span></span></span><span style=display:flex><span><span style=color:#888;font-style:italic></span>        <span style=font-weight:700;text-decoration:underline>proxy_set_header</span> <span style=color:#666;font-style:italic>Host</span> <span style=color:#666;font-weight:700;font-style:italic>$host</span>;
</span></span><span style=display:flex><span>        <span style=font-weight:700;text-decoration:underline>proxy_set_header</span> <span style=color:#666;font-style:italic>Origin</span> <span style=color:#666;font-style:italic>https://</span><span style=color:#666;font-weight:700;font-style:italic>$host</span>;
</span></span><span style=display:flex><span>        <span style=font-weight:700;text-decoration:underline>proxy_read_timeout</span> <span style=color:#666;font-style:italic>3600s</span>;
</span></span><span style=display:flex><span>        <span style=font-weight:700;text-decoration:underline>proxy_send_timeout</span> <span style=color:#666;font-style:italic>3600s</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#888;font-style:italic># --- Web é¡µé¢è¯·æ±‚å¤„ç† (å…œåº•è§„åˆ™) ---
</span></span></span><span style=display:flex><span><span style=color:#888;font-style:italic></span>    <span style=font-weight:700;text-decoration:underline>location</span> <span style=color:#666;font-style:italic>/</span> {
</span></span><span style=display:flex><span>        <span style=font-weight:700;text-decoration:underline>proxy_pass</span> <span style=color:#666;font-style:italic>http://127.0.0.1:8008</span>; <span style=color:#888;font-style:italic># è½¬å‘ç»™åç«¯çš„ 8008 ç«¯å£
</span></span></span><span style=display:flex><span><span style=color:#888;font-style:italic></span>
</span></span><span style=display:flex><span>        <span style=color:#888;font-style:italic># å°†çœŸå®è®¿å®¢ IP ä¼ é€’ç»™åç«¯ (ä½¿ç”¨ Cloudflare æä¾›çš„ Header)
</span></span></span><span style=display:flex><span><span style=color:#888;font-style:italic></span>        <span style=font-weight:700;text-decoration:underline>proxy_set_header</span> <span style=color:#666;font-style:italic>nz-realip</span> <span style=color:#666;font-weight:700;font-style:italic>$http_CF_Connecting_IP</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#888;font-style:italic># å…¶ä»– Header å’Œè¶…æ—¶é…ç½® (é€šå¸¸æ— éœ€ä¿®æ”¹)
</span></span></span><span style=display:flex><span><span style=color:#888;font-style:italic></span>        <span style=font-weight:700;text-decoration:underline>proxy_set_header</span> <span style=color:#666;font-style:italic>Host</span> <span style=color:#666;font-weight:700;font-style:italic>$host</span>;
</span></span><span style=display:flex><span>        <span style=font-weight:700;text-decoration:underline>proxy_read_timeout</span> <span style=color:#666;font-style:italic>3600s</span>;
</span></span><span style=display:flex><span>        <span style=font-weight:700;text-decoration:underline>proxy_send_timeout</span> <span style=color:#666;font-style:italic>3600s</span>;
</span></span><span style=display:flex><span>        <span style=font-weight:700;text-decoration:underline>proxy_buffer_size</span> 128k;
</span></span><span style=display:flex><span>        <span style=font-weight:700;text-decoration:underline>proxy_buffers</span> 4 256k;
</span></span><span style=display:flex><span>        <span style=font-weight:700;text-decoration:underline>proxy_busy_buffers_size</span> 256k;
</span></span><span style=display:flex><span>        <span style=font-weight:700;text-decoration:underline>proxy_max_temp_file_size</span> 0;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h4 class=heading id=å“ªå’é¢æ¿è®¾ç½®>å“ªå’é¢æ¿è®¾ç½®
<a class=anchor href=#%e5%93%aa%e5%90%92%e9%9d%a2%e6%9d%bf%e8%ae%be%e7%bd%ae>#</a></h4><p>åˆ°äº†è¿™ä¸€æ­¥ï¼Œæ­¤æ—¶å°±å¯ä»¥é€šè¿‡åŸŸåè®¿é—®é¢æ¿äº†ï¼Œå¹¶ä¸”å¹¶æ²¡æœ‰æš´éœ²å¤šä½™çš„ç«¯å£ã€‚</p><ul><li>é¦–æ¬¡ç™»å½•ç”¨æˆ·ä¸å¯†ç å‡ä¸º<code>admin</code>,ç¬¬ä¸€æ­¥å…ˆæ”¹ä¸ªé»˜è®¤å¯†ç å†è¯´ã€‚</li><li>å› ä¸ºé¢æ¿å’Œ agent éƒ½å¼€å¯äº† CF CDNï¼Œæˆ‘ä»¬éœ€è¦åœ¨é¢æ¿ç³»ç»Ÿè®¾ç½®é‡Œé¢çš„çœŸå® IP è¯·æ±‚å¤´å¡«å†™<code>CF-Connecting-IP</code>ï¼Œåå°çš„ç™»å½• IP ä»¥åŠå…¶å®ƒåœ°æ–¹æ‰èƒ½æ­£å¸¸æ˜¾ç¤ºçœŸå® IPã€‚<figure><div class=img-container><img loading=lazy alt src=https://webp.050612.xyz/2025/07/20250720202751842.png></div></figure></li></ul><h5 class=heading id=é¢æ¿å¼€å¯oauth2>é¢æ¿å¼€å¯OAuth2
<a class=anchor href=#%e9%9d%a2%e6%9d%bf%e5%bc%80%e5%90%afoauth2>#</a></h5><p>å®˜æ–¹è¯´æ˜ï¼š<a href=https://nezha.wiki/guide/q14.html#%E8%AE%BE%E7%BD%AE-oauth-2-0-%E7%BB%91%E5%AE%9A>è®¾ç½® OAuth 2.0 ç»‘å®š | å“ªå’æœåŠ¡å™¨ç›‘æ§</a></p><p>æˆ‘é€‰æ‹©ä½¿ç”¨ã€Œgithubã€</p><ol><li>æ‰“å¼€Â <a href=https://github.com/settings/developers>GitHubå¼€å‘è€…è®¾ç½®</a>ï¼Œä¾æ¬¡é€‰æ‹© â€œOAuth Appsâ€ - â€œNew OAuth Appâ€ã€‚</li><li>å¡«å†™ä»¥ä¸‹éœ€è¦çš„å­—æ®µï¼š</li></ol><ul><li><code>Application name</code>ï¼šåº”ç”¨å</li><li><code>Homepage URL</code>ï¼šé¢æ¿è®¿é—®åœ°å€ï¼Œä¾‹å¦‚Â <code>https://nezha.example.com</code></li><li><code>Authorization callback URL</code>Â é¢æ¿çš„ Callback åœ°å€ï¼Œè¿™é‡Œåªæ£€æµ‹å‰ç¼€ï¼Œæ‰€ä»¥å¯ä»¥å¡«å†™Â <code>https://nezha.example.com/api/v1/oauth2/callback</code>ã€‚<figure><div class=img-container><img loading=lazy alt src=https://webp.050612.xyz/2025/07/20250720203459271.png></div></figure></li></ul><ol start=3><li>åœ¨æ–°é¡µé¢ä¸­è®°å½• Client ID å’Œ Client secretsï¼Œå®Œæˆé¢æ¿ OAuth 2.0 é…ç½®ï¼š</li></ol><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>oauth2:
</span></span><span style=display:flex><span>  GitHub:
</span></span><span style=display:flex><span>    client_id: <span style=color:#666;font-style:italic>&#34;a-unique-id&#34;</span> <span style=color:#888;font-style:italic># æ›¿æ¢ä½ çš„ Client ID</span>
</span></span><span style=display:flex><span>    client_secret: <span style=color:#666;font-style:italic>&#34;a-unique-secret&#34;</span> <span style=color:#888;font-style:italic># æ›¿æ¢ä½ çš„ Client secrets</span>
</span></span><span style=display:flex><span>    endpoint:
</span></span><span style=display:flex><span>      auth_url: <span style=color:#666;font-style:italic>&#34;https://github.com/login/oauth/authorize&#34;</span>
</span></span><span style=display:flex><span>      token_url: <span style=color:#666;font-style:italic>&#34;https://github.com/login/oauth/access_token&#34;</span>
</span></span><span style=display:flex><span>    user_info_url: <span style=color:#666;font-style:italic>&#34;https://api.github.com/user&#34;</span>
</span></span><span style=display:flex><span>    user_id_path: <span style=color:#666;font-style:italic>&#34;id&#34;</span>
</span></span></code></pre></div><ol start=4><li>å°†ä»¥ä¸Šé…ç½®æ·»åŠ åˆ°<code>/opt/nezha/dashboard/data/config.yaml</code>é¢æ¿ï¼ˆDashboardï¼‰ é…ç½®</li></ol><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo vim /opt/nezha/dashboard/data/config.yaml
</span></span></code></pre></div><ol start=5><li>é‡å¯é¢æ¿ä½¿æ–°é…ç½®ç”Ÿæ•ˆ</li></ol><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>./nezha.sh 
</span></span></code></pre></div><ol start=6><li>æ‰“å¼€ä¸ªäººä¿¡æ¯è®¾ç½®ç»‘å®šgithubï¼Œå¹¶å…³é—­å¯†ç ç™»å½•<figure><div class=img-container><img loading=lazy alt src=https://webp.050612.xyz/2025/07/20250720204140554.png></div></figure></li></ol><h4 class=heading id=å®‰è£…æ¢é’ˆagentç«¯æœåŠ¡ç«¯>å®‰è£…æ¢é’ˆï¼ˆagentç«¯ã€æœåŠ¡ç«¯ï¼‰
<a class=anchor href=#%e5%ae%89%e8%a3%85%e6%8e%a2%e9%92%88agent%e7%ab%af%e6%9c%8d%e5%8a%a1%e7%ab%af>#</a></h4><p>å®˜æ–¹æ•™ç¨‹ï¼š<a href=https://nezha.wiki/guide/agent.html>å®‰è£… Agent | å“ªå’æœåŠ¡å™¨ç›‘æ§</a></p><ol><li>åœ¨Â <code>æœåŠ¡å™¨</code>Â é¡µé¢ä¸­ï¼Œç‚¹å‡»Â <code>å®‰è£…å‘½ä»¤</code>Â å¹¶é€‰æ‹©å¯¹åº”æ“ä½œç³»ç»Ÿï¼Œå®‰è£…å‘½ä»¤å°†è‡ªåŠ¨å¤åˆ¶åˆ°ä½ çš„å‰ªè´´æ¿ã€‚</li><li>åœ¨è¢«æ§ç«¯æœåŠ¡å™¨ä¸­è¿è¡Œå®‰è£…å‘½ä»¤ï¼Œç­‰å¾…å®‰è£…å®Œæˆåè¿”å›åˆ°Â <code>æœåŠ¡å™¨</code>Â é¡µé¢æŸ¥çœ‹æ˜¯å¦ä¸Šçº¿ã€‚</li></ol><h5 class=heading id=å…³é—­-æ¢é’ˆè¿œç¨‹æ§åˆ¶åŠŸèƒ½>å…³é—­ æ¢é’ˆè¿œç¨‹æ§åˆ¶åŠŸèƒ½
<a class=anchor href=#%e5%85%b3%e9%97%ad-%e6%8e%a2%e9%92%88%e8%bf%9c%e7%a8%8b%e6%8e%a7%e5%88%b6%e5%8a%9f%e8%83%bd>#</a></h5><ul><li>æ‰“å¼€<code>/opt/nezha/agent/config.yml</code>ï¼ŒæŠŠ <code>disable_command_execute</code>æ”¹æˆtrue</li></ul><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo vim  /opt/nezha/agent/config.yml
</span></span></code></pre></div><h2 class=heading id=å…³é—­-ipv6--å¼€å¯bbr>å…³é—­ ipv6 & å¼€å¯bbr
<a class=anchor href=#%e5%85%b3%e9%97%ad-ipv6--%e5%bc%80%e5%90%afbbr>#</a></h2><p>æˆ‘çš„ç½‘ç»œç¯å¢ƒä¸ºæ ¡å›­ç½‘ï¼Œå¯¹ipv6çš„æ”¯æŒå¹¶ä¸å¥½ï¼›</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=font-weight:700;font-style:italic>echo</span> <span style=color:#666;font-style:italic>&#34;net.core.default_qdisc=fq&#34;</span> &gt;&gt; /etc/sysctl.conf
</span></span><span style=display:flex><span><span style=font-weight:700;font-style:italic>echo</span> <span style=color:#666;font-style:italic>&#34;net.ipv4.tcp_congestion_control=bbr&#34;</span> &gt;&gt; /etc/sysctl.conf
</span></span><span style=display:flex><span>sysctl -p
</span></span><span style=display:flex><span>lsmod | grep bbr <span style=color:#888;font-style:italic># æŸ¥çœ‹æ˜¯å¦æˆåŠŸå¼€å¯BBR</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#888;font-style:italic># 1. å°†é…ç½®æ·»åŠ åˆ° /etc/sysctl.conf (ä½¿ç”¨ tee -a ç¡®ä¿å®‰å…¨è¿½åŠ )</span>
</span></span><span style=display:flex><span><span style=font-weight:700;font-style:italic>echo</span> <span style=color:#666;font-style:italic>&#34;net.ipv6.conf.all.disable_ipv6 = 1&#34;</span> | sudo tee -a /etc/sysctl.conf
</span></span><span style=display:flex><span><span style=font-weight:700;font-style:italic>echo</span> <span style=color:#666;font-style:italic>&#34;net.ipv6.conf.default.disable_ipv6 = 1&#34;</span> | sudo tee -a /etc/sysctl.conf
</span></span><span style=display:flex><span><span style=font-weight:700;font-style:italic>echo</span> <span style=color:#666;font-style:italic>&#34;net.ipv6.conf.lo.disable_ipv6 = 1&#34;</span> | sudo tee -a /etc/sysctl.conf
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#888;font-style:italic># 2. ä½¿é…ç½®ç«‹å³ç”Ÿæ•ˆ (å¹¶åŠ è½½æ‰€æœ‰ /etc/sysctl.conf ä¸­çš„é…ç½®)</span>
</span></span><span style=display:flex><span>sudo sysctl -p
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#888;font-style:italic># 3. (å¯é€‰) é‡å¯ç³»ç»Ÿä»¥ç¡®ä¿æ‰€æœ‰æœåŠ¡éƒ½ä»¥æ–°é…ç½®å¯åŠ¨</span>
</span></span><span style=display:flex><span><span style=color:#888;font-style:italic># sudo reboot</span>
</span></span></code></pre></div></div></article><div class=single-comments><script src=https://giscus.app/client.js data-repo=eaiu/eaiu.github.io data-repo-id=R_kgDOPMv-Yw data-category data-category-id=DIC_kwDOPMv-Y84CtAeO data-mapping=pathname data-strict=0 data-reactions-enabled=1 data-emit-metadata=0 data-input-position=top data-theme=preferred_color_scheme data-lang=en data-loading=lazy crossorigin=anonymous async></script></div><div class=single-pagination><hr><div class=flexnowrap><div class=single-pagination-prev><div class=single-pagination-container-prev><div class=single-pagination-text>â†</div><div class=single-pagination-text><a href=/post/%E8%AE%BA%E5%9C%A8%E7%BD%91%E5%90%A7%E7%99%BB%E5%BD%95-steam-%E7%9A%84%E6%AD%A3%E7%A1%AE%E5%A7%BF%E5%8A%BF/>è®ºåœ¨ç½‘å§ç™»å½• Steam çš„æ­£ç¡®å§¿åŠ¿</a></div></div></div><div class=single-pagination-next></div></div><hr></div><div class=back-to-top><a href=#top>back to top</a></div></div></main></div><footer><p>All content licensed under <a href=https://creativecommons.org/licenses/by-sa/4.0/>CC BY-SA 4.0</a> unless otherwise stated. Copyright Â© 2025 ghung<br>Powered by <a href=https://gohugo.io/>Hugo</a> and <a href=https://github.com/tomfran/typo>tomfran/typo</a></p></footer><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.css><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.js></script><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/contrib/auto-render.min.js onload=renderMathInElement(document.body)></script><script>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1}]})})</script></body><script src=/js/theme-switch.js></script><script defer src=/js/copy-code.js></script></html>