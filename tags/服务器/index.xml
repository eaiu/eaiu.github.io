<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>æœåŠ¡å™¨ on G-Hungçš„åšå®¢</title><link>https://blog.yzyy.de/tags/%E6%9C%8D%E5%8A%A1%E5%99%A8/</link><description>Recent content in æœåŠ¡å™¨ on G-Hungçš„åšå®¢</description><generator>Hugo</generator><language>zh-cn</language><lastBuildDate>Mon, 28 Jul 2025 00:00:00 +0000</lastBuildDate><atom:link href="https://blog.yzyy.de/tags/%E6%9C%8D%E5%8A%A1%E5%99%A8/index.xml" rel="self" type="application/rss+xml"/><item><title>å¦‚ä½•è®©ä¸¤ä¸ª docker-compose é¡¹ç›®ä¸­çš„å®¹å™¨äº’ç›¸é€šä¿¡</title><link>https://blog.yzyy.de/post/%E5%A6%82%E4%BD%95%E8%AE%A9%E4%B8%A4%E4%B8%AA-docker-compose-%E9%A1%B9%E7%9B%AE%E4%B8%AD%E7%9A%84%E5%AE%B9%E5%99%A8%E4%BA%92%E7%9B%B8%E9%80%9A%E4%BF%A1/</link><pubDate>Mon, 28 Jul 2025 00:00:00 +0000</pubDate><guid>https://blog.yzyy.de/post/%E5%A6%82%E4%BD%95%E8%AE%A9%E4%B8%A4%E4%B8%AA-docker-compose-%E9%A1%B9%E7%9B%AE%E4%B8%AD%E7%9A%84%E5%AE%B9%E5%99%A8%E4%BA%92%E7%9B%B8%E9%80%9A%E4%BF%A1/</guid><description>&lt;p&gt;ç”±äºéƒ¨ç½²äº†å¾ˆå¤šä¸­è½¬ä»£ç†æœåŠ¡ä»¥åŠå„ç§å®¢æˆ·ç«¯ï¼Œå¸¸å¸¸ä¼šé‡åˆ°å¤šä¸ªdockerå®¹å™¨é—´é€šä¿¡çš„é—®é¢˜ã€‚ä¾‹å¦‚ï¼Œä¸ºäº†è§£å†³New-APIä»¥åŠOpenWebUIä¸¤ä¸ªå®¹å™¨é—´çš„é€šä¿¡ï¼Œå‡å°‘APIæ—¶å»¶ï¼Œä¹‹å‰éƒ½æ˜¯é‡‡ç”¨æ”¾åœ¨åŒä¸€ä¸ªdocker-composeä¸­ç®¡ç†ï¼Œåœ¨å†…éƒ¨åˆ›å»ºä¸€ä¸ªç½‘ç»œå¹¶æ¥å…¥ã€‚&lt;/p&gt;
&lt;p&gt;è¿™æ ·ä¹Ÿå¯ä»¥å®ç°ä½¿ç”¨&lt;code&gt;http://newapi:3000/v1&lt;/code&gt;çš„ä¼˜é›…æ–¹å¼è®¿é—®ã€‚&lt;/p&gt;
&lt;p&gt;éšç€docker-composeæ–‡ä»¶çš„è¶Šæ¥è¶Šé•¿ï¼Œç»´æŠ¤éš¾åº¦è¶Šæ¥è¶Šé«˜ï¼Œè¶Šæ¥è¶Šåƒä¸€ä¸ªå¤§æ‚çƒ©ã€‚æˆ‘åˆå­¦ä¹ äº†å¦å¤–ä¸€ç§åˆ›å»ºå¤–éƒ¨ç½‘ç»œçš„æ–¹å¼ã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;æ€è·¯æ˜¯ï¼šæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªç‹¬ç«‹äºä»»ä½• docker-compose æ–‡ä»¶çš„å…±äº«ç½‘ç»œï¼Œç„¶åè®©ä¸¤ä¸ªä¸åŒçš„ docker-compose é¡¹ç›®éƒ½è¿æ¥åˆ°è¿™ä¸ªç½‘ç»œä¸Šã€‚&lt;/p&gt;
&lt;h2 class="heading" id="åˆ›å»ºå…±äº«ç½‘ç»œ"&gt;
 åˆ›å»ºå…±äº«ç½‘ç»œ
 &lt;a class="anchor" href="#%e5%88%9b%e5%bb%ba%e5%85%b1%e4%ba%ab%e7%bd%91%e7%bb%9c"&gt;#&lt;/a&gt;
&lt;/h2&gt;
&lt;p&gt;è¿è¡Œä»¥ä¸‹å‘½ä»¤æ¥åˆ›å»ºä¸€ä¸ªæ–°çš„æ¡¥æ¥ç½‘ç»œã€‚æˆ‘ä»¬å°±å«å®ƒ shared-netã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;docker network create shared-net
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¿™ä¸ªç½‘ç»œç°åœ¨ç‹¬ç«‹å­˜åœ¨ï¼Œä¸å—ä»»ä½• docker-compose æ–‡ä»¶çš„ up æˆ– down å‘½ä»¤å½±å“ã€‚&lt;/p&gt;
&lt;h2 class="heading" id="ä¿®æ”¹ä¸åŒå®¹å™¨æ‰€åœ¨çš„-docker-composeyml"&gt;
 ä¿®æ”¹ä¸åŒå®¹å™¨æ‰€åœ¨çš„ docker-compose.yml
 &lt;a class="anchor" href="#%e4%bf%ae%e6%94%b9%e4%b8%8d%e5%90%8c%e5%ae%b9%e5%99%a8%e6%89%80%e5%9c%a8%e7%9a%84-docker-composeyml"&gt;#&lt;/a&gt;
&lt;/h2&gt;
&lt;p&gt;ç¼–è¾‘å®¹å™¨çš„ docker-compose.yml æ–‡ä»¶ï¼Œè®©å®ƒè¿æ¥åˆ°æˆ‘ä»¬åˆšåˆšåˆ›å»ºçš„ shared-netã€‚&lt;/p&gt;
&lt;p&gt;åªéœ€è¦ç¼–è¾‘ä¸¤ä¸ªåœ°æ–¹ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-yml" data-lang="yml"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#888;font-style:italic"&gt;# ä¾‹å¦‚åœ¨ new-api é¡¹ç›®çš„ docker-compose.yml æ–‡ä»¶ä¸­&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;services:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; new-api:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#888;font-style:italic"&gt;# ... (å®ƒæ‰€æœ‰ç°æœ‰çš„é…ç½®éƒ½ä¿æŒä¸å˜) ...&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; networks: &lt;span style="color:#888;font-style:italic"&gt;# 1.ç»™ new-api æœåŠ¡æ·»åŠ è¿™ä¸ª networks å—&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; - some-other-network &lt;span style="color:#888;font-style:italic"&gt;# å®ƒå¯èƒ½å·²ç»è¿æ¥äº†å…¶ä»–ç½‘ç»œï¼Œä¿ç•™å®ƒä»¬&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; - shared-net &lt;span style="color:#888;font-style:italic"&gt;# é¢å¤–è¿æ¥åˆ°æˆ‘ä»¬çš„å…±äº«ç½‘ç»œ&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#888;font-style:italic"&gt;# 2. åœ¨æ–‡ä»¶æœ«å°¾å£°æ˜è¿™ä¸ªç½‘ç»œæ˜¯å¤–éƒ¨çš„&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;networks:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; some-other-network:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#888;font-style:italic"&gt;# ...&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; shared-net:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; external: &lt;span style="font-weight:bold;text-decoration:underline"&gt;true&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;
&lt;p&gt;ä¹‹åï¼Œé‡å¯å®¹å™¨ã€‚&lt;/p&gt;
&lt;p&gt;ç°åœ¨ï¼Œå› ä¸ºä¸åŒå®¹å™¨éƒ½åœ¨ shared-net è¿™ä¸ªç½‘ç»œé‡Œï¼Œå®ƒä»¬å¯ä»¥é€šè¿‡å®¹å™¨åç›´æ¥é€šä¿¡ã€‚è¦è®¿é—® ã€Œnew-apiã€ ï¼Œåœ°å€åº”è¯¥å¡«å†™ï¼š&lt;code&gt;http://new-api:3000&lt;/code&gt;ã€‚&lt;/p&gt;</description></item><item><title>æ–°è´­ä¸€å°8GBçš„VDSä¸æ¬å®¶</title><link>https://blog.yzyy.de/post/%E6%96%B0%E8%B4%AD%E4%B8%80%E5%8F%B08gb%E7%9A%84vds/</link><pubDate>Thu, 17 Jul 2025 00:00:00 +0000</pubDate><guid>https://blog.yzyy.de/post/%E6%96%B0%E8%B4%AD%E4%B8%80%E5%8F%B08gb%E7%9A%84vds/</guid><description>&lt;p&gt;åœ¨7æœˆ8æ—¥ï¼Œäººç§°â€œå°é˜¿é‡Œâ€çš„äº‘æœåŠ¡å™¨æä¾›å•†ã€ŒClawCloudã€å®£å¸ƒä¸‹çº¿æ”¯æŒä¸­å›½ä¼˜åŒ–çº¿è·¯çš„é¦™æ¸¯æœåŠ¡å™¨ã€‚è¿™ä¸ªå…¬å‘Šä¸­è¿˜æåˆ°äº†ä¸‰ä¸ªèµ”å¿æ–¹æ¡ˆï¼Œå…¶ä¸­ä¸¤ä¸ªä¸ºä¸åŒçš„é€€æ¬¾æ–¹æ¡ˆï¼Œè¿™é‡Œé‡ç‚¹å…³æ³¨æ–¹æ¡ˆäºŒï¼šå¯ä»¥å…è´¹è¿ç§»åˆ°æ–°åŠ å¡æˆ–æ—¥æœ¬èŠ‚ç‚¹ï¼Œå¹¶ä¸”**åŸæœ¬æœºå™¨çš„å†…å­˜å®¹é‡è¿˜ä¼šç›´æ¥ç¿»å€ã€‚&lt;/p&gt;
&lt;p&gt;è¿™å°±å¯¼è‡´äº†å¸‚åœºä¸Šå‡ºç°äº†2æ ¸8GBçš„çº¿è·¯è‰¯å¥½çš„æ–°åŠ å¡\æ—¥æœ¬æœºå™¨ï¼Œå¹¶ä¸”ä»·æ ¼ä¸º4$/mï¼Œæœ‰æ²¡æœ‰å¾ˆå¿ƒåŠ¨ï¼Œæˆ‘åæ­£æ˜¯å¿ƒåŠ¨äº†ã€‚&lt;/p&gt;
&lt;p&gt;å›æƒ³èµ·é‚£å¤œè¿œç¨‹å¼€å‘ä½¿ç”¨claude codeå†…å­˜çˆ†ç‚¸ï¼Œç‹¼ç‹ˆé‡å¯ã€‚é‚£å¤œä¸ºäº†å®‰è£…OpenWebUIï¼Œä¸€å£æ°”å¼€äº†2gçš„swapã€‚ç•ç•ç¼©ç¼©ä¸æ•¢ä½¿ç”¨åŠ¨æ€åšå®¢ã€ä¸æ•¢ä½¿ç”¨1panelç­‰è¿ç»´é¢æ¿ã€‚æ€•äº†çœŸæ€•äº†ï¼ŒğŸ˜­ç‹¼ç‹ˆçš„æˆ‘å«æ³ªæº¢ä»·ä¸€ç™¾å—æ”¶ä¸‹ä¸€å°æœºå™¨ï¼Œåªå¸Œæœ›èƒ½ç”¨çš„é•¿ä¹…å§ã€‚&lt;/p&gt;
&lt;p&gt;ä»¥ä¸‹è®°å½•ä¸€ä¸‹æˆ‘æ‹¿åˆ°ä¸€å°æ–°æœºå™¨ä¼šåšä»€ä¹ˆä»¥åŠè¿ç§»è¿‡ç¨‹ã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;h2 class="heading" id="å®‰å…¨"&gt;
 å®‰å…¨
 &lt;a class="anchor" href="#%e5%ae%89%e5%85%a8"&gt;#&lt;/a&gt;
&lt;/h2&gt;
&lt;p&gt;æœ€é‡è¦çš„å½“ç„¶æ˜¯å®‰å…¨ï¼Œä¹‹å‰å·²ç»ç»™å‡ºäº†æœåŠ¡å™¨çš„å®‰å…¨è®ºï¼Œè¯·çœ‹&lt;a href="https://blog.yzyy.de/explore/%E6%9C%8D%E5%8A%A1%E5%99%A8/vps%E5%9F%BA%E6%9C%AC%E5%AE%89%E5%85%A8%E6%8E%AA%E6%96%BD/"&gt;VPSåŸºç¡€å®‰å…¨é…ç½®å®è·µæŒ‡å—&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;h2 class="heading" id="å®‰è£…docker"&gt;
 å®‰è£…docker
 &lt;a class="anchor" href="#%e5%ae%89%e8%a3%85docker"&gt;#&lt;/a&gt;
&lt;/h2&gt;
&lt;p&gt;å› ä¸ºå¤šæ•°æœåŠ¡æ˜¯è¿è¡Œåœ¨dockerä¸Šçš„ï¼Œå®‰è£…docker &amp;amp; docker composeæ˜¯å¿…ä¸å¯å°‘çš„ã€‚&lt;/p&gt;
&lt;h2 class="heading" id="sslè¯ä¹¦"&gt;
 SSLè¯ä¹¦
 &lt;a class="anchor" href="#ssl%e8%af%81%e4%b9%a6"&gt;#&lt;/a&gt;
&lt;/h2&gt;
&lt;p&gt;ä¸æ˜¯ç®€å•åœ°è¿ç§»å·²æœ‰è¯ä¹¦å°±è¡Œäº†ï¼Œè¿˜è¦è¿ç§»é…ç½®å¥½çš„è‡ªåŠ¨ç»­ç­¾æœåŠ¡ï¼Œç»è¿‡æŸ¥çœ‹åœ¨ä¸€å°æœºå™¨ä¸Šæœ‰å››ä¸ªåŸŸåçš„è‡ªåŠ¨ç»­ç­¾æœåŠ¡ï¼Œä½†æ˜¯æˆ‘å‡†å¤‡ç˜¦èº«ä¸€ä¸‹ï¼Œæœ‰äº›åŸŸåå¿«åˆ°æœŸäº†ã€‚












&lt;figure class=""&gt;

 &lt;div class="img-container" &gt;
 &lt;img loading="lazy" alt="" src="https://webp.050612.xyz/2025/07/certificates.png" &gt;
 &lt;/div&gt;

 
&lt;/figure&gt;
&lt;/p&gt;
&lt;h3 class="heading" id="è‡ªåŠ¨ç»­ç­¾æ”¹è¿›åçš„æ–¹æ¡ˆ"&gt;
 è‡ªåŠ¨ç»­ç­¾æ”¹è¿›åçš„æ–¹æ¡ˆ
 &lt;a class="anchor" href="#%e8%87%aa%e5%8a%a8%e7%bb%ad%e7%ad%be%e6%94%b9%e8%bf%9b%e5%90%8e%e7%9a%84%e6%96%b9%e6%a1%88"&gt;#&lt;/a&gt;
&lt;/h3&gt;
&lt;p&gt;å‘ç°ä¹‹å‰çš„å¤šä¸ªåŸŸåçš„è‡ªåŠ¨ç»­ç­¾ç®¡ç†ååˆ†ç¹çï¼Œä¸AIäº¤æµåè·å¾—äº†ä¸€ä¸ªæ›´ä¸ºç®€æ´çš„å¯è¡Œçš„æ–¹æ¡ˆï¼Œç®€åŒ–äº†æ“ä½œä¸é…ç½®ã€‚&lt;/p&gt;
&lt;h4 class="heading" id="cloudflare-api"&gt;
 Cloudflare API
 &lt;a class="anchor" href="#cloudflare-api"&gt;#&lt;/a&gt;
&lt;/h4&gt;
&lt;p&gt;ä½¿ç”¨ Cloudflare DNS æ¨¡å¼éœ€è¦å‡†å¤‡:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Account ID&lt;/li&gt;
&lt;li&gt;API Token&lt;/li&gt;
&lt;/ul&gt;
&lt;h5 class="heading" id="è·å–-account-id"&gt;
 è·å– Account ID
 &lt;a class="anchor" href="#%e8%8e%b7%e5%8f%96-account-id"&gt;#&lt;/a&gt;
&lt;/h5&gt;
&lt;p&gt;è¿™ä¸¤ç§ ID ç›´æ¥åœ¨ Overview é¡µå°±èƒ½æ‰¾åˆ°ã€‚&lt;/p&gt;
&lt;p&gt;











&lt;figure class=""&gt;

 &lt;div class="img-container" &gt;
 &lt;img loading="lazy" alt="cloudflare_account_id" src="https://webp.050612.xyz/2025/07/cloudflare_account_id.png" &gt;
 &lt;/div&gt;

 
&lt;/figure&gt;
&lt;/p&gt;
&lt;h5 class="heading" id="è·å–-api-token"&gt;
 è·å– API Token
 &lt;a class="anchor" href="#%e8%8e%b7%e5%8f%96-api-token"&gt;#&lt;/a&gt;
&lt;/h5&gt;
&lt;p&gt;Overview é¡µç‚¹å‡» &lt;code&gt;è·å–æ‚¨çš„ API ä»¤ç‰Œ&lt;/code&gt; è¿›å…¥ API Tokens é¡µã€‚&lt;/p&gt;
&lt;p&gt;ç‚¹å‡» API Tokens é¡¹æ—è¾¹ &lt;code&gt;åˆ›å»ºä»¤ç‰Œ&lt;/code&gt; æŒ‰é’®ï¼Œæ¥ç€é€‰æ‹© &lt;code&gt;ç¼–è¾‘åŒºåŸŸ DNS&lt;/code&gt; çš„æ¨¡æ¿ï¼Œç‚¹å‡» &lt;code&gt;ä½¿ç”¨æ¨¡æ¿&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;











&lt;figure class=""&gt;

 &lt;div class="img-container" &gt;
 &lt;img loading="lazy" alt="image" src="https://webp.050612.xyz/2025/02/e15d8a0a1de821faab5355e610b581016975b974_2_690x265.png" &gt;
 &lt;/div&gt;

 
&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;











&lt;figure class=""&gt;

 &lt;div class="img-container" &gt;
 &lt;img loading="lazy" alt="image" src="https://webp.050612.xyz/2025/02/42f87595d27a6fb3ed1fe329934517f5416920c6_2_690x210.png" &gt;
 &lt;/div&gt;

 
&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;&lt;code&gt;åŒºåŸŸèµ„æº&lt;/code&gt; é‡Œé€‰æ‹©éœ€è¦ç­¾å‘çš„åŸŸåï¼Œå¤šä¸ªåŸŸåé€‰æ‹©å¤šä¸ªã€‚ä¸å»ºè®®é€‰æ‹©å…¨éƒ¨çš„åŸŸåï¼Œ**æœ€å°æƒé™åŸåˆ™ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨ &lt;code&gt;å®¢æˆ·ç«¯ IP åœ°å€ç­›é€‰&lt;/code&gt; é‡Œå»ºè®®å†™ä¸‹ acme.sh æ‰€åœ¨çš„ä¸»æœºåšä¸ºç™½åå•ï¼Œéœ€è¦æ³¨æ„ï¼Œå¦‚æœæœåŠ¡å™¨æœ‰ ipv6 åœ°å€ï¼Œåˆ™ä¹Ÿéœ€è¦æ·»åŠ ï¼Œå› ä¸ºæœ‰å¯èƒ½ä¼š ipv6 ä¼˜å…ˆè®¿é—®ã€‚&lt;/p&gt;
&lt;p&gt;å‡» &lt;code&gt;ç»§ç»­ä»¥æ˜¾ç¤ºæ‘˜è¦&lt;/code&gt; , ç¡®è®¤æ²¡é—®é¢˜åæœ€åç‚¹å‡» &lt;code&gt;åˆ›å»ºä»¤ç‰Œ&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;











&lt;figure class=""&gt;

 &lt;div class="img-container" &gt;
 &lt;img loading="lazy" alt="image" src="https://webp.050612.xyz/2025/02/e88966d6049c27c31c632f9471ec1b79be287b59_2_510x499.png" &gt;
 &lt;/div&gt;

 
&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;æ­¤æ—¶å°±ä¼šå‡ºç°ä¸€ä¸ª Token,ï¼Œå³ CF_Tokenï¼Œæ‹·è´å¤‡ç”¨ã€‚&lt;/p&gt;
&lt;p&gt;











&lt;figure class=""&gt;

 &lt;div class="img-container" &gt;
 &lt;img loading="lazy" alt="image" src="https://webp.050612.xyz/2025/02/ca6093ea6bf83325809ea6179d4239ae2c9818cc_2_690x404.png" &gt;
 &lt;/div&gt;

 
&lt;/figure&gt;
&lt;/p&gt;
&lt;h5 class="heading" id="æ³¨æ„"&gt;
 æ³¨æ„
 &lt;a class="anchor" href="#%e6%b3%a8%e6%84%8f"&gt;#&lt;/a&gt;
&lt;/h5&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ³¨æ„æ–°å¢åŸŸåæ—¶ï¼Œéœ€è¦æ›´æ”¹API Tokenæ‰€åŒ…å«çš„åŸŸå&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ³¨æ„æœ‰å¤šå°æœºå™¨æ—¶ï¼Œéœ€è¦æ–°å¢æœºå™¨çš„IPåˆ°ç™½åå•&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;











&lt;figure class=""&gt;

 &lt;div class="img-container" &gt;
 &lt;img loading="lazy" alt="update_cf_api_token" src="https://webp.050612.xyz/2025/02/update_cf_api_token.png" &gt;
 &lt;/div&gt;

 
&lt;/figure&gt;













&lt;figure class=""&gt;

 &lt;div class="img-container" &gt;
 &lt;img loading="lazy" alt="cf-api-token-ip" src="https://webp.050612.xyz/2025/02/cf-api-token-ip.png" &gt;
 &lt;/div&gt;

 
&lt;/figure&gt;
&lt;/p&gt;
&lt;h4 class="heading" id="ä¸€ä¸ªå®Œæ•´çš„æ¼”ç¤º"&gt;
 ä¸€ä¸ªå®Œæ•´çš„æ¼”ç¤º
 &lt;a class="anchor" href="#%e4%b8%80%e4%b8%aa%e5%ae%8c%e6%95%b4%e7%9a%84%e6%bc%94%e7%a4%ba"&gt;#&lt;/a&gt;
&lt;/h4&gt;
&lt;p&gt;è·å–åˆ°äº†ä»¥ä¸Šä¸¤ä¸ªtokenå³å¯å¼€å§‹æ“ä½œã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†ä½¿æ•´ä¸ªæµç¨‹æ›´åŠ æ¸…æ™°ï¼ˆ&lt;del&gt;æ–¹ä¾¿è‡ªå·±æ“ä½œ&lt;/del&gt;ï¼‰ï¼Œè¿™é‡Œè´´ä¸€ä¸ªè‡ªå·±å¹³æ—¶ä½¿ç”¨ acme.sh ç”³è¯·è¯ä¹¦çš„å®Œæ•´æµç¨‹ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ç”³è¯·æ–¹å¼ï¼šDNS è®¤è¯ï¼ˆä½¿ç”¨ Cloudflare APIï¼‰&lt;/li&gt;
&lt;li&gt;ç”³è¯·è¯ä¹¦ CAï¼šLetâ€™s Encrypt&lt;/li&gt;
&lt;li&gt;ç”³è¯·è¯ä¹¦ç±»å‹ï¼šRSA + ECC ä¸¤ä¸ªé€šé…ç¬¦è¯ä¹¦&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;åç»­ç”³è¯·è¯ä¹¦çš„å‘½ä»¤ï¼Œéƒ½æ˜¯åœ¨ root ç”¨æˆ·ä¸‹æ‰§è¡Œçš„ï¼Œè¯·å…ˆä½¿ç”¨ &lt;code&gt;su&lt;/code&gt; åˆ‡æ¢åˆ° root ç”¨æˆ·ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#888;font-style:italic"&gt;# è¿›å…¥rootç”¨æˆ·&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;su
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#888;font-style:italic"&gt;# å®‰è£… acme.sh&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;curl https://get.acme.sh | sh
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#888;font-style:italic"&gt;# åˆ·æ–° shell å˜é‡é…ç½®&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="font-weight:bold;font-style:italic"&gt;source&lt;/span&gt; ~/.bashrc
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#888;font-style:italic"&gt;# å¯¼å…¥ Cloudflare API Token&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="font-weight:bold;font-style:italic"&gt;export&lt;/span&gt; &lt;span style="color:#666;font-weight:bold;font-style:italic"&gt;CF_Token&lt;/span&gt;=&lt;span style="color:#666;font-style:italic"&gt;&amp;#34;xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="font-weight:bold;font-style:italic"&gt;export&lt;/span&gt; &lt;span style="color:#666;font-weight:bold;font-style:italic"&gt;CF_Account_ID&lt;/span&gt;=&lt;span style="color:#666;font-style:italic"&gt;&amp;#34;xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#888;font-style:italic"&gt;# è®¾ç½®é»˜è®¤ CA ä¸º Let&amp;#39;s Encrypt&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;acme.sh --set-default-ca --server letsencrypt
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#888;font-style:italic"&gt;# ç­¾å‘ RSA è¯ä¹¦&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;acme.sh --issue --dns dns_cf -d xxx.xyz -d *.xxx.xyz --keylength 2048
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#888;font-style:italic"&gt;# å®‰è£… RSA è¯ä¹¦åˆ°æŒ‡å®šè·¯å¾„&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;acme.sh --install-cert -d domain.tld &lt;span style="color:#666;font-style:italic"&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;--key-file /etc/ssl/private/domain.tld_private.key &lt;span style="color:#666;font-style:italic"&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;--fullchain-file /etc/ssl/certs/domain.tld_chain.pem &lt;span style="color:#666;font-style:italic"&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;--reloadcmd &lt;span style="color:#666;font-style:italic"&gt;&amp;#34;service nginx reload&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#888;font-style:italic"&gt;# ç­¾å‘ ECC è¯ä¹¦ï¼Œè‹¥ä¸éœ€è¦ï¼Œè·³è¿‡å³å¯&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;acme.sh --issue --dns dns_cf -d domain.tld -d *.domain.tld --keylength ec-256
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#888;font-style:italic"&gt;# å®‰è£… ECC è¯ä¹¦åˆ°æŒ‡å®šè·¯å¾„&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;acme.sh --install-cert -d domain.tld --ecc &lt;span style="color:#666;font-style:italic"&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;--key-file /path/to/ssl/ecc_domain.tld_private.key &lt;span style="color:#666;font-style:italic"&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;--fullchain-file /path/to/ssl/ecc_domain.tld_chain.pem &lt;span style="color:#666;font-style:italic"&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;--capath /path/to/ssl/ecc_domain.tld_ca.pem &lt;span style="color:#666;font-style:italic"&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;--reloadcmd &lt;span style="color:#666;font-style:italic"&gt;&amp;#34;service nginx reload&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#888;font-style:italic"&gt;# è‡³æ­¤è¯ä¹¦å®‰è£…å®Œæ¯•&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#888;font-style:italic"&gt;# ä¸‹é¢æ˜¯åŒä¸€å°ä¸»æœºç”³è¯·ç¬¬äºŒä¸ªåŸŸåè¯ä¹¦&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#888;font-style:italic"&gt;###############################ç¬¬äºŒä¸ªåŸŸå#####################################################################&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#888;font-style:italic"&gt;# ç­¾å‘ RSA è¯ä¹¦&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;acme.sh --issue --dns dns_cf -d xxx.xyz -d *.xxx.xyz --keylength 2048
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#888;font-style:italic"&gt;# å®‰è£… RSA è¯ä¹¦åˆ°æŒ‡å®šè·¯å¾„&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;acme.sh --install-cert -d domain.tld &lt;span style="color:#666;font-style:italic"&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;--key-file /path/to/ssl/domain.tld_private.key &lt;span style="color:#666;font-style:italic"&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;--fullchain-file /path/to/ssl/domain.tld_chain.pem &lt;span style="color:#666;font-style:italic"&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;--reloadcmd &lt;span style="color:#666;font-style:italic"&gt;&amp;#34;service nginx reload&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#888;font-style:italic"&gt;# ç­¾å‘ ECC è¯ä¹¦ï¼Œè‹¥ä¸éœ€è¦ï¼Œè·³è¿‡å³å¯&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;acme.sh --issue --dns dns_cf -d domain.tld -d *.domain.tld --keylength ec-256
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#888;font-style:italic"&gt;# å®‰è£… ECC è¯ä¹¦åˆ°æŒ‡å®šè·¯å¾„&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;acme.sh 
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;--install-cert -d domain.tld --ecc &lt;span style="color:#666;font-style:italic"&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;--key-file /path/to/ssl/ecc_domain.tld_private.key &lt;span style="color:#666;font-style:italic"&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;--fullchain-file /path/to/ssl/ecc_domain.tld_chain.pem &lt;span style="color:#666;font-style:italic"&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;--capath /path/to/ssl/ecc_domain.tld_ca.pem &lt;span style="color:#666;font-style:italic"&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;--reloadcmd &lt;span style="color:#666;font-style:italic"&gt;&amp;#34;service nginx reload&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æ£€æŸ¥cronå®šæ—¶ä»»åŠ¡æ˜¯å¦å·²ç»æˆåŠŸåˆ›å»º&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;crontab -l
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å¦‚æœæœ‰ä¸¤ä¸ªä»¥ä¸Šçš„åŸŸåæˆ–è€…æ–°å¢åŸŸåï¼Œ
åªéœ€è¦ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;åœ¨Cloudflareçš„ã€ŒAPI Tokenã€ç®¡ç†ä¸­ï¼Œæ–°å¢API Tokenæ‰€åŒ…å«çš„åŸŸå&lt;/li&gt;
&lt;li&gt;ç­¾å‘æ–°åŸŸåçš„è¯ä¹¦å¹¶å®‰è£…åˆ°æŒ‡å®šä½ç½®&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;acme.shä¼šæ£€æŸ¥æ‰€ç®¡ç†çš„æ‰€æœ‰åŸŸåçš„è¯ä¹¦çš„åˆ°æœŸæ—¶é—´ï¼Œå¦‚æœéœ€è¦ç»­ç­¾ï¼Œåˆ™ä¼šæ‰§è¡Œç»­ç­¾æ“ä½œå¹¶å®‰è£…å¯¼è‡´è®¢ä½ç½®ï¼Œå®ç°è¯ä¹¦çš„è‡ªåŠ¨ç»­ç­¾ã€‚ä¸€åŠ³æ°¸é€¸çš„æ“ä½œã€‚&lt;/p&gt;
&lt;h2 class="heading" id="è¿ç§»æœåŠ¡"&gt;
 è¿ç§»æœåŠ¡
 &lt;a class="anchor" href="#%e8%bf%81%e7%a7%bb%e6%9c%8d%e5%8a%a1"&gt;#&lt;/a&gt;
&lt;/h2&gt;
&lt;p&gt;åˆ°äº†æœ€å¤æ‚çš„ä¸€ä¸ªç¯èŠ‚äº†ï¼Œå³ä½¿è¿è¡Œåœ¨dockerçš„æœåŠ¡ï¼Œæ¯ä¸ªä¹Ÿè¦è¿ç§»volumesã€nginxé…ç½®ï¼Œå¼€å¹²ï¼ğŸ’ªæ­£å¥½å‡‘è¿™ä¸ªæœºä¼šç»Ÿè®¡ä¸€ä¸‹æˆ‘è¿è¡Œäº†å“ªäº›æœåŠ¡ã€‚&lt;/p&gt;
&lt;h3 class="heading" id="openwebui--newapi"&gt;
 OpenWebUI + NewAPI
 &lt;a class="anchor" href="#openwebui--newapi"&gt;#&lt;/a&gt;
&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;æ‰“åŒ…æŒä¹…åŒ–æ•°æ®ï¼Œå…¶ä¸­NewAPIçš„MySQLä½¿ç”¨äº†Dockerçš„å‘½åå·&lt;/li&gt;
&lt;/ol&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#888;font-style:italic"&gt;######## æ‰“åŒ…OpenWebUIå’ŒNewAPIçš„æŒä¹…åŒ–æ•°æ®&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;tar -czvf data.tar.gz ./openwebui ./newapi
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#888;font-style:italic"&gt;######## æ‰“åŒ…newapi MySQLæ•°æ®å· ###########&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#888;font-style:italic"&gt;# æŸ¥æ‰¾å·çš„ç‰©ç†è·¯å¾„&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;docker volume inspect [é¡¹ç›®å]_mysql_data
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#888;font-style:italic"&gt;# åœ¨è¾“å‡ºä¸­æ‰¾åˆ° &amp;#34;Mountpoint&amp;#34;: &amp;#34;/var/lib/docker/volumes/[é¡¹ç›®å]_mysql_data/_data&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;sudo tar -czvf ~/mysql_volume.tar.gz /var/lib/docker/volumes/[é¡¹ç›®å]_mysql_data/_data
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ol start="2"&gt;
&lt;li&gt;ä½¿ç”¨SFTPåŠŸèƒ½ä¼ è¾“åˆ°æ–°æœºå™¨&lt;/li&gt;
&lt;li&gt;åœ¨æ–°æœºå™¨ä¸Šè§£å‹&lt;/li&gt;
&lt;/ol&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-BASH" data-lang="BASH"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#888;font-style:italic"&gt;######## è§£å‹OpenWebUIå’ŒNewAPIçš„æŒä¹…åŒ–æ•°æ®&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;sudo tar -xzvf data.tar.gz -C ./
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#888;font-style:italic"&gt;######## è§£å‹newapi MySQLæ•°æ®å· ###########&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#888;font-style:italic"&gt;# æ‰‹åŠ¨åˆ›å»ºç›®å½•&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;sudo mkdir -p /var/lib/docker/volumes/[é¡¹ç›®å]_mysql_data/_data
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#888;font-style:italic"&gt;# è§£å‹æ–‡ä»¶&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;sudo tar -xzvf ~/mysql_volume.tar.gz -C /var/lib/docker/volumes/[é¡¹ç›®å]_mysql_data/_data
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#888;font-style:italic"&gt;# ä¿®å¤æ–‡ä»¶æƒé™&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;sudo chown -R 999:999 /var/lib/docker/volumes/[é¡¹ç›®å]_mysql_data/_data
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ol start="4"&gt;
&lt;li&gt;é…ç½®nginx&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ç›´æ¥æŠŠæ—§æœºå™¨ä¸Šçš„nginxæ‰“åŒ…ä¸Šä¼ åˆ°æ–°æœºä¸Šï¼Œæ“ä½œåªéœ€è¦å»ºç«‹site-availableä¸site-enableçš„è½¯è¿æ¥&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;sudo ln -s /etc/nginx/sites-available/api.vtofun.me /etc/nginx/sites-enabled/api.vtofun.me
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;blockquote&gt;
&lt;p&gt;ç»·ä¸ä½äº†ï¼Œç¬¬ä¸€æ¬¡æ¬å®¶ååˆ†ä¹ƒè‡³ä¸‡åˆ†ä¸é¡ºåˆ©ï¼Œä»ä¸ƒç‚¹æ¬åˆ°åä¸€ç‚¹åŠè¿˜æ²¡æ¬å®Œã€‚æ¬å®¶å¤ªç´¯äº†ğŸ˜­&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 class="heading" id="openlist"&gt;
 OpenList
 &lt;a class="anchor" href="#openlist"&gt;#&lt;/a&gt;
&lt;/h3&gt;
&lt;p&gt;æƒ³åˆ°å‰æ®µæ—¶é—´çš„alistçš„æš´é›·å•†ä¸šåŒ–ï¼Œæˆ‘è¿˜æ˜¯æŠŠé•œåƒæ¢æˆOpenListå§ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;dockeré•œåƒå˜æ›´&lt;/li&gt;
&lt;/ol&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-yml" data-lang="yml"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;version: &lt;span style="color:#666;font-style:italic"&gt;&amp;#39;3.3&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;services:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; alist:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; image: &lt;span style="color:#666;font-style:italic"&gt;&amp;#39;openlistteam/openlist:latest&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; container_name: alist
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; volumes:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; - &lt;span style="color:#666;font-style:italic"&gt;&amp;#39;./data:/opt/alist/data&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; ports:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; - &lt;span style="color:#666;font-style:italic"&gt;&amp;#39;127.0.0.1:1259:5244&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; environment:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; - PUID=0
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; - PGID=0
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; - UMASK=022
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; restart: unless-stopped
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ol start="2"&gt;
&lt;li&gt;é…ç½®nginx&lt;/li&gt;
&lt;/ol&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;sudo ln -s /etc/nginx/sites-available/api.vtofun.me /etc/nginx/sites-enabled/api.vtofun.me
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ol start="3"&gt;
&lt;li&gt;æ³¨æ„æ‰“å¼€adminç”¨æˆ·çš„webdavçš„è¯»æƒé™ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 class="heading" id="sub-store"&gt;
 sub-store
 &lt;a class="anchor" href="#sub-store"&gt;#&lt;/a&gt;
&lt;/h3&gt;
&lt;p&gt;å¾ˆå¥½ç”¨çš„ä»£ç†é…ç½®ç®¡ç†è½¯ä»¶&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;nginx&lt;/li&gt;
&lt;/ol&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;sudo ln -s /etc/nginx/sites-available/substore /etc/nginx/sites-enabled/substore
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;sudo systemctl restart nginx.service 
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 class="heading" id="gemini-balance"&gt;
 Gemini-balance
 &lt;a class="anchor" href="#gemini-balance"&gt;#&lt;/a&gt;
&lt;/h3&gt;
&lt;p&gt;ä¸€ä¸ªå¾ˆå¥½ç”¨çš„geminiä»£ç†æœåŠ¡ï¼Œæ”¯æŒå¤šKEYï¼Œå¤±è´¥é‡è¯•ç­‰ã€‚&lt;/p&gt;
&lt;p&gt;ç”±äºä¹‹å‰æœåŠ¡å™¨ä¸ºé¦™æ¸¯ï¼Œè€ŒAIæœåŠ¡ä¸€èˆ¬éƒ½ä¸æ”¯æŒä¸­å›½å¤§é™†ä»¥åŠé¦™æ¸¯ï¼Œæ‰€ä»¥ä¹‹å‰gemini-balanceæœåŠ¡éƒ¨ç½²åœ¨ä¸€ä¸ªå°æœºå™¨ä¸Šã€‚æ­£å¥½è¶ç€è¿™æ¬¡æ¬å®¶æ¬åˆ°ä¸€èµ·ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;docker-compose.ymlæ–‡ä»¶ï¼Œé€šè¿‡.envä½¿ç”¨å’ŒNew-APIåŒä¸€ä¸ªMySQLï¼Œé¿å…èµ·ä¸¤ä¸ªMySQLæœåŠ¡ï¼Œé€ æˆèµ„æºæµªè´¹ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-yml" data-lang="yml"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#888;font-style:italic"&gt;# Geminiä»£ç†æ± &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; gemini-balance:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; image: ghcr.io/snailyp/gemini-balance:latest
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; container_name: gemini-balance
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; restart: unless-stopped
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; ports:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; - &lt;span style="color:#666;font-style:italic"&gt;&amp;#34;127.0.0.1:1260:8000&amp;#34;&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; env_file:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; - .env &lt;span style="color:#888;font-style:italic"&gt;# åŒæ ·ä½¿ç”¨ .env æ–‡ä»¶ç®¡ç†é…ç½®&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; networks:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; - app_network &lt;span style="color:#888;font-style:italic"&gt;# åŠ å…¥ç»Ÿä¸€ç½‘ç»œ&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; depends_on:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; mysql:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; condition: service_healthy &lt;span style="color:#888;font-style:italic"&gt;# ä¾èµ–äºæˆ‘ä»¬ç»Ÿä¸€çš„ mysql æœåŠ¡&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; healthcheck:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; test: [&lt;span style="color:#666;font-style:italic"&gt;&amp;#34;CMD-SHELL&amp;#34;&lt;/span&gt;, &lt;span style="color:#666;font-style:italic"&gt;&amp;#34;python -c \&amp;#34;import requests; exit(0) if requests.get(&amp;#39;http://localhost:8000/health&amp;#39;).status_code == 200 else exit(1)\&amp;#34;&amp;#34;&lt;/span&gt;]
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; interval: 30s
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; timeout: 5s
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; retries: 3
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; start_period: 10s
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;nginxé…ç½®æ–‡ä»¶æ²¡æœ‰ä»€ä¹ˆç‰¹æ®Šçš„ï¼Œåä»£ä¸€ä¸‹å³å¯ã€‚&lt;/p&gt;
&lt;h3 class="heading" id="pdfmathtranslate"&gt;
 PDFMathTranslate
 &lt;a class="anchor" href="#pdfmathtranslate"&gt;#&lt;/a&gt;
&lt;/h3&gt;
&lt;p&gt;ä¸€ä¸ªåŸºäº AI å®Œæ•´ä¿ç•™æ’ç‰ˆçš„ PDF æ–‡æ¡£å…¨æ–‡åŒè¯­ç¿»è¯‘ï¼Œæ”¯æŒ Google/DeepL/Ollama/OpenAI ç­‰æœåŠ¡ã€‚&lt;/p&gt;
&lt;h2 class="heading" id="å®‰è£…æ–°æœåŠ¡"&gt;
 å®‰è£…æ–°æœåŠ¡
 &lt;a class="anchor" href="#%e5%ae%89%e8%a3%85%e6%96%b0%e6%9c%8d%e5%8a%a1"&gt;#&lt;/a&gt;
&lt;/h2&gt;
&lt;h3 class="heading" id="1panel"&gt;
 1Panel
 &lt;a class="anchor" href="#1panel"&gt;#&lt;/a&gt;
&lt;/h3&gt;
&lt;p&gt;ä¸€é”®å®‰è£…çš„å‘½ä»¤ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;bash -c &lt;span style="color:#666;font-style:italic"&gt;&amp;#34;&lt;/span&gt;&lt;span style="font-weight:bold;text-decoration:underline"&gt;$(&lt;/span&gt;curl -sSL https://resource.fit2cloud.com/1panel/package/v2/quick_start.sh&lt;span style="font-weight:bold;text-decoration:underline"&gt;)&lt;/span&gt;&lt;span style="color:#666;font-style:italic"&gt;&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;











&lt;figure class=""&gt;

 &lt;div class="img-container" &gt;
 &lt;img loading="lazy" alt="" src="https://webp.050612.xyz/2025/07/20250718151202885.png" &gt;
 &lt;/div&gt;

 
&lt;/figure&gt;
&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;2025-07-18æ—¥æ›´æ–°
1panel é¢æ¿bugå¥½å¤šï¼Œä½¿ç”¨nginxåä»£é¢æ¿æœ¬èº«å®ç°httpsè®¿é—®ï¼Œä¸€ç›´å¡åœ¨loadingã€‚ä¸çŸ¥æ˜¯ä¸æ˜¯æˆ‘æ“ä½œæœ‰é—®é¢˜ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ä¼¼ä¹é‡è§é—®é¢˜çš„æƒ…å†µæœ‰å¾ˆå¤šã€‚












&lt;figure class=""&gt;

 &lt;div class="img-container" &gt;
 &lt;img loading="lazy" alt="" src="https://webp.050612.xyz/2025/07/20250718161106071.png" &gt;
 &lt;/div&gt;

 
&lt;/figure&gt;
&lt;/p&gt;
&lt;h4 class="heading" id="é—®é¢˜å®šä½"&gt;
 é—®é¢˜å®šä½
 &lt;a class="anchor" href="#%e9%97%ae%e9%a2%98%e5%ae%9a%e4%bd%8d"&gt;#&lt;/a&gt;
&lt;/h4&gt;
&lt;p&gt;ç›®å‰ä½¿ç”¨ip:portæ–¹å¼å¯ä»¥æ­£å¸¸è®¿é—®ï¼Œä½¿ç”¨åŸŸåæ— æ³•è®¿é—®ï¼Œå¯ä»¥åˆæ­¥åˆ¤æ–­ä¸ºnginxåä»£çš„é…ç½®é—®é¢˜ã€‚&lt;/p&gt;
&lt;h4 class="heading" id="é—®é¢˜è§£å†³"&gt;
 é—®é¢˜è§£å†³
 &lt;a class="anchor" href="#%e9%97%ae%e9%a2%98%e8%a7%a3%e5%86%b3"&gt;#&lt;/a&gt;
&lt;/h4&gt;
&lt;p&gt;è´´ä¸Šä¸€ä»½å¯ä»¥æ­£å¸¸å·¥ä½œçš„nginxé…ç½®ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-nginx" data-lang="nginx"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="font-weight:bold;text-decoration:underline"&gt;server&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="font-weight:bold;text-decoration:underline"&gt;listen&lt;/span&gt; 80;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="font-weight:bold;text-decoration:underline"&gt;server_name&lt;/span&gt; &lt;span style="color:#666;font-style:italic"&gt;xxx&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="font-weight:bold;text-decoration:underline"&gt;return&lt;/span&gt; 301 &lt;span style="color:#666;font-style:italic"&gt;https://&lt;/span&gt;&lt;span style="color:#666;font-weight:bold;font-style:italic"&gt;$server_name$request_uri&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="font-weight:bold;text-decoration:underline"&gt;server&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="font-weight:bold;text-decoration:underline"&gt;listen&lt;/span&gt; 443 &lt;span style="color:#666;font-style:italic"&gt;ssl&lt;/span&gt; &lt;span style="color:#666;font-style:italic"&gt;http2&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="font-weight:bold;text-decoration:underline"&gt;server_name&lt;/span&gt; &lt;span style="color:#666;font-style:italic"&gt;xxx&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="font-weight:bold;text-decoration:underline"&gt;ssl_certificate&lt;/span&gt; &lt;span style="color:#666;font-style:italic"&gt;/etc/ssl/certs/xxx&lt;/span&gt;; 
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="font-weight:bold;text-decoration:underline"&gt;ssl_certificate_key&lt;/span&gt; &lt;span style="color:#666;font-style:italic"&gt;/etc/ssl/private/xxx&lt;/span&gt;; 
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="font-weight:bold;text-decoration:underline"&gt;ssl_session_timeout&lt;/span&gt; &lt;span style="color:#666;font-style:italic"&gt;1d&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="font-weight:bold;text-decoration:underline"&gt;ssl_session_cache&lt;/span&gt; &lt;span style="color:#666;font-style:italic"&gt;shared:MozSSL:10m&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="font-weight:bold;text-decoration:underline"&gt;ssl_ciphers&lt;/span&gt; &lt;span style="color:#666;font-style:italic"&gt;ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305:DHE-RSA-AES128-GCM-SHA256:DHE-RSA-AES256-GCM-SHA384&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="font-weight:bold;text-decoration:underline"&gt;ssl_prefer_server_ciphers&lt;/span&gt; &lt;span style="color:#666;font-weight:bold;font-style:italic"&gt;off&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="font-weight:bold;text-decoration:underline"&gt;ssl_protocols&lt;/span&gt; &lt;span style="color:#666;font-style:italic"&gt;TLSv1.1&lt;/span&gt; &lt;span style="color:#666;font-style:italic"&gt;TLSv1.2&lt;/span&gt; &lt;span style="color:#666;font-style:italic"&gt;TLSv1.3&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="font-weight:bold;text-decoration:underline"&gt;add_header&lt;/span&gt; &lt;span style="color:#666;font-style:italic"&gt;Strict-Transport-Security&lt;/span&gt; &lt;span style="color:#666;font-style:italic"&gt;&amp;#34;max-age=63072000&amp;#34;&lt;/span&gt; &lt;span style="color:#666;font-style:italic"&gt;always&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="font-weight:bold;text-decoration:underline"&gt;client_max_body_size&lt;/span&gt; 500m;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="font-weight:bold;text-decoration:underline"&gt;location&lt;/span&gt; &lt;span style="color:#666;font-style:italic"&gt;/&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="font-weight:bold;text-decoration:underline"&gt;proxy_pass&lt;/span&gt; &lt;span style="color:#666;font-style:italic"&gt;http://xxxx:1255&lt;/span&gt;; &lt;span style="color:#888;font-style:italic"&gt;# xxxæ›¿æ¢ä¸ºå†…éƒ¨è®¿é—®åœ°å€
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="font-weight:bold;text-decoration:underline"&gt;proxy_http_version&lt;/span&gt; 1&lt;span style="color:#666;font-style:italic"&gt;.1&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#888;font-style:italic"&gt;# WebSocket ä»£ç†æ‰€éœ€çš„å¤´ï¼Œ1Panel å¯èƒ½ç”¨åˆ°
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="font-weight:bold;text-decoration:underline"&gt;proxy_set_header&lt;/span&gt; &lt;span style="color:#666;font-style:italic"&gt;Upgrade&lt;/span&gt; &lt;span style="color:#666;font-weight:bold;font-style:italic"&gt;$http_upgrade&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="font-weight:bold;text-decoration:underline"&gt;proxy_set_header&lt;/span&gt; &lt;span style="color:#666;font-style:italic"&gt;Connection&lt;/span&gt; &lt;span style="color:#666;font-style:italic"&gt;&amp;#34;upgrade&amp;#34;&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#888;font-style:italic"&gt;# é‡è¦çš„è½¬å‘å¤´
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="font-weight:bold;text-decoration:underline"&gt;proxy_set_header&lt;/span&gt; &lt;span style="color:#666;font-style:italic"&gt;Host&lt;/span&gt; &lt;span style="color:#666;font-weight:bold;font-style:italic"&gt;$host&lt;/span&gt;; &lt;span style="color:#888;font-style:italic"&gt;# ä¼ é€’åŸå§‹è¯·æ±‚çš„ Host å¤´
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="font-weight:bold;text-decoration:underline"&gt;proxy_set_header&lt;/span&gt; &lt;span style="color:#666;font-style:italic"&gt;X-Real-IP&lt;/span&gt; &lt;span style="color:#666;font-weight:bold;font-style:italic"&gt;$remote_addr&lt;/span&gt;; &lt;span style="color:#888;font-style:italic"&gt;# ä¼ é€’çœŸå®å®¢æˆ·ç«¯IP
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="font-weight:bold;text-decoration:underline"&gt;proxy_set_header&lt;/span&gt; &lt;span style="color:#666;font-style:italic"&gt;X-Forwarded-For&lt;/span&gt; &lt;span style="color:#666;font-weight:bold;font-style:italic"&gt;$proxy_add_x_forwarded_for&lt;/span&gt;; &lt;span style="color:#888;font-style:italic"&gt;# ä¼ é€’å®Œæ•´çš„IPé“¾
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#888;font-style:italic"&gt;# *** ä¼ é€’åŸå§‹è¯·æ±‚åè®®ï¼Œè§£å†³æ··åˆå†…å®¹é—®é¢˜ ***
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="font-weight:bold;text-decoration:underline"&gt;proxy_set_header&lt;/span&gt; &lt;span style="color:#666;font-style:italic"&gt;X-Forwarded-Proto&lt;/span&gt; &lt;span style="color:#666;font-weight:bold;font-style:italic"&gt;$scheme&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#888;font-style:italic"&gt;# æ¨èï¼šå¦‚æœé‡åˆ°å¤§æ–‡ä»¶ä¸Šä¼ æˆ–ä¸‹è½½é—®é¢˜ï¼Œå¯ä»¥å°è¯•å…³é—­ buffering
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#888;font-style:italic"&gt;# proxy_buffering off;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#888;font-style:italic"&gt;# proxy_request_buffering off;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h4 class="heading" id="åè®°"&gt;
 åè®°
 &lt;a class="anchor" href="#%e5%90%8e%e8%ae%b0"&gt;#&lt;/a&gt;
&lt;/h4&gt;
&lt;p&gt;åœ¨å®‰è£…1panelä¹‹å‰æ²¡æœ‰ä½¿ç”¨è¿‡å…¶ä»–è¿ç»´é¢æ¿ï¼Œä¹Ÿä¸æ˜¯ä¸“ä¸šçš„è¿ç»´äººå‘˜ï¼Œä¸è¿‡æœ‰ä¸€ä¸ªGUIæ€»å½’æ˜¯å¥½äº‹ã€‚å¯æ˜¯è£…ä¸Šäº†ä¹‹åï¼Œå‘ç°èƒ½ç”¨ä¸Šçš„åŠŸèƒ½å¯¥å¯¥æ— å‡ ã€‚&lt;/p&gt;
&lt;p&gt;æ¥çœ‹çœ‹1panelå®˜ç½‘ä»‹ç»ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;1Panel ä½œä¸ºä¸€æ¬¾ç°ä»£åŒ–ã€å¼€æºçš„ Linux æœåŠ¡å™¨è¿ç»´ç®¡ç†é¢æ¿ï¼Œå…¶åŠŸèƒ½æ¶µç›–äº†æœåŠ¡å™¨ç®¡ç†çš„æ–¹æ–¹é¢é¢ï¼Œå¹¶ç‰¹åˆ«å¼ºè°ƒäº†æ˜“ç”¨æ€§å’Œå¯¹æ–°æŠ€æœ¯çš„æ”¯æŒã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h5 class="heading" id="æ ¸å¿ƒæœåŠ¡å™¨ç®¡ç†-é«˜æ•ˆç®¡ç†"&gt;
 æ ¸å¿ƒæœåŠ¡å™¨ç®¡ç† (é«˜æ•ˆç®¡ç†)
 &lt;a class="anchor" href="#%e6%a0%b8%e5%bf%83%e6%9c%8d%e5%8a%a1%e5%99%a8%e7%ae%a1%e7%90%86-%e9%ab%98%e6%95%88%e7%ae%a1%e7%90%86"&gt;#&lt;/a&gt;
&lt;/h5&gt;
&lt;blockquote&gt;
&lt;p&gt;è¿™ä¸ªè¿˜æ˜¯å¾ˆæœ‰ç”¨çš„ï¼Œå¯ä»¥ç›´è§‚çœ‹åˆ°æœåŠ¡å™¨çš„èµ„æºä½¿ç”¨æƒ…å†µã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä¸»æœºç›‘æ§&lt;/strong&gt;: å®æ—¶ç›‘æ§æœåŠ¡å™¨çš„ CPUã€å†…å­˜ã€ç£ç›˜ I/Oã€ç½‘ç»œç­‰å„é¡¹æ€§èƒ½æŒ‡æ ‡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ–‡ä»¶ç®¡ç†&lt;/strong&gt;: æä¾›åœ¨çº¿æ–‡ä»¶ç®¡ç†å™¨ï¼Œæ–¹ä¾¿ç”¨æˆ·ä¸Šä¼ ã€ä¸‹è½½ã€ç¼–è¾‘ã€åˆ é™¤æœåŠ¡å™¨ä¸Šçš„æ–‡ä»¶ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ•°æ®åº“ç®¡ç†&lt;/strong&gt;: å¯è§†åŒ–ç®¡ç† MySQLã€PostgreSQLã€MongoDB ç­‰å¤šç§æ•°æ®åº“ï¼ŒåŒ…æ‹¬åˆ›å»ºã€åˆ é™¤æ•°æ®åº“ã€ç”¨æˆ·ç®¡ç†ç­‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å®¹å™¨ç®¡ç†&lt;/strong&gt;: ç»Ÿä¸€ç®¡ç† Docker å®¹å™¨ï¼ŒåŒ…æ‹¬å®¹å™¨çš„å¯åŠ¨ã€åœæ­¢ã€é‡å¯ã€åˆ é™¤ã€æ—¥å¿—æŸ¥çœ‹ç­‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h5 class="heading" id="ç½‘ç«™ä¸åŸŸåç®¡ç†-å¿«é€Ÿå»ºç«™"&gt;
 ç½‘ç«™ä¸åŸŸåç®¡ç† (å¿«é€Ÿå»ºç«™)
 &lt;a class="anchor" href="#%e7%bd%91%e7%ab%99%e4%b8%8e%e5%9f%9f%e5%90%8d%e7%ae%a1%e7%90%86-%e5%bf%ab%e9%80%9f%e5%bb%ba%e7%ab%99"&gt;#&lt;/a&gt;
&lt;/h5&gt;
&lt;blockquote&gt;
&lt;p&gt;å¯¹æˆ‘æ¥è¯´æ— ç”¨ï¼Œç›®å‰dockerçš„åŸºæœ¬æ“ä½œå·²ç»å¤Ÿç®€å•äº†ï¼ŒNginxé…ç½®å†™èµ·æ¥ä¹Ÿä¸å›°éš¾ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä¸€é”®å»ºç«™éƒ¨ç½²&lt;/strong&gt;: æ·±åº¦é›†æˆ WordPressã€Halo ç­‰å¼€æºå»ºç«™è½¯ä»¶ï¼Œæ”¯æŒä¸€é”®å¿«é€Ÿéƒ¨ç½²ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åŸŸåç®¡ç†ä¸é…ç½®&lt;/strong&gt;: æ–¹ä¾¿åœ°è¿›è¡ŒåŸŸåç»‘å®šã€è§£æè®¾ç½®ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;SSL è¯ä¹¦ç®¡ç†&lt;/strong&gt;: æ”¯æŒè‡ªåŠ¨ç”³è¯·å’Œé…ç½® Let&amp;rsquo;s Encrypt ç­‰ SSL è¯ä¹¦ï¼Œå®ç° HTTPS å®‰å…¨è®¿é—®ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¤šç«™ç‚¹ç®¡ç†&lt;/strong&gt;: æ”¯æŒåœ¨åŒä¸€æœåŠ¡å™¨ä¸Šç®¡ç†å¤šä¸ªç½‘ç«™ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h5 class="heading" id="åº”ç”¨ç”Ÿæ€ä¸å•†åº—"&gt;
 åº”ç”¨ç”Ÿæ€ä¸å•†åº—
 &lt;a class="anchor" href="#%e5%ba%94%e7%94%a8%e7%94%9f%e6%80%81%e4%b8%8e%e5%95%86%e5%ba%97"&gt;#&lt;/a&gt;
&lt;/h5&gt;
&lt;blockquote&gt;
&lt;p&gt;åŒä¸Šï¼Œå®‰è£…åº”ç”¨ä¹Ÿä¸å›°éš¾ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç²¾é€‰å¼€æºåº”ç”¨&lt;/strong&gt;: æä¾›ä¸€ä¸ªä¸°å¯Œçš„åº”ç”¨å•†åº—ï¼Œæ¶µç›–å„ç±»é«˜è´¨é‡çš„å¼€æºå·¥å…·å’Œåº”ç”¨è½¯ä»¶ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¸€é”®å®‰è£…éƒ¨ç½²&lt;/strong&gt;: ç”¨æˆ·å¯ä»¥è½»æ¾é€šè¿‡ç‚¹å‡»å®‰è£…å’Œéƒ¨ç½²è¿™äº›åº”ç”¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è‡ªåŠ¨æ›´æ–°ç®¡ç†&lt;/strong&gt;: æ”¯æŒå·²å®‰è£…åº”ç”¨çš„è‡ªåŠ¨æ›´æ–°ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ•°æ®å¤‡ä»½ä¸æ¢å¤&lt;/strong&gt;: æä¾›åº”ç”¨æ•°æ®çš„ä¸€é”®å¤‡ä»½å’Œæ¢å¤åŠŸèƒ½ã€‚
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åº”ç”¨å•†åº—ä¸­åŒ…å«çš„å¸¸è§åº”ç”¨ç±»åˆ«ç¤ºä¾‹&lt;/strong&gt;:
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Web æœåŠ¡å™¨&lt;/strong&gt;: OpenResty, Nginx Proxy Manager, OpenLiteSpeed&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ•°æ®åº“&lt;/strong&gt;: MySQL, Redis, PostgreSQL, MariaDB, MongoDB, Elasticsearch, Prometheus, Microsoft SQL Server&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;DevOps å·¥å…·&lt;/strong&gt;: Gitea, Jenkins, ç¦…é“, Docker Registry, ShowDoc, Nexus Repository&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¼€å‘å·¥å…·&lt;/strong&gt;: phpMyAdmin, code-server (æµè§ˆå™¨ä¸­çš„ VS Code), IT-Tools, Adminer&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å»ºç«™ç³»ç»Ÿ&lt;/strong&gt;: Halo, WordPress, Typecho, Flarum, Wiki.js&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;AI / å¤§æ¨¡å‹&lt;/strong&gt;: MaxKB (æ™ºèƒ½ä½“å¹³å°), Ollama (æœ¬åœ°å¤§æ¨¡å‹è¿è¡Œ), OpenWebUI, ChatGPT-Next-Web, LobeChat&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è¿è¡Œç¯å¢ƒ&lt;/strong&gt;: PHP (5/7/8), Node.js, &lt;strong&gt;Java&lt;/strong&gt;, Python, Go, .NET&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¸­é—´ä»¶&lt;/strong&gt;: MinIO (å¯¹è±¡å­˜å‚¨), RabbitMQ (æ¶ˆæ¯é˜Ÿåˆ—), Nacos (æœåŠ¡å‘ç°), Kafka, Apache Tomcat, RocketMQ&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å®‰å…¨å·¥å…·&lt;/strong&gt;: JumpServer (å ¡å’æœº), AdGuardHome (DNS å¹¿å‘Šæ‹¦æˆª), uuWAF (Web åº”ç”¨é˜²ç«å¢™), OpenVPN&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;äº‘å­˜å‚¨&lt;/strong&gt;: AList (å¤šå­˜å‚¨æ–‡ä»¶åˆ—è¡¨), Nextcloud, Cloudreve&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¤šåª’ä½“&lt;/strong&gt;: Jellyfin (åª’ä½“æœåŠ¡å™¨), YesPlayMusic (ç½‘æ˜“äº‘æ’­æ”¾å™¨), Navidrome (éŸ³ä¹æœåŠ¡å™¨)&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¼‘é—²æ¸¸æˆ&lt;/strong&gt;: ä¸­æ–‡ DOS æ¸¸æˆ, Minecraft æœåŠ¡å™¨ç®¡ç† (MCSManager), å¹»å…½å¸•é²æœåŠ¡ç«¯&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é‚®ä»¶æœåŠ¡&lt;/strong&gt;: Mailserver, Roundcube (Web é‚®ä»¶å®¢æˆ·ç«¯)&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;BI (å•†ä¸šæ™ºèƒ½)&lt;/strong&gt;: DataEase, Metabase (æ•°æ®å¯è§†åŒ–åˆ†æå·¥å…·)&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å…¶ä½™çš„ä¸€äº›åŠŸèƒ½ä¸­ï¼Œèƒ½å¸å¼•æˆ‘çš„è¿˜æœ‰è‡ªåŠ¨å¤‡ä»½åŠŸèƒ½ï¼Œæœªæ¥å¯èƒ½ä¼šç”¨åˆ°ã€‚&lt;/p&gt;
&lt;p&gt;è¯´å®è¯ï¼Œæ— æ³•ä½¿ç”¨nginxåä»£å®ç°httpsè®¿é—®å·®ç‚¹æŠŠæˆ‘åŠé€€ï¼Œ1panelçš„å¸è½½å‘½ä»¤éƒ½å·²ç»æ•²åœ¨äº†ç»ˆç«¯ä¸­ã€‚ä¸è¿‡è¿˜æ˜¯æ›´æ–°äº†ä¸€ä¸‹nginxé…ç½®ï¼Œæ‰¾åˆ°äº†é—®é¢˜æ‰€åœ¨ï¼Œç•™ä¸‹æ¥äº†è¿™ä¸ªçœ‹èµ·æ¥å¾ˆèˆ’æœçš„é¢æ¿ã€‚å¸Œæœ›ä»¥åå¯ä»¥å‘æŒ¥æ›´å¤§çš„ä½œç”¨ã€‚&lt;/p&gt;
&lt;h3 class="heading" id="å“ªå’ç›‘æ§v1"&gt;
 å“ªå’ç›‘æ§V1
 &lt;a class="anchor" href="#%e5%93%aa%e5%90%92%e7%9b%91%e6%8e%a7v1"&gt;#&lt;/a&gt;
&lt;/h3&gt;
&lt;h4 class="heading" id="å®‰è£…å‰å‡†å¤‡"&gt;
 å®‰è£…å‰å‡†å¤‡
 &lt;a class="anchor" href="#%e5%ae%89%e8%a3%85%e5%89%8d%e5%87%86%e5%a4%87"&gt;#&lt;/a&gt;
&lt;/h4&gt;
&lt;h5 class="heading" id="åŸŸå"&gt;
 åŸŸå
 &lt;a class="anchor" href="#%e5%9f%9f%e5%90%8d"&gt;#&lt;/a&gt;
&lt;/h5&gt;
&lt;p&gt;ä¸€ä¸ªæ‰˜ç®¡åœ¨ã€ŒCloudflareã€çš„åŸŸåã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;è§£æåˆ°ä¸€ä¸ªè‡³å°‘1c512MBçš„æœåŠ¡å™¨ä¸Šä½œä¸ºé¢æ¿ç«¯ï¼ˆåç«¯ã€ç›‘æ§ç«¯ï¼‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å¼€å¯ã€Œwebsocketã€å’Œã€ŒgRPCã€












&lt;figure class=""&gt;

 &lt;div class="img-container" &gt;
 &lt;img loading="lazy" alt="" src="https://webp.050612.xyz/2025/07/20250720201537824.png" &gt;
 &lt;/div&gt;

 
&lt;/figure&gt;
&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 class="heading" id="å®‰è£…å“ªå’é¢æ¿ç«¯"&gt;
 å®‰è£…å“ªå’é¢æ¿ç«¯
 &lt;a class="anchor" href="#%e5%ae%89%e8%a3%85%e5%93%aa%e5%90%92%e9%9d%a2%e6%9d%bf%e7%ab%af"&gt;#&lt;/a&gt;
&lt;/h4&gt;
&lt;p&gt;å®˜æ–¹æ‰‹å†Œï¼š&lt;a href="https://nezha.wiki/guide/dashboard.html"&gt;å®‰è£… Dashboard | å“ªå’æœåŠ¡å™¨ç›‘æ§&lt;/a&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;curl -L https://raw.githubusercontent.com/nezhahq/scripts/refs/heads/main/install.sh -o nezha.sh &amp;amp;&amp;amp; chmod +x nezha.sh &amp;amp;&amp;amp; sudo ./nezha.sh
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å®‰è£…æµç¨‹ï¼šä»…éœ€è¦ç‰¹åˆ«æ³¨æ„nezha-agentåœ°å€å¡«å…¥&lt;code&gt;è§£æåŸŸå:443&lt;/code&gt;












&lt;figure class=""&gt;

 &lt;div class="img-container" &gt;
 &lt;img loading="lazy" alt="" src="https://webp.050612.xyz/2025/07/20250720201932192.png" &gt;
 &lt;/div&gt;

 
&lt;/figure&gt;
&lt;/p&gt;
&lt;h4 class="heading" id="é…ç½®nginxåå‘ä»£ç†"&gt;
 é…ç½®nginxåå‘ä»£ç†
 &lt;a class="anchor" href="#%e9%85%8d%e7%bd%aenginx%e5%8f%8d%e5%90%91%e4%bb%a3%e7%90%86"&gt;#&lt;/a&gt;
&lt;/h4&gt;
&lt;p&gt;ä¸€ä¸ªæ¨èçš„nginxé…ç½®&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-nginx" data-lang="nginx"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#888;font-style:italic"&gt;# ===================================================================
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#888;font-style:italic"&gt;# å“ªå’ç›‘æ§ - åç«¯æœåŠ¡è¿æ¥æ± é…ç½®
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#888;font-style:italic"&gt;# å®šä¹‰ä¸€ä¸ªåä¸º &amp;#34;dashboard&amp;#34; çš„åç«¯æœåŠ¡æ± ï¼Œç”¨äºè¿æ¥å¤ç”¨ï¼Œæé«˜æ€§èƒ½ã€‚
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#888;font-style:italic"&gt;# ===================================================================
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="font-weight:bold;text-decoration:underline"&gt;upstream&lt;/span&gt; &lt;span style="color:#666;font-style:italic"&gt;dashboard&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="font-weight:bold;text-decoration:underline"&gt;server&lt;/span&gt; 127.0.0.1:8008;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="font-weight:bold;text-decoration:underline"&gt;keepalive&lt;/span&gt; 512;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#888;font-style:italic"&gt;# ===================================================================
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#888;font-style:italic"&gt;# HTTP (80) åˆ° HTTPS (443) çš„æ°¸ä¹…é‡å®šå‘
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#888;font-style:italic"&gt;# è¿™æ˜¯æœ€ä½³å®‰å…¨å®è·µï¼Œç¡®ä¿æ‰€æœ‰ç”¨æˆ·éƒ½é€šè¿‡åŠ å¯†è¿æ¥è®¿é—®ã€‚
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#888;font-style:italic"&gt;# ===================================================================
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="font-weight:bold;text-decoration:underline"&gt;server&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="font-weight:bold;text-decoration:underline"&gt;listen&lt;/span&gt; 80;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="font-weight:bold;text-decoration:underline"&gt;listen&lt;/span&gt; &lt;span style="color:#666;font-style:italic"&gt;[::]:80&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#888;font-style:italic"&gt;# &amp;lt;--- ä¿®æ”¹è¿™é‡Œ: å°† dashboard.example.com æ›¿æ¢ä¸ºä½ çš„çœŸå®åŸŸå
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="font-weight:bold;text-decoration:underline"&gt;server_name&lt;/span&gt; &lt;span style="color:#666;font-style:italic"&gt;dashboard.example.com&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#888;font-style:italic"&gt;# å°†æ‰€æœ‰åˆ°æ¥çš„ HTTP è¯·æ±‚é€šè¿‡ 301 æ°¸ä¹…é‡å®šå‘åˆ°å¯¹åº”çš„ HTTPS åœ°å€
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="font-weight:bold;text-decoration:underline"&gt;return&lt;/span&gt; 301 &lt;span style="color:#666;font-style:italic"&gt;https://&lt;/span&gt;&lt;span style="color:#666;font-weight:bold;font-style:italic"&gt;$host$request_uri&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#888;font-style:italic"&gt;# ===================================================================
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#888;font-style:italic"&gt;# HTTPS (443) ä¸»æœåŠ¡é…ç½®
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#888;font-style:italic"&gt;# æ‰€æœ‰åŠ å¯†æµé‡çš„å…¥å£ï¼Œå¤„ç† Webã€WebSocket å’Œ gRPC è¯·æ±‚ã€‚
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#888;font-style:italic"&gt;# ===================================================================
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="font-weight:bold;text-decoration:underline"&gt;server&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="font-weight:bold;text-decoration:underline"&gt;listen&lt;/span&gt; 443 &lt;span style="color:#666;font-style:italic"&gt;ssl&lt;/span&gt; &lt;span style="color:#666;font-style:italic"&gt;http2&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="font-weight:bold;text-decoration:underline"&gt;listen&lt;/span&gt; &lt;span style="color:#666;font-style:italic"&gt;[::]:443&lt;/span&gt; &lt;span style="color:#666;font-style:italic"&gt;ssl&lt;/span&gt; &lt;span style="color:#666;font-style:italic"&gt;http2&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#888;font-style:italic"&gt;# &amp;lt;--- ä¿®æ”¹è¿™é‡Œ: å°† dashboard.example.com æ›¿æ¢ä¸ºä½ çš„çœŸå®åŸŸå
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="font-weight:bold;text-decoration:underline"&gt;server_name&lt;/span&gt; &lt;span style="color:#666;font-style:italic"&gt;dashboard.example.com&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#888;font-style:italic"&gt;# --- SSL è¯ä¹¦é…ç½® ---
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#888;font-style:italic"&gt;# &amp;lt;--- ä¿®æ”¹è¿™é‡Œ: æ›¿æ¢ä¸ºä½ çš„ SSL è¯ä¹¦å’Œç§é’¥çš„å®é™…è·¯å¾„
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="font-weight:bold;text-decoration:underline"&gt;ssl_certificate&lt;/span&gt; &lt;span style="color:#666;font-style:italic"&gt;/etc/letsencrypt/live/dashboard.example.com/fullchain.pem&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="font-weight:bold;text-decoration:underline"&gt;ssl_certificate_key&lt;/span&gt; &lt;span style="color:#666;font-style:italic"&gt;/etc/letsencrypt/live/dashboard.example.com/key.pem&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#888;font-style:italic"&gt;# --- SSL æ€§èƒ½ä¸å®‰å…¨ä¼˜åŒ– (é€šå¸¸æ— éœ€ä¿®æ”¹) ---
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="font-weight:bold;text-decoration:underline"&gt;ssl_stapling&lt;/span&gt; &lt;span style="color:#666;font-weight:bold;font-style:italic"&gt;on&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="font-weight:bold;text-decoration:underline"&gt;ssl_session_timeout&lt;/span&gt; &lt;span style="color:#666;font-style:italic"&gt;1d&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="font-weight:bold;text-decoration:underline"&gt;ssl_session_cache&lt;/span&gt; &lt;span style="color:#666;font-style:italic"&gt;shared:SSL:10m&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="font-weight:bold;text-decoration:underline"&gt;ssl_protocols&lt;/span&gt; &lt;span style="color:#666;font-style:italic"&gt;TLSv1.2&lt;/span&gt; &lt;span style="color:#666;font-style:italic"&gt;TLSv1.3&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#888;font-style:italic"&gt;# å…è®¸ Header ä¸­åŒ…å«ä¸‹åˆ’çº¿ï¼Œå…¼å®¹æŸäº›ç‰¹æ®Šæƒ…å†µ
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="font-weight:bold;text-decoration:underline"&gt;underscores_in_headers&lt;/span&gt; &lt;span style="color:#666;font-weight:bold;font-style:italic"&gt;on&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#888;font-style:italic"&gt;# --- è·å–çœŸå®è®¿å®¢ IP (Cloudflare CDN ä¸“ç”¨é…ç½®) ---
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#888;font-style:italic"&gt;# å› ä¸ºä½ ä½¿ç”¨äº† Cloudflareï¼Œæ‰€ä»¥ä¿ç•™è¿™ä¸¤è¡Œé…ç½®ã€‚
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#888;font-style:italic"&gt;# å®ƒå‘Šè¯‰ Nginx è¦ä¿¡ä»»æ‰€æœ‰ IP å‘æ¥çš„è¯·æ±‚å¤´ï¼Œå¹¶ä» CF-Connecting-IP å¤´ä¸­è·å–çœŸå® IPã€‚
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#888;font-style:italic"&gt;# æ›´å®‰å…¨çš„åšæ³•æ˜¯ä»…ä¿¡ä»»æ¥è‡ª Cloudflare å®˜æ–¹ IP æ®µçš„è¯·æ±‚ï¼Œä½†å½“å‰é…ç½®å¯¹äºç»å¤§å¤šæ•°åœºæ™¯æ˜¯è¶³å¤Ÿä¸”æ–¹ä¾¿çš„ã€‚
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="font-weight:bold;text-decoration:underline"&gt;set_real_ip_from&lt;/span&gt; 0.0.0.0&lt;span style="color:#666;font-style:italic"&gt;/0&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="font-weight:bold;text-decoration:underline"&gt;real_ip_header&lt;/span&gt; &lt;span style="color:#666;font-style:italic"&gt;CF-Connecting-IP&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#888;font-style:italic"&gt;# --- gRPC è¯·æ±‚å¤„ç† (Agent æ ¸å¿ƒæ•°æ®ä¸ŠæŠ¥) ---
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="font-weight:bold;text-decoration:underline"&gt;location&lt;/span&gt; &lt;span style="color:#666;font-style:italic"&gt;^~&lt;/span&gt; &lt;span style="color:#666;font-style:italic"&gt;/proto.NezhaService/&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="font-weight:bold;text-decoration:underline"&gt;grpc_pass&lt;/span&gt; &lt;span style="color:#666;font-style:italic"&gt;grpc://dashboard&lt;/span&gt;; &lt;span style="color:#888;font-style:italic"&gt;# å°† gRPC è¯·æ±‚è½¬å‘ç»™åç«¯æœåŠ¡æ± 
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#888;font-style:italic"&gt;# å°†çœŸå®è®¿å®¢ IP ä¼ é€’ç»™åç«¯ (ä½¿ç”¨ Cloudflare æä¾›çš„ Header)
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="font-weight:bold;text-decoration:underline"&gt;grpc_set_header&lt;/span&gt; &lt;span style="color:#666;font-style:italic"&gt;nz-realip&lt;/span&gt; &lt;span style="color:#666;font-weight:bold;font-style:italic"&gt;$http_CF_Connecting_IP&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#888;font-style:italic"&gt;# å…¶ä»– gRPC ç›¸å…³ä¼˜åŒ– (é€šå¸¸æ— éœ€ä¿®æ”¹)
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="font-weight:bold;text-decoration:underline"&gt;grpc_set_header&lt;/span&gt; &lt;span style="color:#666;font-style:italic"&gt;Host&lt;/span&gt; &lt;span style="color:#666;font-weight:bold;font-style:italic"&gt;$host&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="font-weight:bold;text-decoration:underline"&gt;grpc_read_timeout&lt;/span&gt; &lt;span style="color:#666;font-style:italic"&gt;600s&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="font-weight:bold;text-decoration:underline"&gt;grpc_send_timeout&lt;/span&gt; &lt;span style="color:#666;font-style:italic"&gt;600s&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="font-weight:bold;text-decoration:underline"&gt;grpc_socket_keepalive&lt;/span&gt; &lt;span style="color:#666;font-weight:bold;font-style:italic"&gt;on&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="font-weight:bold;text-decoration:underline"&gt;client_max_body_size&lt;/span&gt; 10m;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="font-weight:bold;text-decoration:underline"&gt;grpc_buffer_size&lt;/span&gt; 4m;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#888;font-style:italic"&gt;# --- WebSocket è¯·æ±‚å¤„ç† (ç½‘é¡µç»ˆç«¯ã€æ–‡ä»¶ç®¡ç†ç­‰å®æ—¶åŠŸèƒ½) ---
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="font-weight:bold;text-decoration:underline"&gt;location&lt;/span&gt; ~&lt;span style="color:#666;font-style:italic"&gt;*&lt;/span&gt; &lt;span style="color:#666;font-style:italic"&gt;^/api/v1/ws/(server|terminal|file)(.*)&lt;/span&gt;$ {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="font-weight:bold;text-decoration:underline"&gt;proxy_pass&lt;/span&gt; &lt;span style="color:#666;font-style:italic"&gt;http://127.0.0.1:8008&lt;/span&gt;; &lt;span style="color:#888;font-style:italic"&gt;# ç›´æ¥è½¬å‘ç»™åç«¯çš„ 8008 ç«¯å£
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#888;font-style:italic"&gt;# --- WebSocket ä»£ç†å…³é”®é…ç½® ---
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="font-weight:bold;text-decoration:underline"&gt;proxy_http_version&lt;/span&gt; 1&lt;span style="color:#666;font-style:italic"&gt;.1&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="font-weight:bold;text-decoration:underline"&gt;proxy_set_header&lt;/span&gt; &lt;span style="color:#666;font-style:italic"&gt;Upgrade&lt;/span&gt; &lt;span style="color:#666;font-weight:bold;font-style:italic"&gt;$http_upgrade&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="font-weight:bold;text-decoration:underline"&gt;proxy_set_header&lt;/span&gt; &lt;span style="color:#666;font-style:italic"&gt;Connection&lt;/span&gt; &lt;span style="color:#666;font-style:italic"&gt;&amp;#34;upgrade&amp;#34;&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#888;font-style:italic"&gt;# å°†çœŸå®è®¿å®¢ IP ä¼ é€’ç»™åç«¯ (ä½¿ç”¨ Cloudflare æä¾›çš„ Header)
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="font-weight:bold;text-decoration:underline"&gt;proxy_set_header&lt;/span&gt; &lt;span style="color:#666;font-style:italic"&gt;nz-realip&lt;/span&gt; &lt;span style="color:#666;font-weight:bold;font-style:italic"&gt;$http_CF_Connecting_IP&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#888;font-style:italic"&gt;# å…¶ä»– Header å’Œè¶…æ—¶é…ç½® (é€šå¸¸æ— éœ€ä¿®æ”¹)
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="font-weight:bold;text-decoration:underline"&gt;proxy_set_header&lt;/span&gt; &lt;span style="color:#666;font-style:italic"&gt;Host&lt;/span&gt; &lt;span style="color:#666;font-weight:bold;font-style:italic"&gt;$host&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="font-weight:bold;text-decoration:underline"&gt;proxy_set_header&lt;/span&gt; &lt;span style="color:#666;font-style:italic"&gt;Origin&lt;/span&gt; &lt;span style="color:#666;font-style:italic"&gt;https://&lt;/span&gt;&lt;span style="color:#666;font-weight:bold;font-style:italic"&gt;$host&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="font-weight:bold;text-decoration:underline"&gt;proxy_read_timeout&lt;/span&gt; &lt;span style="color:#666;font-style:italic"&gt;3600s&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="font-weight:bold;text-decoration:underline"&gt;proxy_send_timeout&lt;/span&gt; &lt;span style="color:#666;font-style:italic"&gt;3600s&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#888;font-style:italic"&gt;# --- Web é¡µé¢è¯·æ±‚å¤„ç† (å…œåº•è§„åˆ™) ---
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="font-weight:bold;text-decoration:underline"&gt;location&lt;/span&gt; &lt;span style="color:#666;font-style:italic"&gt;/&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="font-weight:bold;text-decoration:underline"&gt;proxy_pass&lt;/span&gt; &lt;span style="color:#666;font-style:italic"&gt;http://127.0.0.1:8008&lt;/span&gt;; &lt;span style="color:#888;font-style:italic"&gt;# è½¬å‘ç»™åç«¯çš„ 8008 ç«¯å£
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#888;font-style:italic"&gt;# å°†çœŸå®è®¿å®¢ IP ä¼ é€’ç»™åç«¯ (ä½¿ç”¨ Cloudflare æä¾›çš„ Header)
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="font-weight:bold;text-decoration:underline"&gt;proxy_set_header&lt;/span&gt; &lt;span style="color:#666;font-style:italic"&gt;nz-realip&lt;/span&gt; &lt;span style="color:#666;font-weight:bold;font-style:italic"&gt;$http_CF_Connecting_IP&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#888;font-style:italic"&gt;# å…¶ä»– Header å’Œè¶…æ—¶é…ç½® (é€šå¸¸æ— éœ€ä¿®æ”¹)
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="font-weight:bold;text-decoration:underline"&gt;proxy_set_header&lt;/span&gt; &lt;span style="color:#666;font-style:italic"&gt;Host&lt;/span&gt; &lt;span style="color:#666;font-weight:bold;font-style:italic"&gt;$host&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="font-weight:bold;text-decoration:underline"&gt;proxy_read_timeout&lt;/span&gt; &lt;span style="color:#666;font-style:italic"&gt;3600s&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="font-weight:bold;text-decoration:underline"&gt;proxy_send_timeout&lt;/span&gt; &lt;span style="color:#666;font-style:italic"&gt;3600s&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="font-weight:bold;text-decoration:underline"&gt;proxy_buffer_size&lt;/span&gt; 128k;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="font-weight:bold;text-decoration:underline"&gt;proxy_buffers&lt;/span&gt; 4 256k;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="font-weight:bold;text-decoration:underline"&gt;proxy_busy_buffers_size&lt;/span&gt; 256k;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="font-weight:bold;text-decoration:underline"&gt;proxy_max_temp_file_size&lt;/span&gt; 0;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h4 class="heading" id="å“ªå’é¢æ¿è®¾ç½®"&gt;
 å“ªå’é¢æ¿è®¾ç½®
 &lt;a class="anchor" href="#%e5%93%aa%e5%90%92%e9%9d%a2%e6%9d%bf%e8%ae%be%e7%bd%ae"&gt;#&lt;/a&gt;
&lt;/h4&gt;
&lt;p&gt;åˆ°äº†è¿™ä¸€æ­¥ï¼Œæ­¤æ—¶å°±å¯ä»¥é€šè¿‡åŸŸåè®¿é—®é¢æ¿äº†ï¼Œå¹¶ä¸”å¹¶æ²¡æœ‰æš´éœ²å¤šä½™çš„ç«¯å£ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;é¦–æ¬¡ç™»å½•ç”¨æˆ·ä¸å¯†ç å‡ä¸º&lt;code&gt;admin&lt;/code&gt;,ç¬¬ä¸€æ­¥å…ˆæ”¹ä¸ªé»˜è®¤å¯†ç å†è¯´ã€‚&lt;/li&gt;
&lt;li&gt;å› ä¸ºé¢æ¿å’Œ agent éƒ½å¼€å¯äº† CF CDNï¼Œæˆ‘ä»¬éœ€è¦åœ¨é¢æ¿ç³»ç»Ÿè®¾ç½®é‡Œé¢çš„çœŸå® IP è¯·æ±‚å¤´å¡«å†™&lt;code&gt;CF-Connecting-IP&lt;/code&gt;ï¼Œåå°çš„ç™»å½• IP ä»¥åŠå…¶å®ƒåœ°æ–¹æ‰èƒ½æ­£å¸¸æ˜¾ç¤ºçœŸå® IPã€‚












&lt;figure class=""&gt;

 &lt;div class="img-container" &gt;
 &lt;img loading="lazy" alt="" src="https://webp.050612.xyz/2025/07/20250720202751842.png" &gt;
 &lt;/div&gt;

 
&lt;/figure&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h5 class="heading" id="é¢æ¿å¼€å¯oauth2"&gt;
 é¢æ¿å¼€å¯OAuth2
 &lt;a class="anchor" href="#%e9%9d%a2%e6%9d%bf%e5%bc%80%e5%90%afoauth2"&gt;#&lt;/a&gt;
&lt;/h5&gt;
&lt;p&gt;å®˜æ–¹è¯´æ˜ï¼š&lt;a href="https://nezha.wiki/guide/q14.html#%E8%AE%BE%E7%BD%AE-oauth-2-0-%E7%BB%91%E5%AE%9A"&gt;è®¾ç½® OAuth 2.0 ç»‘å®š | å“ªå’æœåŠ¡å™¨ç›‘æ§&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;æˆ‘é€‰æ‹©ä½¿ç”¨ã€Œgithubã€&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;æ‰“å¼€Â &lt;a href="https://github.com/settings/developers"&gt;GitHubå¼€å‘è€…è®¾ç½®&lt;/a&gt;ï¼Œä¾æ¬¡é€‰æ‹© â€œOAuth Appsâ€ - â€œNew OAuth Appâ€ã€‚&lt;/li&gt;
&lt;li&gt;å¡«å†™ä»¥ä¸‹éœ€è¦çš„å­—æ®µï¼š&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;Application name&lt;/code&gt;ï¼šåº”ç”¨å&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Homepage URL&lt;/code&gt;ï¼šé¢æ¿è®¿é—®åœ°å€ï¼Œä¾‹å¦‚Â &lt;code&gt;https://nezha.example.com&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Authorization callback URL&lt;/code&gt;Â é¢æ¿çš„ Callback åœ°å€ï¼Œè¿™é‡Œåªæ£€æµ‹å‰ç¼€ï¼Œæ‰€ä»¥å¯ä»¥å¡«å†™Â &lt;code&gt;https://nezha.example.com/api/v1/oauth2/callback&lt;/code&gt;ã€‚












&lt;figure class=""&gt;

 &lt;div class="img-container" &gt;
 &lt;img loading="lazy" alt="" src="https://webp.050612.xyz/2025/07/20250720203459271.png" &gt;
 &lt;/div&gt;

 
&lt;/figure&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;ol start="3"&gt;
&lt;li&gt;åœ¨æ–°é¡µé¢ä¸­è®°å½• Client ID å’Œ Client secretsï¼Œå®Œæˆé¢æ¿ OAuth 2.0 é…ç½®ï¼š&lt;/li&gt;
&lt;/ol&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-yaml" data-lang="yaml"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;oauth2:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; GitHub:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; client_id: &lt;span style="color:#666;font-style:italic"&gt;&amp;#34;a-unique-id&amp;#34;&lt;/span&gt; &lt;span style="color:#888;font-style:italic"&gt;# æ›¿æ¢ä½ çš„ Client ID&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; client_secret: &lt;span style="color:#666;font-style:italic"&gt;&amp;#34;a-unique-secret&amp;#34;&lt;/span&gt; &lt;span style="color:#888;font-style:italic"&gt;# æ›¿æ¢ä½ çš„ Client secrets&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; endpoint:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; auth_url: &lt;span style="color:#666;font-style:italic"&gt;&amp;#34;https://github.com/login/oauth/authorize&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; token_url: &lt;span style="color:#666;font-style:italic"&gt;&amp;#34;https://github.com/login/oauth/access_token&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; user_info_url: &lt;span style="color:#666;font-style:italic"&gt;&amp;#34;https://api.github.com/user&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; user_id_path: &lt;span style="color:#666;font-style:italic"&gt;&amp;#34;id&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ol start="4"&gt;
&lt;li&gt;å°†ä»¥ä¸Šé…ç½®æ·»åŠ åˆ°&lt;code&gt;/opt/nezha/dashboard/data/config.yaml&lt;/code&gt;é¢æ¿ï¼ˆDashboardï¼‰ é…ç½®&lt;/li&gt;
&lt;/ol&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;sudo vim /opt/nezha/dashboard/data/config.yaml
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ol start="5"&gt;
&lt;li&gt;é‡å¯é¢æ¿ä½¿æ–°é…ç½®ç”Ÿæ•ˆ&lt;/li&gt;
&lt;/ol&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;./nezha.sh 
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ol start="6"&gt;
&lt;li&gt;æ‰“å¼€ä¸ªäººä¿¡æ¯è®¾ç½®ç»‘å®šgithubï¼Œå¹¶å…³é—­å¯†ç ç™»å½•












&lt;figure class=""&gt;

 &lt;div class="img-container" &gt;
 &lt;img loading="lazy" alt="" src="https://webp.050612.xyz/2025/07/20250720204140554.png" &gt;
 &lt;/div&gt;

 
&lt;/figure&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 class="heading" id="å®‰è£…æ¢é’ˆagentç«¯ç›‘æ§ç«¯"&gt;
 å®‰è£…æ¢é’ˆï¼ˆagentç«¯ã€ç›‘æ§ç«¯ï¼‰
 &lt;a class="anchor" href="#%e5%ae%89%e8%a3%85%e6%8e%a2%e9%92%88agent%e7%ab%af%e7%9b%91%e6%8e%a7%e7%ab%af"&gt;#&lt;/a&gt;
&lt;/h4&gt;
&lt;p&gt;å®˜æ–¹æ•™ç¨‹ï¼š&lt;a href="https://nezha.wiki/guide/agent.html"&gt;å®‰è£… Agent | å“ªå’æœåŠ¡å™¨ç›‘æ§&lt;/a&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;åœ¨Â &lt;code&gt;æœåŠ¡å™¨&lt;/code&gt;Â é¡µé¢ä¸­ï¼Œç‚¹å‡»Â &lt;code&gt;å®‰è£…å‘½ä»¤&lt;/code&gt;Â å¹¶é€‰æ‹©å¯¹åº”æ“ä½œç³»ç»Ÿï¼Œå®‰è£…å‘½ä»¤å°†è‡ªåŠ¨å¤åˆ¶åˆ°ä½ çš„å‰ªè´´æ¿ã€‚&lt;/li&gt;
&lt;li&gt;åœ¨è¢«æ§ç«¯æœåŠ¡å™¨ä¸­è¿è¡Œå®‰è£…å‘½ä»¤ï¼Œç­‰å¾…å®‰è£…å®Œæˆåè¿”å›åˆ°Â &lt;code&gt;æœåŠ¡å™¨&lt;/code&gt;Â é¡µé¢æŸ¥çœ‹æ˜¯å¦ä¸Šçº¿ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;p&gt;åœ¨é¢æ¿æ˜¾ç¤º&lt;code&gt;æš´åŠ›æ”»å‡»ä»£ç†ç§˜å¯†&lt;/code&gt; ä¸ &lt;code&gt;gRPC è®¤è¯å¤±è´¥&lt;/code&gt;ï¼Œä½†æ˜¯åˆèƒ½æ­£å¸¸ç›‘æ§ï¼Œè¿˜ä»¥ä¸ºå‘ç°äº†bugï¼Œä½†æ˜¯æœ€åå‘ç°æ˜¯å› ä¸ºæˆ‘å¤šæ¬¡å®‰è£…agentå¯¼è‡´å‡ºç°äº†ä¸€äº›åƒµå°¸è¿›ç¨‹ã€‚&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨&lt;code&gt;ps -ef | grep nezha-agent&lt;/code&gt; æŸ¥çœ‹ï¼Œå¹¶ä½¿ç”¨ &lt;code&gt;sudo kill&lt;/code&gt; æ€æ‰åƒµå°¸è¿›ç¨‹å°±æ²¡æœ‰äº†ã€‚&lt;/p&gt;
&lt;p&gt;











&lt;figure class=""&gt;

 &lt;div class="img-container" &gt;
 &lt;img loading="lazy" alt="" src="https://webp.050612.xyz/2025/07/20250720212944889.png" &gt;
 &lt;/div&gt;

 
&lt;/figure&gt;
&lt;/p&gt;
&lt;h5 class="heading" id="å®‰å…¨è®¾ç½®-å…³é—­æ¢é’ˆè¿œç¨‹æ§åˆ¶åŠŸèƒ½"&gt;
 å®‰å…¨è®¾ç½®ï¼š å…³é—­æ¢é’ˆè¿œç¨‹æ§åˆ¶åŠŸèƒ½
 &lt;a class="anchor" href="#%e5%ae%89%e5%85%a8%e8%ae%be%e7%bd%ae-%e5%85%b3%e9%97%ad%e6%8e%a2%e9%92%88%e8%bf%9c%e7%a8%8b%e6%8e%a7%e5%88%b6%e5%8a%9f%e8%83%bd"&gt;#&lt;/a&gt;
&lt;/h5&gt;
&lt;ul&gt;
&lt;li&gt;æ‰“å¼€&lt;code&gt;/opt/nezha/agent/config.yml&lt;/code&gt;ï¼ŒæŠŠ &lt;code&gt;disable_command_execute&lt;/code&gt;æ”¹æˆtrue&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;sudo vim /opt/nezha/agent/config.yml
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;é‡å¯agentæœåŠ¡&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;sudo systemctl restart nezha-agent
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h5 class="heading" id="æ·»åŠ å¤‡æ³¨"&gt;
 æ·»åŠ å¤‡æ³¨
 &lt;a class="anchor" href="#%e6%b7%bb%e5%8a%a0%e5%a4%87%e6%b3%a8"&gt;#&lt;/a&gt;
&lt;/h5&gt;
&lt;p&gt;&lt;a href="https://nezhainfojson.pages.dev"&gt;å…¬å¼€å¤‡æ³¨ç”Ÿæˆå™¨&lt;/a&gt;&lt;/p&gt;
&lt;h5 class="heading" id="å¸è½½agentç«¯"&gt;
 å¸è½½agentç«¯
 &lt;a class="anchor" href="#%e5%8d%b8%e8%bd%bdagent%e7%ab%af"&gt;#&lt;/a&gt;
&lt;/h5&gt;
&lt;ol&gt;
&lt;li&gt;åœæ­¢ Agent æœåŠ¡&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;code&gt;sudo systemctl stop nezha-agent&lt;/code&gt;&lt;/p&gt;
&lt;ol start="2"&gt;
&lt;li&gt;ç¦ç”¨å¼€æœºè‡ªå¯&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;é˜²æ­¢æœåŠ¡åœ¨ç³»ç»Ÿå¯åŠ¨æ—¶è‡ªåŠ¨è¿è¡Œã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;sudo systemctl disable nezha-agent&lt;/code&gt;&lt;/p&gt;
&lt;ol start="3"&gt;
&lt;li&gt;åˆ é™¤æœåŠ¡æ–‡ä»¶&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ç§»é™¤Â &lt;code&gt;nezha-agent&lt;/code&gt;Â çš„æœåŠ¡é…ç½®æ–‡ä»¶ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;sudo rm /etc/systemd/system/nezha-agent.service&lt;/code&gt;&lt;/p&gt;
&lt;ol start="4"&gt;
&lt;li&gt;åˆ é™¤ Agent æ–‡ä»¶&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;åˆ é™¤å®‰è£…ç›®å½•ä¸­çš„ Agent æ–‡ä»¶ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;sudo rm -rf /opt/nezha/agent&lt;/code&gt;&lt;/p&gt;
&lt;ol start="5"&gt;
&lt;li&gt;é‡æ–°åŠ è½½ systemd é…ç½®&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ç¡®ä¿ç³»ç»ŸæœåŠ¡ç®¡ç†å™¨åŠ è½½æœ€æ–°çš„é…ç½®ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;sudo systemctl daemon-reload&lt;/code&gt;&lt;/p&gt;
&lt;ol start="6"&gt;
&lt;li&gt;æ£€æŸ¥æ®‹ç•™è¿›ç¨‹
ç¡®è®¤æ²¡æœ‰é—ç•™çš„Â &lt;code&gt;nezha-agent&lt;/code&gt;Â è¿›ç¨‹åœ¨è¿è¡Œã€‚å¦‚æœå‘ç°ä»æœ‰ç›¸å…³è¿›ç¨‹è¿è¡Œï¼Œè¯·ä½¿ç”¨Â &lt;code&gt;sudo kill&lt;/code&gt;Â å‘½ä»¤ç»ˆæ­¢ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;code&gt;ps -ef | grep nezha-agent&lt;/code&gt;&lt;/p&gt;
&lt;ol start="7"&gt;
&lt;li&gt;åˆ é™¤æ—¥å¿—æ–‡ä»¶ï¼ˆå¯é€‰ï¼‰&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å¦‚æœéœ€è¦ï¼Œæ‚¨å¯ä»¥åˆ é™¤ä¸Â &lt;code&gt;nezha-agent&lt;/code&gt;Â ç›¸å…³çš„æ—¥å¿—æ–‡ä»¶ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;sudo rm -rf /var/log/nezha&lt;/code&gt;&lt;/p&gt;
&lt;h2 class="heading" id="å…³é—­-ipv6--å¼€å¯bbr"&gt;
 å…³é—­ ipv6 &amp;amp; å¼€å¯bbr
 &lt;a class="anchor" href="#%e5%85%b3%e9%97%ad-ipv6--%e5%bc%80%e5%90%afbbr"&gt;#&lt;/a&gt;
&lt;/h2&gt;
&lt;p&gt;æˆ‘çš„ç½‘ç»œç¯å¢ƒä¸ºæ ¡å›­ç½‘ï¼Œå¯¹ipv6çš„æ”¯æŒå¹¶ä¸å¥½ï¼›&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="font-weight:bold;font-style:italic"&gt;echo&lt;/span&gt; &lt;span style="color:#666;font-style:italic"&gt;&amp;#34;net.core.default_qdisc=fq&amp;#34;&lt;/span&gt; &amp;gt;&amp;gt; /etc/sysctl.conf
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="font-weight:bold;font-style:italic"&gt;echo&lt;/span&gt; &lt;span style="color:#666;font-style:italic"&gt;&amp;#34;net.ipv4.tcp_congestion_control=bbr&amp;#34;&lt;/span&gt; &amp;gt;&amp;gt; /etc/sysctl.conf
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;sysctl -p
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;lsmod | grep bbr &lt;span style="color:#888;font-style:italic"&gt;# æŸ¥çœ‹æ˜¯å¦æˆåŠŸå¼€å¯BBR&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#888;font-style:italic"&gt;# 1. å°†é…ç½®æ·»åŠ åˆ° /etc/sysctl.conf (ä½¿ç”¨ tee -a ç¡®ä¿å®‰å…¨è¿½åŠ )&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="font-weight:bold;font-style:italic"&gt;echo&lt;/span&gt; &lt;span style="color:#666;font-style:italic"&gt;&amp;#34;net.ipv6.conf.all.disable_ipv6 = 1&amp;#34;&lt;/span&gt; | sudo tee -a /etc/sysctl.conf
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="font-weight:bold;font-style:italic"&gt;echo&lt;/span&gt; &lt;span style="color:#666;font-style:italic"&gt;&amp;#34;net.ipv6.conf.default.disable_ipv6 = 1&amp;#34;&lt;/span&gt; | sudo tee -a /etc/sysctl.conf
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="font-weight:bold;font-style:italic"&gt;echo&lt;/span&gt; &lt;span style="color:#666;font-style:italic"&gt;&amp;#34;net.ipv6.conf.lo.disable_ipv6 = 1&amp;#34;&lt;/span&gt; | sudo tee -a /etc/sysctl.conf
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#888;font-style:italic"&gt;# 2. ä½¿é…ç½®ç«‹å³ç”Ÿæ•ˆ (å¹¶åŠ è½½æ‰€æœ‰ /etc/sysctl.conf ä¸­çš„é…ç½®)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;sudo sysctl -p
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#888;font-style:italic"&gt;# 3. (å¯é€‰) é‡å¯ç³»ç»Ÿä»¥ç¡®ä¿æ‰€æœ‰æœåŠ¡éƒ½ä»¥æ–°é…ç½®å¯åŠ¨&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#888;font-style:italic"&gt;# sudo reboot&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</description></item><item><title>åŸŸåç®¡ç†ï¼šCloudflare DNSæ‰˜ç®¡ä¸SSLè¯ä¹¦é…ç½®</title><link>https://blog.yzyy.de/explore/%E6%9C%8D%E5%8A%A1%E5%99%A8/%E5%9F%9F%E5%90%8D%E7%9B%B8%E5%85%B3/</link><pubDate>Wed, 08 May 2024 00:00:00 +0000</pubDate><guid>https://blog.yzyy.de/explore/%E6%9C%8D%E5%8A%A1%E5%99%A8/%E5%9F%9F%E5%90%8D%E7%9B%B8%E5%85%B3/</guid><description>&lt;h1 class="heading" id="åŸŸåç›¸å…³"&gt;
 åŸŸåç›¸å…³
 &lt;a class="anchor" href="#%e5%9f%9f%e5%90%8d%e7%9b%b8%e5%85%b3"&gt;#&lt;/a&gt;
&lt;/h1&gt;
&lt;p&gt;æœ¬ç¯‡è®°å½•ä¸€ä¸‹åŸŸåç›¸å…³çš„æ“ä½œå§ï¼ŒåŒ…æ‹¬åˆ°cfæ‰˜ç®¡ï¼Œç”³è¯·ä¸å®‰è£…SSLè¯ä¹¦ç­‰ã€‚&lt;/p&gt;
&lt;h2 class="heading" id="dnsè§£æå’Œå°†åŸŸåæ‰˜ç®¡åˆ°cloudflare"&gt;
 DNSè§£æå’Œå°†åŸŸåæ‰˜ç®¡åˆ°cloudflare
 &lt;a class="anchor" href="#dns%e8%a7%a3%e6%9e%90%e5%92%8c%e5%b0%86%e5%9f%9f%e5%90%8d%e6%89%98%e7%ae%a1%e5%88%b0cloudflare"&gt;#&lt;/a&gt;
&lt;/h2&gt;
&lt;p&gt;æ„Ÿè°¢&lt;a href="https://sarakale.top/blog/posts/3a730d01/#%E5%9F%9F%E5%90%8D%E6%B3%A8%E5%86%8C"&gt;Namesilo/CloudflareåŸŸåæ³¨å†Œå’Œè§£æè®¾ç½®æ•™ç¨‹ | SaraKale&amp;rsquo;s blog&lt;/a&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;åˆ°Â &lt;a href="https://www.cloudflare.com/"&gt;Cloudflare&lt;/a&gt;Â æ·»åŠ ä½ çš„ç«™ç‚¹ï¼Œé€‰æ‹© Free å…è´¹è®¡åˆ’ã€‚











&lt;figure class=""&gt;

 &lt;div class="img-container" &gt;
 &lt;img loading="lazy" alt="Pasted%20image%2020250113153620" src="https://webp.050612.xyz/2025/02/Pasted%20image%2020250113153620.png" &gt;
 &lt;/div&gt;

 
&lt;/figure&gt;
&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;åœ¨ä¸‹ä¸€é¡µä¸Šï¼Œæ‚¨éœ€è¦é€‰æ‹©é¦–é€‰çš„ CDN è®¡åˆ’ã€‚é€‰æ‹© Free è®¡åˆ’ã€‚å•å‡»å…¶å›¾æ ‡å’Œ&lt;strong&gt;ç¡®è®¤è®¡åˆ’&lt;/strong&gt;æŒ‰é’®ç»§ç»­ï¼š











&lt;figure class=""&gt;

 &lt;div class="img-container" &gt;
 &lt;img loading="lazy" alt="Pasted%20image%2020250113153644" src="https://webp.050612.xyz/2025/02/Pasted%20image%2020250113153644.png" &gt;
 &lt;/div&gt;

 
&lt;/figure&gt;
&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å¦‚æœä¹‹å‰å·²ç»åšè¿‡è§£æå°±å¯ä»¥çœ‹åˆ°ç°æœ‰çš„DNSè®°å½•ã€‚











&lt;figure class=""&gt;

 &lt;div class="img-container" &gt;
 &lt;img loading="lazy" alt="Pasted%20image%2020250113153828" src="https://webp.050612.xyz/2025/02/Pasted%20image%2020250113153828.png" &gt;
 &lt;/div&gt;

 
&lt;/figure&gt;
&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;è¿™é‡Œå…ˆä¸ç”¨ç®¡ï¼Œç»§ç»­ä¸‹ä¸€æ­¥ã€‚











&lt;figure class=""&gt;

 &lt;div class="img-container" &gt;
 &lt;img loading="lazy" alt="Pasted%20image%2020250113153859" src="https://webp.050612.xyz/2025/02/Pasted%20image%2020250113153859.png" &gt;
 &lt;/div&gt;

 
&lt;/figure&gt;
&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å¯ä»¥çœ‹åˆ°ç»™äº†ä¸¤ä¸ªNSæœåŠ¡å™¨ï¼Œå›åˆ°åŸŸåæä¾›å•†åå°æ›´æ”¹NSæœåŠ¡å™¨ã€‚











&lt;figure class=""&gt;

 &lt;div class="img-container" &gt;
 &lt;img loading="lazy" alt="Pasted%20image%2020250113153945" src="https://webp.050612.xyz/2025/02/Pasted%20image%2020250113153945.png" &gt;
 &lt;/div&gt;

 
&lt;/figure&gt;
&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;NameCheapæ›´æ”¹nsæœåŠ¡å™¨å‚è€ƒå®˜æ–¹æ•™ç¨‹&lt;a href="https://www.namecheap.com/support/knowledgebase/article.aspx/9607/2210/how-to-set-up-dns-records-for-your-domain-in-a-cloudflare-account/"&gt;Title Unavailable | Site Unreachable&lt;/a&gt;ï¼Œå…¶ä»–åŸŸåæœåŠ¡å•†å¤§åŒå°å¼‚ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 class="heading" id="ç”³è¯·tlssslè¯ä¹¦"&gt;
 ç”³è¯·TLS\SSLè¯ä¹¦
 &lt;a class="anchor" href="#%e7%94%b3%e8%af%b7tlsssl%e8%af%81%e4%b9%a6"&gt;#&lt;/a&gt;
&lt;/h2&gt;
&lt;p&gt;æœ‰ä¸¤ç§æ–¹å¼ï¼Œç›®å‰é€‰æ‹©cloudflareå¼€å¯ä»£ç†çš„æ¨¡å¼&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;è‡ªåŠ¨ç»­ç­¾ï¼š&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨cloudflareçš„æœåŠ¡ï¼Œå¼€å¯å°é»„äº‘ï¼Œå°±å¯ä»¥ä½¿ç”¨ä¸€ç§æ³›åŸŸåè¯ä¹¦ï¼Œåªèƒ½å½“åšæºç«™å’Œcloudflareæ¡æ‰‹çš„å‡­è¯ï¼Œå…¶ä»–çš„ä¸è®¤ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 class="heading" id="cloudflareçš„æœåŠ¡"&gt;
 cloudflareçš„æœåŠ¡
 &lt;a class="anchor" href="#cloudflare%e7%9a%84%e6%9c%8d%e5%8a%a1"&gt;#&lt;/a&gt;
&lt;/h3&gt;
&lt;p&gt;ä¸‹é¢é‡‡ç”¨cloudflareçš„æœåŠ¡ï¼Œä¹Ÿæ˜¯ä¸€ä»½cloudflareçš„åˆæ­¥æ¢ç´¢çš„è®°å½•&lt;/p&gt;
&lt;h4 class="heading" id="dnsç®¡ç†"&gt;
 DNSç®¡ç†
 &lt;a class="anchor" href="#dns%e7%ae%a1%e7%90%86"&gt;#&lt;/a&gt;
&lt;/h4&gt;
&lt;p&gt;å¯ä»¥åœ¨DNSç•Œé¢ç®¡ç†DNSè§£æï¼Œä»¥åŠç®¡ç†æ˜¯å¦å¼€å¯å°é»„äº‘ä»£ç†











&lt;figure class=""&gt;

 &lt;div class="img-container" &gt;
 &lt;img loading="lazy" alt="e%2020250113163808" src="https://webp.050612.xyz/2025/02/Pasted%20image%2020250113163808.png" &gt;
 &lt;/div&gt;

 
&lt;/figure&gt;
&lt;/p&gt;
&lt;h4 class="heading" id="ssltlsè¯ä¹¦"&gt;
 SSL\TLSè¯ä¹¦
 &lt;a class="anchor" href="#ssltls%e8%af%81%e4%b9%a6"&gt;#&lt;/a&gt;
&lt;/h4&gt;
&lt;p&gt;











&lt;figure class=""&gt;

 &lt;div class="img-container" &gt;
 &lt;img loading="lazy" alt="Pasted%20image%2020250113164004" src="https://webp.050612.xyz/2025/02/Pasted%20image%2020250113164004.png" &gt;
 &lt;/div&gt;

 
&lt;/figure&gt;
&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;çµæ´»ï¼šwebæµè§ˆå™¨å’Œcloudflareä¹‹é—´é‡‡ç”¨443HTTPSï¼Œcloudflareå’Œcloudflareä¹‹é—´é‡‡ç”¨80HTTP&lt;/li&gt;
&lt;li&gt;å®Œå…¨ï¼šä½¿ç”¨å…¶ä»–æœªå…¬å¼€è®¤è¯çš„SSLè¯ä¹¦æ—¶é‡‡ç”¨ï¼ŒæºæœåŠ¡å™¨å¿…é¡»é…ç½® SSL è¯ä¹¦ï¼Œä½† CloudflareÂ &lt;strong&gt;ä¸éªŒè¯è¯ä¹¦çš„æœ‰æ•ˆæ€§&lt;/strong&gt;ï¼ˆä¾‹å¦‚ï¼Œå¯ä»¥æ˜¯è‡ªç­¾åè¯ä¹¦æˆ–è¿‡æœŸè¯ä¹¦ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;å®Œå…¨ï¼ˆä¸¥æ ¼ï¼‰ï¼šå®¢æˆ·ç«¯åˆ° Cloudflareï¼šHTTPSï¼ˆä½¿ç”¨ Cloudflare Universal SSL è¯ä¹¦ï¼‰ã€‚ Cloudflare åˆ°æºæœåŠ¡å™¨ï¼š&lt;strong&gt;HTTPSï¼ˆåŠ å¯†ï¼‰&lt;/strong&gt;ã€‚æºæœåŠ¡å™¨å¿…é¡»é…ç½®æœ‰æ•ˆçš„ SSL è¯ä¹¦ï¼Œè¯¥è¯ä¹¦å¿…é¡»ç”±&lt;strong&gt;å—ä¿¡ä»»çš„ CA æœºæ„ç­¾å‘&lt;/strong&gt;æˆ–ä¸ºÂ &lt;strong&gt;Cloudflare Origin CA è¯ä¹¦&lt;/strong&gt;ï¼Œå¹¶ä¸”è¯ä¹¦ä¸­çš„åŸŸåå¿…é¡»ä¸è¯·æ±‚çš„åŸŸååŒ¹é…ã€‚Cloudflare ä¼šéªŒè¯è¯ä¹¦çš„æœ‰æ•ˆæ€§ï¼ŒåŒ…æ‹¬æœ‰æ•ˆæœŸã€é¢å‘æœºæ„å’ŒåŸŸåã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¯ä»¥åœ¨æºæœåŠ¡å™¨é¡µé¢ç”³è¯·Â &lt;strong&gt;Cloudflare Origin CA è¯ä¹¦&lt;/strong&gt;ï¼Œå¹¶å°†è¯¥è¯ä¹¦æ”¾åˆ°æœåŠ¡å™¨ä¸Šã€‚æºè¯ä¹¦ä»…å¯¹Cloudflareä¸æºæœåŠ¡å™¨ä¹‹é—´çš„åŠ å¯†æœ‰æ•ˆã€‚&lt;/p&gt;
&lt;p&gt;











&lt;figure class=""&gt;

 &lt;div class="img-container" &gt;
 &lt;img loading="lazy" alt="Pasted%20image%2020250113164800" src="https://webp.050612.xyz/2025/02/Pasted%20image%2020250113164800.png" &gt;
 &lt;/div&gt;

 
&lt;/figure&gt;
&lt;/p&gt;
&lt;h4 class="heading" id="under-attack"&gt;
 Under Attack
 &lt;a class="anchor" href="#under-attack"&gt;#&lt;/a&gt;
&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;å¯ä»¥åœ¨å®‰å…¨æ€§-è®¾ç½®é‡Œæ‰“å¼€Under Attackæ¨¡å¼ï¼Œå¼ºåˆ¶å¼€å¯éªŒè¯ã€‚











&lt;figure class=""&gt;

 &lt;div class="img-container" &gt;
 &lt;img loading="lazy" alt="Pasted%20image%2020250113165205" src="https://webp.050612.xyz/2025/02/Pasted%20image%2020250113165205.png" &gt;
 &lt;/div&gt;

 
&lt;/figure&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 class="heading" id="ä½¿ç”¨-acmesh-dns-éªŒè¯çš„æ–¹å¼ç­¾å‘-letsencrypt-è¯ä¹¦"&gt;
 ä½¿ç”¨ acme.sh DNS éªŒè¯çš„æ–¹å¼ç­¾å‘ Let&amp;rsquo;sEncrypt è¯ä¹¦
 &lt;a class="anchor" href="#%e4%bd%bf%e7%94%a8-acmesh-dns-%e9%aa%8c%e8%af%81%e7%9a%84%e6%96%b9%e5%bc%8f%e7%ad%be%e5%8f%91-letsencrypt-%e8%af%81%e4%b9%a6"&gt;#&lt;/a&gt;
&lt;/h3&gt;
&lt;p&gt;å‚è€ƒï¼š&lt;a href="https://blog.uuphy.com/posts/%E9%85%8D%E7%BD%AE-acme.sh-%E5%85%8D%E8%B4%B9%E8%87%AA%E5%8A%A8%E7%AD%BE%E5%8F%91%E6%B3%9B%E5%9F%9F%E5%90%8D%E8%AF%81%E4%B9%A6/"&gt;ä½¿ç”¨ acme.sh DNS éªŒè¯çš„æ–¹å¼ç­¾å‘ Let&amp;rsquo;sEncrypt è¯ä¹¦&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href="https://acme.sh/"&gt;acme.sh&lt;/a&gt; æ˜¯ä¸€ä¸ªç”¨æ¥è‡ªåŠ¨è·å–å’Œç®¡ç† SSL/TLS è¯ä¹¦çš„å¼€æºè„šæœ¬ï¼Œå¯ä»¥ä» Letâ€™s Encrypt ç­‰å¤šä¸ª CA è·å–å…è´¹çš„è¯ä¹¦ã€‚ç»“åˆä½¿ç”¨ Cloudflare DNS éªŒè¯çš„æ¨¡å¼ç”³è¯·æ³›åŸŸåè¯ä¹¦ï¼Œå¹¶è‡ªåŠ¨ç»­ç­¾ã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;2025-07-17æ›´æ–°&lt;/p&gt;
&lt;p&gt;æ–¹æ¡ˆæœ‰æ”¹è¿›ï¼Œè¯·çœ‹&lt;a href="https://blog.yzyy.de/post/%E6%96%B0%E8%B4%AD%E4%B8%80%E5%8F%B08gb%E7%9A%84vds/#è‡ªåŠ¨ç»­ç­¾çš„æ–¹æ¡ˆæ”¹è¿›"&gt;æ–°è´­ä¸€å°8GBçš„VDS&lt;/a&gt;ã€‚
ä¸»è¦ä¼˜åŒ–äº†ä¸€å°vpså¤šä¸ªåŸŸåçš„é…ç½®æ–¹å¼ï¼Œå¦‚æœæ˜¯å•ä¸ªåŸŸåï¼Œä»¥ä¸‹æ–¹æ¡ˆç›¸åŒã€‚&lt;/p&gt;
&lt;h4 class="heading" id="cloudflare-api"&gt;
 Cloudflare API
 &lt;a class="anchor" href="#cloudflare-api"&gt;#&lt;/a&gt;
&lt;/h4&gt;
&lt;p&gt;ä½¿ç”¨ Cloudflare DNS æ¨¡å¼éœ€è¦å‡†å¤‡:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Zone ID&lt;/li&gt;
&lt;li&gt;Account ID&lt;/li&gt;
&lt;li&gt;API Token&lt;/li&gt;
&lt;/ul&gt;
&lt;h5 class="heading" id="è·å–-zone-id-account-id"&gt;
 è·å– Zone ID, Account ID
 &lt;a class="anchor" href="#%e8%8e%b7%e5%8f%96-zone-id-account-id"&gt;#&lt;/a&gt;
&lt;/h5&gt;
&lt;p&gt;è¿™ä¸¤ç§ ID ç›´æ¥åœ¨ Overview é¡µå°±èƒ½æ‰¾åˆ°ã€‚&lt;/p&gt;
&lt;p&gt;











&lt;figure class=""&gt;

 &lt;div class="img-container" &gt;
 &lt;img loading="lazy" alt="image" src="https://webp.050612.xyz/2025/02/2edb816d28456e59ad4da2b02c3ff69450847554_2_690x370.png" &gt;
 &lt;/div&gt;

 
&lt;/figure&gt;
&lt;/p&gt;
&lt;h5 class="heading" id="è·å–-api-token"&gt;
 è·å– API Token
 &lt;a class="anchor" href="#%e8%8e%b7%e5%8f%96-api-token"&gt;#&lt;/a&gt;
&lt;/h5&gt;
&lt;p&gt;Overview é¡µç‚¹å‡» &lt;code&gt;è·å–æ‚¨çš„ API ä»¤ç‰Œ&lt;/code&gt; è¿›å…¥ API Tokens é¡µã€‚&lt;/p&gt;
&lt;p&gt;ç‚¹å‡» API Tokens é¡¹æ—è¾¹ &lt;code&gt;åˆ›å»ºä»¤ç‰Œ&lt;/code&gt; æŒ‰é’®ï¼Œæ¥ç€é€‰æ‹© &lt;code&gt;ç¼–è¾‘åŒºåŸŸ DNS&lt;/code&gt; çš„æ¨¡æ¿ï¼Œç‚¹å‡» &lt;code&gt;ä½¿ç”¨æ¨¡æ¿&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;











&lt;figure class=""&gt;

 &lt;div class="img-container" &gt;
 &lt;img loading="lazy" alt="image" src="https://webp.050612.xyz/2025/02/e15d8a0a1de821faab5355e610b581016975b974_2_690x265.png" &gt;
 &lt;/div&gt;

 
&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;











&lt;figure class=""&gt;

 &lt;div class="img-container" &gt;
 &lt;img loading="lazy" alt="image" src="https://webp.050612.xyz/2025/02/42f87595d27a6fb3ed1fe329934517f5416920c6_2_690x210.png" &gt;
 &lt;/div&gt;

 
&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;&lt;code&gt;åŒºåŸŸèµ„æº&lt;/code&gt; é‡Œé€‰æ‹©éœ€è¦ç­¾å‘çš„åŸŸåï¼Œ&lt;/p&gt;
&lt;p&gt;åœ¨ &lt;code&gt;å®¢æˆ·ç«¯ IP åœ°å€ç­›é€‰&lt;/code&gt; é‡Œå»ºè®®å†™ä¸‹ acme.sh æ‰€åœ¨çš„ä¸»æœºåšä¸ºç™½åå•ï¼Œéœ€è¦æ³¨æ„ï¼Œå¦‚æœæœåŠ¡å™¨æœ‰ ipv6 åœ°å€ï¼Œåˆ™ä¹Ÿéœ€è¦æ·»åŠ ï¼Œå› ä¸ºæœ‰å¯èƒ½ä¼š ipv6 ä¼˜å…ˆè®¿é—®ã€‚&lt;/p&gt;
&lt;p&gt;å‡» &lt;code&gt;ç»§ç»­ä»¥æ˜¾ç¤ºæ‘˜è¦&lt;/code&gt; , ç¡®è®¤æ²¡é—®é¢˜åæœ€åç‚¹å‡» &lt;code&gt;åˆ›å»ºä»¤ç‰Œ&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;











&lt;figure class=""&gt;

 &lt;div class="img-container" &gt;
 &lt;img loading="lazy" alt="image" src="https://webp.050612.xyz/2025/02/e88966d6049c27c31c632f9471ec1b79be287b59_2_510x499.png" &gt;
 &lt;/div&gt;

 
&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;æ­¤æ—¶å°±ä¼šå‡ºç°ä¸€ä¸ª Token,ï¼Œå³ CF_Tokenï¼Œæ‹·è´å¤‡ç”¨ã€‚&lt;/p&gt;
&lt;p&gt;











&lt;figure class=""&gt;

 &lt;div class="img-container" &gt;
 &lt;img loading="lazy" alt="image" src="https://webp.050612.xyz/2025/02/ca6093ea6bf83325809ea6179d4239ae2c9818cc_2_690x404.png" &gt;
 &lt;/div&gt;

 
&lt;/figure&gt;
&lt;/p&gt;
&lt;h5 class="heading" id="æ³¨æ„"&gt;
 æ³¨æ„
 &lt;a class="anchor" href="#%e6%b3%a8%e6%84%8f"&gt;#&lt;/a&gt;
&lt;/h5&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ³¨æ„æ–°å¢åŸŸåæ—¶ï¼Œéœ€è¦æ›´æ”¹API Tokenæ‰€åŒ…å«çš„åŸŸå&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ³¨æ„æœ‰å¤šå°æœºå™¨æ—¶ï¼Œéœ€è¦æ–°å¢æœºå™¨çš„IPåˆ°ç™½åå•&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;











&lt;figure class=""&gt;

 &lt;div class="img-container" &gt;
 &lt;img loading="lazy" alt="update_cf_api_token" src="https://webp.050612.xyz/2025/02/update_cf_api_token.png" &gt;
 &lt;/div&gt;

 
&lt;/figure&gt;













&lt;figure class=""&gt;

 &lt;div class="img-container" &gt;
 &lt;img loading="lazy" alt="cf-api-token-ip" src="https://webp.050612.xyz/2025/02/cf-api-token-ip.png" &gt;
 &lt;/div&gt;

 
&lt;/figure&gt;
&lt;/p&gt;
&lt;h4 class="heading" id="ä¸€ä¸ªå®Œæ•´çš„æ¼”ç¤º"&gt;
 ä¸€ä¸ªå®Œæ•´çš„æ¼”ç¤º
 &lt;a class="anchor" href="#%e4%b8%80%e4%b8%aa%e5%ae%8c%e6%95%b4%e7%9a%84%e6%bc%94%e7%a4%ba"&gt;#&lt;/a&gt;
&lt;/h4&gt;
&lt;p&gt;æ„Ÿè°¢ï¼š&lt;a href="https://atpx.com/blog/auto-update-ssl-with-acme/"&gt;ä½¿ç”¨ acme.sh è‡ªåŠ¨ç­¾å‘å’Œæ›´æ–°è¯ä¹¦ - atpX&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;ä¸ºäº†ä½¿æ•´ä¸ªæµç¨‹æ›´åŠ æ¸…æ™°ï¼ˆ&lt;del&gt;æ–¹ä¾¿è‡ªå·±æ“ä½œ&lt;/del&gt;ï¼‰ï¼Œè¿™é‡Œè´´ä¸€ä¸ªè‡ªå·±å¹³æ—¶ä½¿ç”¨ acme.sh ç”³è¯·è¯ä¹¦çš„å®Œæ•´æµç¨‹ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ç”³è¯·æ–¹å¼ï¼šDNS è®¤è¯ï¼ˆä½¿ç”¨ Cloudflare APIï¼‰&lt;/li&gt;
&lt;li&gt;ç”³è¯·è¯ä¹¦ CAï¼šLetâ€™s Encrypt&lt;/li&gt;
&lt;li&gt;ç”³è¯·è¯ä¹¦ç±»å‹ï¼šRSA + ECC ä¸¤ä¸ªé€šé…ç¬¦è¯ä¹¦&lt;/li&gt;
&lt;li&gt;**åŒä¸€å°ä¸»æœºå¤šä¸ªåŸŸåçš„æƒ…å†µ&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;åç»­ç”³è¯·è¯ä¹¦çš„å‘½ä»¤ï¼Œéƒ½æ˜¯åœ¨ root ç”¨æˆ·ä¸‹æ‰§è¡Œçš„ï¼Œè¯·å…ˆä½¿ç”¨ &lt;code&gt;su&lt;/code&gt; åˆ‡æ¢åˆ° root ç”¨æˆ·ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#888;font-style:italic"&gt;# è¿›å…¥rootç”¨æˆ·&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;su
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#888;font-style:italic"&gt;# å®‰è£… acme.sh&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;curl https://get.acme.sh | sh
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#888;font-style:italic"&gt;# åˆ·æ–° shell å˜é‡é…ç½®&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="font-weight:bold;font-style:italic"&gt;source&lt;/span&gt; ~/.bashrc
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#888;font-style:italic"&gt;# å¯¼å…¥ Cloudflare API Token&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="font-weight:bold;font-style:italic"&gt;export&lt;/span&gt; &lt;span style="color:#666;font-weight:bold;font-style:italic"&gt;CF_Token&lt;/span&gt;=&lt;span style="color:#666;font-style:italic"&gt;&amp;#34;xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="font-weight:bold;font-style:italic"&gt;export&lt;/span&gt; &lt;span style="color:#666;font-weight:bold;font-style:italic"&gt;CF_Account_ID&lt;/span&gt;=&lt;span style="color:#666;font-style:italic"&gt;&amp;#34;xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="font-weight:bold;font-style:italic"&gt;export&lt;/span&gt; &lt;span style="color:#666;font-weight:bold;font-style:italic"&gt;CF_Zone_ID&lt;/span&gt;=&lt;span style="color:#666;font-style:italic"&gt;&amp;#34;xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#888;font-style:italic"&gt;# è®¾ç½®é»˜è®¤ CA ä¸º Let&amp;#39;s Encrypt&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;acme.sh --set-default-ca --server letsencrypt
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#888;font-style:italic"&gt;# ç­¾å‘ RSA è¯ä¹¦&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;acme.sh --issue --dns dns_cf -d xxx.xyz -d *.xxx.xyz --keylength 2048
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#888;font-style:italic"&gt;# å®‰è£… RSA è¯ä¹¦åˆ°æŒ‡å®šè·¯å¾„&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;acme.sh --install-cert -d domain.tld &lt;span style="color:#666;font-style:italic"&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;--key-file /path/to/ssl/domain.tld_private.key &lt;span style="color:#666;font-style:italic"&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;--fullchain-file /path/to/ssl/domain.tld_chain.pem &lt;span style="color:#666;font-style:italic"&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;--capath /path/to/ssl/domain.tld_ca.pem &lt;span style="color:#666;font-style:italic"&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;--reloadcmd &lt;span style="color:#666;font-style:italic"&gt;&amp;#34;service nginx reload&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#888;font-style:italic"&gt;# ç­¾å‘ ECC è¯ä¹¦ï¼Œè‹¥ä¸éœ€è¦ï¼Œè·³è¿‡å³å¯&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;acme.sh --issue --dns dns_cf -d domain.tld -d *.domain.tld --keylength ec-256
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#888;font-style:italic"&gt;# å®‰è£… ECC è¯ä¹¦åˆ°æŒ‡å®šè·¯å¾„&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;acme.sh --install-cert -d domain.tld --ecc &lt;span style="color:#666;font-style:italic"&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;--key-file /path/to/ssl/ecc_domain.tld_private.key &lt;span style="color:#666;font-style:italic"&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;--fullchain-file /path/to/ssl/ecc_domain.tld_chain.pem &lt;span style="color:#666;font-style:italic"&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;--capath /path/to/ssl/ecc_domain.tld_ca.pem &lt;span style="color:#666;font-style:italic"&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;--reloadcmd &lt;span style="color:#666;font-style:italic"&gt;&amp;#34;service nginx reload&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#888;font-style:italic"&gt;###############################ç¬¬äºŒä¸ªåŸŸå#####################################################################&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#888;font-style:italic"&gt;# å–æ¶ˆç¯å¢ƒå˜é‡&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="font-weight:bold;font-style:italic"&gt;unset&lt;/span&gt; CF_Token
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="font-weight:bold;font-style:italic"&gt;unset&lt;/span&gt; CF_Account_ID
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="font-weight:bold;font-style:italic"&gt;unset&lt;/span&gt; CF_Zone_ID
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#888;font-style:italic"&gt;# è‡³æ­¤è¯ä¹¦å®‰è£…å®Œæ¯•&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#888;font-style:italic"&gt;# ä¸‹é¢æ˜¯åŒä¸€å°ä¸»æœºç”³è¯·ç¬¬äºŒä¸ªåŸŸåè¯ä¹¦&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#888;font-style:italic"&gt;# å¯¼å…¥å¦ä¸€ä¸ª Cloudflare API Token&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="font-weight:bold;font-style:italic"&gt;export&lt;/span&gt; &lt;span style="color:#666;font-weight:bold;font-style:italic"&gt;CF_Token&lt;/span&gt;=&lt;span style="color:#666;font-style:italic"&gt;&amp;#34;xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="font-weight:bold;font-style:italic"&gt;export&lt;/span&gt; &lt;span style="color:#666;font-weight:bold;font-style:italic"&gt;CF_Account_ID&lt;/span&gt;=&lt;span style="color:#666;font-style:italic"&gt;&amp;#34;xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="font-weight:bold;font-style:italic"&gt;export&lt;/span&gt; &lt;span style="color:#666;font-weight:bold;font-style:italic"&gt;CF_Zone_ID&lt;/span&gt;=&lt;span style="color:#666;font-style:italic"&gt;&amp;#34;xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#888;font-style:italic"&gt;# æ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ä½œä¸º config homeï¼Œé»˜è®¤ä¼šæŠŠæ‰€æœ‰æ–‡ä»¶å­˜åœ¨è¿™é‡Œ&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;mkdir /root/.acme2
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#888;font-style:italic"&gt;# è®¾ç½®é»˜è®¤ CA ä¸º Let&amp;#39;s Encrypt&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;acme.sh --config-home /root/.acme2 --set-default-ca --server letsencrypt
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#888;font-style:italic"&gt;# ç­¾å‘ RSA è¯ä¹¦&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;acme.sh --config-home /root/.acme2 --issue --dns dns_cf -d domain.tld -d *.domain.tld --keylength 2048
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#888;font-style:italic"&gt;# å®‰è£… RSA è¯ä¹¦åˆ°æŒ‡å®šè·¯å¾„&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;acme.sh --config-home /root/.acme2 &lt;span style="color:#666;font-style:italic"&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;--install-cert -d domain.tld &lt;span style="color:#666;font-style:italic"&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;--key-file /path/to/ssl/domain.tld_private.key &lt;span style="color:#666;font-style:italic"&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;--fullchain-file /path/to/ssl/domain.tld_chain.pem &lt;span style="color:#666;font-style:italic"&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;--capath /path/to/ssl/domain.tld_ca.pem &lt;span style="color:#666;font-style:italic"&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;--reloadcmd &lt;span style="color:#666;font-style:italic"&gt;&amp;#34;service nginx reload&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#888;font-style:italic"&gt;# ç­¾å‘ ECC è¯ä¹¦ï¼Œè‹¥ä¸éœ€è¦ï¼Œè·³è¿‡å³å¯&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;acme.sh --config-home /root/.acme2 --issue --dns dns_cf -d domain.tld -d *.domain.tld --keylength ec-256
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#888;font-style:italic"&gt;# å®‰è£… ECC è¯ä¹¦åˆ°æŒ‡å®šè·¯å¾„&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;acme.sh --config-home /root/.acme2 &lt;span style="color:#666;font-style:italic"&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;--install-cert -d domain.tld --ecc &lt;span style="color:#666;font-style:italic"&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;--key-file /path/to/ssl/ecc_domain.tld_private.key &lt;span style="color:#666;font-style:italic"&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;--fullchain-file /path/to/ssl/ecc_domain.tld_chain.pem &lt;span style="color:#666;font-style:italic"&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;--capath /path/to/ssl/ecc_domain.tld_ca.pem &lt;span style="color:#666;font-style:italic"&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;--reloadcmd &lt;span style="color:#666;font-style:italic"&gt;&amp;#34;service nginx reload&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#888;font-style:italic"&gt;# æ‰‹åŠ¨æ·»åŠ å¦ä¸€ä¸ª cron ä»»åŠ¡&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#888;font-style:italic"&gt;# crontab -e&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;50 0 * * * &lt;span style="color:#666;font-style:italic"&gt;&amp;#34;/root/.acme.sh&amp;#34;&lt;/span&gt;/acme.sh --cron --home &lt;span style="color:#666;font-style:italic"&gt;&amp;#34;/root/.acme.sh&amp;#34;&lt;/span&gt; --config-home &lt;span style="color:#666;font-style:italic"&gt;&amp;#34;/root/.acme2&amp;#34;&lt;/span&gt; &amp;gt; /dev/null
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 class="heading" id="ä¸¤ä¸ªæœåŠ¡çš„æ¯”è¾ƒ"&gt;
 ä¸¤ä¸ªæœåŠ¡çš„æ¯”è¾ƒ
 &lt;a class="anchor" href="#%e4%b8%a4%e4%b8%aa%e6%9c%8d%e5%8a%a1%e7%9a%84%e6%af%94%e8%be%83"&gt;#&lt;/a&gt;
&lt;/h3&gt;
&lt;h4 class="heading" id="ä¼˜ç‚¹"&gt;
 ä¼˜ç‚¹
 &lt;a class="anchor" href="#%e4%bc%98%e7%82%b9"&gt;#&lt;/a&gt;
&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;acme.sh` + Let&amp;rsquo;s Encrypt + Cloudflare DNS
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;è‡ªåŠ¨åŒ–&lt;/strong&gt;ï¼š&lt;code&gt;acme.sh&lt;/code&gt; è„šæœ¬å¯ä»¥è‡ªåŠ¨å®Œæˆè¯ä¹¦çš„ç”³è¯·ã€éªŒè¯å’Œç»­æœŸè¿‡ç¨‹ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ— éœ€å¼€æ”¾ 80/443 ç«¯å£&lt;/strong&gt;ï¼šä½¿ç”¨ DNS éªŒè¯æ–¹å¼ï¼Œæ— éœ€åœ¨æœåŠ¡å™¨ä¸Šå¼€æ”¾ 80 æˆ– 443 ç«¯å£ï¼Œæé«˜äº†å®‰å…¨æ€§ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¸ä¾èµ– Cloudflare ä»£ç†&lt;/strong&gt;ï¼šè¿™ç§æ–¹å¼åªä½¿ç”¨ Cloudflare çš„ DNS æœåŠ¡ï¼Œä¸ä¾èµ– Cloudflare çš„ä»£ç†æœåŠ¡&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;Cloudflare
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;Universal SSL&lt;/strong&gt;ï¼šCloudflare å…è´¹æä¾› Universal SSL è¯ä¹¦ï¼Œå¯ä»¥å¿«é€Ÿå¯ç”¨ HTTPSã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Origin CA è¯ä¹¦&lt;/strong&gt;ï¼šCloudflare æä¾› Origin CA è¯ä¹¦ï¼Œå¯ä»¥å®ç° Cloudflare åˆ°æºæœåŠ¡å™¨çš„åŠ å¯†è¿æ¥ï¼ˆä¸¥æ ¼æ¨¡å¼ï¼‰ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 class="heading" id="ç¼ºç‚¹"&gt;
 ç¼ºç‚¹
 &lt;a class="anchor" href="#%e7%bc%ba%e7%82%b9"&gt;#&lt;/a&gt;
&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;acme.sh` + Let&amp;rsquo;s Encrypt + Cloudflare DNS
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;é…ç½®ç›¸å¯¹å¤æ‚&lt;/strong&gt;ï¼šç›¸æ¯”äºä½¿ç”¨ Cloudflare çš„ä¸€é”® SSL åŠŸèƒ½ï¼Œè¿™ç§æ–¹å¼éœ€è¦æ‰‹åŠ¨é…ç½® &lt;code&gt;acme.sh&lt;/code&gt; è„šæœ¬å’ŒæœåŠ¡å™¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¸æä¾› DDoS é˜²æŠ¤å’Œå…¶ä»– Cloudflare åŠŸèƒ½&lt;/strong&gt;ï¼šè¿™ç§æ–¹å¼åªä½¿ç”¨äº† Cloudflare çš„ DNS æœåŠ¡ï¼Œä¸æä¾› DDoS é˜²æŠ¤ã€CDN åŠ é€Ÿã€WAF ç­‰å…¶ä»– Cloudflare åŠŸèƒ½ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;Cloudflare
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;Origin CA è¯ä¹¦æµè§ˆå™¨ä¸ä¿¡ä»»&lt;/strong&gt;ï¼šCloudflare çš„ Origin CA è¯ä¹¦ä¸è¢«æµè§ˆå™¨ä¿¡ä»»ï¼Œéœ€è¦é…åˆ Cloudflare çš„ä»£ç†æœåŠ¡ä½¿ç”¨ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 class="heading" id="åº”ç”¨åœºæ™¯æ¯”è¾ƒ"&gt;
 åº”ç”¨åœºæ™¯æ¯”è¾ƒ
 &lt;a class="anchor" href="#%e5%ba%94%e7%94%a8%e5%9c%ba%e6%99%af%e6%af%94%e8%be%83"&gt;#&lt;/a&gt;
&lt;/h4&gt;
&lt;table&gt;
 &lt;thead&gt;
 &lt;tr&gt;
 &lt;th&gt;ç‰¹æ€§&lt;/th&gt;
 &lt;th&gt;&lt;code&gt;acme.sh&lt;/code&gt; + Let&amp;rsquo;s Encrypt + Cloudflare DNS&lt;/th&gt;
 &lt;th&gt;Cloudflare æœåŠ¡&lt;/th&gt;
 &lt;/tr&gt;
 &lt;/thead&gt;
 &lt;tbody&gt;
 &lt;tr&gt;
 &lt;td&gt;&lt;strong&gt;é€‚ç”¨åœºæ™¯&lt;/strong&gt;&lt;/td&gt;
 &lt;td&gt;ä¸éœ€è¦ Cloudflare ä»£ç† &lt;!-- raw HTML omitted --&gt;éœ€è¦åœ¨å…¶ä»–æœåŠ¡ä¸Šä½¿ç”¨è¯ä¹¦ &lt;!-- raw HTML omitted --&gt;å¸Œæœ›å®Œå…¨æ§åˆ¶è¯ä¹¦&lt;/td&gt;
 &lt;td&gt;éœ€è¦ DDoS é˜²æŠ¤&lt;!-- raw HTML omitted --&gt;éœ€è¦ CDN åŠ é€Ÿ&lt;!-- raw HTML omitted --&gt;éœ€è¦ WAF&lt;!-- raw HTML omitted --&gt;å¸Œæœ›éšè—æœåŠ¡å™¨ IP &lt;!-- raw HTML omitted --&gt;éœ€è¦ç®€å•æ˜“ç”¨çš„ SSL é…ç½®&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;&lt;strong&gt;SSL è¯ä¹¦&lt;/strong&gt;&lt;/td&gt;
 &lt;td&gt;Let&amp;rsquo;s Encrypt å…è´¹è¯ä¹¦&lt;/td&gt;
 &lt;td&gt;Cloudflare Universal SSL æˆ– Origin CA è¯ä¹¦&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;&lt;strong&gt;æ³›åŸŸåè¯ä¹¦&lt;/strong&gt;&lt;/td&gt;
 &lt;td&gt;æ”¯æŒ&lt;/td&gt;
 &lt;td&gt;æ”¯æŒï¼ˆOrigin CA è¯ä¹¦éœ€é…åˆä»£ç†ä½¿ç”¨ï¼‰&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;&lt;strong&gt;æœåŠ¡å™¨ IP&lt;/strong&gt;&lt;/td&gt;
 &lt;td&gt;æš´éœ²&lt;/td&gt;
 &lt;td&gt;éšè—&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;&lt;strong&gt;DDoS é˜²æŠ¤&lt;/strong&gt;&lt;/td&gt;
 &lt;td&gt;æ— &lt;/td&gt;
 &lt;td&gt;æœ‰&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;&lt;strong&gt;CDN åŠ é€Ÿ&lt;/strong&gt;&lt;/td&gt;
 &lt;td&gt;æ— &lt;/td&gt;
 &lt;td&gt;æœ‰&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;&lt;strong&gt;WAF&lt;/strong&gt;&lt;/td&gt;
 &lt;td&gt;æ— &lt;/td&gt;
 &lt;td&gt;æœ‰&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;&lt;strong&gt;é…ç½®éš¾åº¦&lt;/strong&gt;&lt;/td&gt;
 &lt;td&gt;ç›¸å¯¹å¤æ‚&lt;/td&gt;
 &lt;td&gt;ç®€å•&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;&lt;strong&gt;æ§åˆ¶æƒ&lt;/strong&gt;&lt;/td&gt;
 &lt;td&gt;å®Œå…¨æ§åˆ¶&lt;/td&gt;
 &lt;td&gt;éƒ¨åˆ†æ§åˆ¶&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;&lt;strong&gt;ä¾èµ–æ€§&lt;/strong&gt;&lt;/td&gt;
 &lt;td&gt;ä»…ä¾èµ– Cloudflare DNS å’Œ Let&amp;rsquo;s Encrypt&lt;/td&gt;
 &lt;td&gt;ä¾èµ– Cloudflare çš„æ‰€æœ‰æœåŠ¡&lt;/td&gt;
 &lt;/tr&gt;
 &lt;/tbody&gt;
&lt;/table&gt;</description></item><item><title>æ–°åˆ°æ‰‹çš„Linux VPS, æˆ‘è¿™æ ·è®¾ç½®ï¼šä»å®‰å…¨åŠ å›ºåˆ°Nginxåä»£éƒ¨ç½²</title><link>https://blog.yzyy.de/explore/%E6%9C%8D%E5%8A%A1%E5%99%A8/%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%85%8D%E7%BD%AE%E6%B5%81%E7%A8%8B%E8%AE%B0%E5%BD%95/</link><pubDate>Fri, 12 Apr 2024 00:00:00 +0000</pubDate><guid>https://blog.yzyy.de/explore/%E6%9C%8D%E5%8A%A1%E5%99%A8/%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%85%8D%E7%BD%AE%E6%B5%81%E7%A8%8B%E8%AE%B0%E5%BD%95/</guid><description>&lt;h2 class="heading" id="å®‰å…¨æ€§"&gt;
 å®‰å…¨æ€§
 &lt;a class="anchor" href="#%e5%ae%89%e5%85%a8%e6%80%a7"&gt;#&lt;/a&gt;
&lt;/h2&gt;
&lt;p&gt;å‚è€ƒ&lt;a href="https://blog.yzyy.de/explore/%E6%9C%8D%E5%8A%A1%E5%99%A8/vps%E5%9F%BA%E6%9C%AC%E5%AE%89%E5%85%A8%E6%8E%AA%E6%96%BD/"&gt;VPSåŸºç¡€å®‰å…¨é…ç½®å®è·µæŒ‡å—&lt;/a&gt;è¿›è¡Œé…ç½®&lt;/p&gt;
&lt;hr&gt;
&lt;h2 class="heading" id="å®‰è£…dockerå’Œdockercompose"&gt;
 å®‰è£…dockerå’Œdockercompose
 &lt;a class="anchor" href="#%e5%ae%89%e8%a3%85docker%e5%92%8cdockercompose"&gt;#&lt;/a&gt;
&lt;/h2&gt;
&lt;h3 class="heading" id="å®‰è£…-docker"&gt;
 å®‰è£… Docker
 &lt;a class="anchor" href="#%e5%ae%89%e8%a3%85-docker"&gt;#&lt;/a&gt;
&lt;/h3&gt;
&lt;h4 class="heading" id="æ›´æ–°è½¯ä»¶åŒ…åˆ—è¡¨"&gt;
 æ›´æ–°è½¯ä»¶åŒ…åˆ—è¡¨
 &lt;a class="anchor" href="#%e6%9b%b4%e6%96%b0%e8%bd%af%e4%bb%b6%e5%8c%85%e5%88%97%e8%a1%a8"&gt;#&lt;/a&gt;
&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;sudo apt update
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h4 class="heading" id="å®‰è£…å¿…è¦çš„è½¯ä»¶åŒ…"&gt;
 å®‰è£…å¿…è¦çš„è½¯ä»¶åŒ…
 &lt;a class="anchor" href="#%e5%ae%89%e8%a3%85%e5%bf%85%e8%a6%81%e7%9a%84%e8%bd%af%e4%bb%b6%e5%8c%85"&gt;#&lt;/a&gt;
&lt;/h4&gt;
&lt;p&gt;å®‰è£…ä¸€äº›å¿…è¦çš„è½¯ä»¶åŒ…ï¼Œè¿™äº›è½¯ä»¶åŒ…å…è®¸ &lt;code&gt;apt&lt;/code&gt; é€šè¿‡ HTTPS ä½¿ç”¨ä»“åº“ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;sudo apt install apt-transport-https ca-certificates curl software-properties-common
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h4 class="heading" id="æ·»åŠ -docker-çš„å®˜æ–¹-gpg-å¯†é’¥"&gt;
 æ·»åŠ  Docker çš„å®˜æ–¹ GPG å¯†é’¥
 &lt;a class="anchor" href="#%e6%b7%bb%e5%8a%a0-docker-%e7%9a%84%e5%ae%98%e6%96%b9-gpg-%e5%af%86%e9%92%a5"&gt;#&lt;/a&gt;
&lt;/h4&gt;
&lt;p&gt;æ·»åŠ  Docker çš„å®˜æ–¹ GPG å¯†é’¥ï¼Œä»¥ä¾¿éªŒè¯ä¸‹è½½çš„è½¯ä»¶åŒ…ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h4 class="heading" id="æ·»åŠ -docker-ä»“åº“"&gt;
 æ·»åŠ  Docker ä»“åº“
 &lt;a class="anchor" href="#%e6%b7%bb%e5%8a%a0-docker-%e4%bb%93%e5%ba%93"&gt;#&lt;/a&gt;
&lt;/h4&gt;
&lt;p&gt;å°† Docker çš„å®˜æ–¹ä»“åº“æ·»åŠ åˆ°ä½ çš„ &lt;code&gt;apt&lt;/code&gt; è½¯ä»¶æºåˆ—è¡¨ä¸­ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="font-weight:bold;font-style:italic"&gt;echo&lt;/span&gt; &lt;span style="color:#666;font-style:italic"&gt;&amp;#34;deb [arch=&lt;/span&gt;&lt;span style="font-weight:bold;text-decoration:underline"&gt;$(&lt;/span&gt;dpkg --print-architecture&lt;span style="font-weight:bold;text-decoration:underline"&gt;)&lt;/span&gt;&lt;span style="color:#666;font-style:italic"&gt; signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/ubuntu &lt;/span&gt;&lt;span style="font-weight:bold;text-decoration:underline"&gt;$(&lt;/span&gt;lsb_release -cs&lt;span style="font-weight:bold;text-decoration:underline"&gt;)&lt;/span&gt;&lt;span style="color:#666;font-style:italic"&gt; stable&amp;#34;&lt;/span&gt; | sudo tee /etc/apt/sources.list.d/docker.list &amp;gt; /dev/null
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å†æ¬¡æ›´æ–°è½¯ä»¶åŒ…åˆ—è¡¨ï¼Œä»¥åŒ…å«æ–°æ·»åŠ çš„ Docker ä»“åº“ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;sudo apt update
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h4 class="heading" id="å®‰è£…-docker-engine"&gt;
 å®‰è£… Docker Engine
 &lt;a class="anchor" href="#%e5%ae%89%e8%a3%85-docker-engine"&gt;#&lt;/a&gt;
&lt;/h4&gt;
&lt;p&gt;å®‰è£…&lt;code&gt;Docker Engineã€Docker CLI&lt;/code&gt;å’Œ&lt;code&gt; Containerd&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;sudo apt install docker-ce docker-ce-cli containerd.io
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h4 class="heading" id="éªŒè¯-docker-å®‰è£…"&gt;
 éªŒè¯ Docker å®‰è£…
 &lt;a class="anchor" href="#%e9%aa%8c%e8%af%81-docker-%e5%ae%89%e8%a3%85"&gt;#&lt;/a&gt;
&lt;/h4&gt;
&lt;p&gt;éªŒè¯ Docker æ˜¯å¦æˆåŠŸå®‰è£…ï¼Œå¹¶æ£€æŸ¥ Docker æœåŠ¡æ˜¯å¦æ­£åœ¨è¿è¡Œã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;sudo systemctl status docker
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å¦‚æœ Docker æœåŠ¡æ­£åœ¨è¿è¡Œï¼Œåº”è¯¥çœ‹åˆ°ç±»ä¼¼ &lt;code&gt;active (running)&lt;/code&gt; çš„è¾“å‡ºã€‚&lt;/p&gt;
&lt;p&gt;ä¹Ÿå¯ä»¥è¿è¡Œä¸€ä¸ªç®€å•çš„ Docker é•œåƒæ¥éªŒè¯ Docker æ˜¯å¦å¯ä»¥æ­£å¸¸å·¥ä½œã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;sudo docker run hello-world
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;åº”è¯¥çœ‹åˆ°ä¸€æ¡æ¬¢è¿æ¶ˆæ¯ï¼Œè¡¨æ˜ Docker å®‰è£…æˆåŠŸã€‚&lt;/p&gt;
&lt;h3 class="heading" id="å®‰è£…-docker-composev2-å¯è·³è¿‡"&gt;
 å®‰è£… Docker Compose&lt;strong&gt;V2&lt;/strong&gt; (å¯è·³è¿‡)
 &lt;a class="anchor" href="#%e5%ae%89%e8%a3%85-docker-composev2-%e5%8f%af%e8%b7%b3%e8%bf%87"&gt;#&lt;/a&gt;
&lt;/h3&gt;
&lt;p&gt;Docker å®˜æ–¹ä¸ºäº†ç®€åŒ–å¼€å‘è€…çš„å®‰è£…å’Œä½¿ç”¨æµç¨‹ï¼Œå·²ç»å°† Docker Compose V2 ä½œä¸ºä¸€ä¸ªæ ¸å¿ƒæ’ä»¶ï¼Œå¹¶å°†å…¶åŒ…å«åœ¨æ ‡å‡†çš„ Docker Engine (&lt;code&gt;docker-ce&lt;/code&gt;) å®‰è£…åŒ…çš„&lt;strong&gt;ä¾èµ–&lt;/strong&gt;æˆ–&lt;strong&gt;æ¨è&lt;/strong&gt;åˆ—è¡¨ä¸­ã€‚&lt;/p&gt;
&lt;p&gt;è¿™æ„å‘³ç€ï¼Œå½“ä¸Šé¢æ­¥éª¤ä¸­ä½¿ç”¨ &lt;code&gt;apt&lt;/code&gt; å®‰è£… &lt;code&gt;docker-ce&lt;/code&gt; æ—¶ï¼Œ&lt;code&gt;apt&lt;/code&gt; ä¼šè‡ªåŠ¨è§£æè¿™äº›ä¾èµ–å…³ç³»ï¼Œå¹¶å°† &lt;code&gt;docker-compose-plugin&lt;/code&gt; ä¸€å¹¶å®‰è£…ã€‚&lt;/p&gt;
&lt;p&gt;åˆ°è¿™ä¸€æ­¥ç›´æ¥ä½¿ç”¨&lt;code&gt;docker compose version&lt;/code&gt;éªŒè¯æ˜¯å¦å®‰è£…æˆåŠŸã€‚&lt;/p&gt;
&lt;h4 class="heading" id="ä¸‹è½½-docker-compose-æ’ä»¶"&gt;
 ä¸‹è½½ Docker Compose æ’ä»¶
 &lt;a class="anchor" href="#%e4%b8%8b%e8%bd%bd-docker-compose-%e6%8f%92%e4%bb%b6"&gt;#&lt;/a&gt;
&lt;/h4&gt;
&lt;p&gt;ä» GitHub Releases ä¸‹è½½ Docker Compose æ’ä»¶ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;sudo apt install docker-compose-plugin
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h4 class="heading" id="éªŒè¯-docker-compose-å®‰è£…"&gt;
 éªŒè¯ Docker Compose å®‰è£…
 &lt;a class="anchor" href="#%e9%aa%8c%e8%af%81-docker-compose-%e5%ae%89%e8%a3%85"&gt;#&lt;/a&gt;
&lt;/h4&gt;
&lt;p&gt;éªŒè¯ Docker Compose æ˜¯å¦æˆåŠŸå®‰è£…ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;docker compose version
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å¦‚æœ Docker Compose æˆåŠŸå®‰è£…ï¼Œåº”è¯¥çœ‹åˆ° Docker Compose çš„ç‰ˆæœ¬ä¿¡æ¯ã€‚&lt;/p&gt;
&lt;h3 class="heading" id="æ·»åŠ ç”¨æˆ·åˆ°-docker-ç”¨æˆ·ç»„"&gt;
 æ·»åŠ ç”¨æˆ·åˆ° Docker ç”¨æˆ·ç»„
 &lt;a class="anchor" href="#%e6%b7%bb%e5%8a%a0%e7%94%a8%e6%88%b7%e5%88%b0-docker-%e7%94%a8%e6%88%b7%e7%bb%84"&gt;#&lt;/a&gt;
&lt;/h3&gt;
&lt;p&gt;é»˜è®¤æƒ…å†µä¸‹ï¼Œåªæœ‰ &lt;code&gt;root&lt;/code&gt; ç”¨æˆ·æˆ–å…·æœ‰ &lt;code&gt;sudo&lt;/code&gt; æƒé™çš„ç”¨æˆ·æ‰èƒ½è¿è¡Œ Docker å‘½ä»¤ã€‚ä¸ºäº†è®©æ™®é€šç”¨æˆ·ä¹Ÿèƒ½è¿è¡Œ Docker å‘½ä»¤ï¼Œä½ éœ€è¦å°†ç”¨æˆ·æ·»åŠ åˆ° &lt;code&gt;docker&lt;/code&gt; ç”¨æˆ·ç»„ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;sudo usermod -aG docker &lt;span style="color:#666;font-weight:bold;font-style:italic"&gt;$USER&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¿è¡Œä»¥ä¸‹å‘½ä»¤æ¥åº”ç”¨ç”¨æˆ·ç»„æ›´æ”¹ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;newgrp docker
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¿™æ ·å°±å¯ä»¥åœ¨ä¸ä½¿ç”¨ &lt;code&gt;sudo&lt;/code&gt; çš„æƒ…å†µä¸‹è¿è¡Œ Docker å‘½ä»¤äº†ã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;h2 class="heading" id="é…ç½®è¯ä¹¦å’Œåä»£"&gt;
 é…ç½®è¯ä¹¦å’Œåä»£
 &lt;a class="anchor" href="#%e9%85%8d%e7%bd%ae%e8%af%81%e4%b9%a6%e5%92%8c%e5%8f%8d%e4%bb%a3"&gt;#&lt;/a&gt;
&lt;/h2&gt;
&lt;h3 class="heading" id="ä¸‹è½½è¯ä¹¦å’Œç§é’¥"&gt;
 ä¸‹è½½è¯ä¹¦å’Œç§é’¥
 &lt;a class="anchor" href="#%e4%b8%8b%e8%bd%bd%e8%af%81%e4%b9%a6%e5%92%8c%e7%a7%81%e9%92%a5"&gt;#&lt;/a&gt;
&lt;/h3&gt;
&lt;p&gt;å°†åœ¨cfä¸­ç”Ÿæˆçš„æºè¯ä¹¦çš„certå’Œkeyå¤åˆ¶åˆ°.pemå’Œ.keyæ–‡ä»¶ä¸­&lt;/p&gt;
&lt;p&gt;











&lt;figure class=""&gt;

 &lt;div class="img-container" &gt;
 &lt;img loading="lazy" alt="20250717203617645" src="https://webp.050612.xyz/2025/07/20250717203617645.png" &gt;
 &lt;/div&gt;

 
&lt;/figure&gt;
&lt;/p&gt;
&lt;h3 class="heading" id="å®‰è£…-nginx"&gt;
 å®‰è£… nginx
 &lt;a class="anchor" href="#%e5%ae%89%e8%a3%85-nginx"&gt;#&lt;/a&gt;
&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;sudo apt install nginx
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 class="heading" id="ä¸Šä¼ è¯ä¹¦å’Œç§é’¥åˆ°æœåŠ¡å™¨"&gt;
 ä¸Šä¼ è¯ä¹¦å’Œç§é’¥åˆ°æœåŠ¡å™¨
 &lt;a class="anchor" href="#%e4%b8%8a%e4%bc%a0%e8%af%81%e4%b9%a6%e5%92%8c%e7%a7%81%e9%92%a5%e5%88%b0%e6%9c%8d%e5%8a%a1%e5%99%a8"&gt;#&lt;/a&gt;
&lt;/h3&gt;
&lt;p&gt;ä»¥ä¸‹æ“ä½œå»ºè®®ææƒä¸ºrootè¿›è¡Œæ“ä½œå’Œæ£€æŸ¥&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;ä½¿ç”¨suï¼Œè¾“å…¥rootå¯†ç ææƒ&lt;/li&gt;
&lt;/ol&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;su
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ol start="2"&gt;
&lt;li&gt;æ£€æŸ¥ &lt;code&gt;/etc/ssl/certs&lt;/code&gt;å’Œ&lt;code&gt;/etc/ssl/private&lt;/code&gt;ç›®å½•æ˜¯å¦å­˜åœ¨ï¼Œå¹¶å°†.pemå’Œ.keyæ–‡ä»¶åˆ†åˆ«ä¼ åˆ°è¿™ä¸¤ä¸ªç›®å½•é‡Œ&lt;/li&gt;
&lt;/ol&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;sudo mv xxx.com.pem /etc/ssl/certs/
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;sudo mv xxx.com.key /etc/ssl/private/
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ol start="3"&gt;
&lt;li&gt;è®¾ç½®æƒé™&lt;/li&gt;
&lt;/ol&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; sudo chmod 600 /etc/ssl/private/api.xxx.com.key
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 class="heading" id="é…ç½®nginx"&gt;
 é…ç½®nginx
 &lt;a class="anchor" href="#%e9%85%8d%e7%bd%aenginx"&gt;#&lt;/a&gt;
&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;åˆ›å»º Nginx é…ç½®æ–‡ä»¶&lt;/strong&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;sudo vim /etc/nginx/sites-available/api.xxx.com
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ol start="2"&gt;
&lt;li&gt;&lt;strong&gt;æ·»åŠ ä»¥ä¸‹é…ç½®&lt;/strong&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-txt" data-lang="txt"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;server {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; listen 80;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; server_name api.xxx.com;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; return 301 https://$host$request_uri;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;server {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; listen 443 ssl;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; server_name api.xxx.com;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; ssl_certificate /etc/ssl/certs/api.xxx.com.pem;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; ssl_certificate_key /etc/ssl/private/api.xxx.com.key;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; ssl_protocols TLSv1.2 TLSv1.3; # æ ¹æ®éœ€è¦è°ƒæ•´
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; ssl_ciphers HIGH:!aNULL:!MD5; # æ ¹æ®éœ€è¦è°ƒæ•´
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; client_max_body_size 100m;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; location / {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; proxy_pass http://127.0.0.1:5005; # æ›¿æ¢ä¸ºä½ çš„ chat2api æœåŠ¡ç›‘å¬çš„åœ°å€å’Œç«¯å£
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; proxy_set_header Host $host;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; proxy_set_header X-Real-IP $remote_addr;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; proxy_set_header X-Forwarded-Proto $scheme;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;strong&gt;æ³¨æ„ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;server_name&lt;/code&gt;ï¼šè®¾ç½®ä¸ºÂ &lt;code&gt;api.xxx.com&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ssl_certificate&lt;/code&gt;ï¼šæŒ‡å‘&lt;code&gt;.pem&lt;/code&gt;è¯ä¹¦æ–‡ä»¶çš„è·¯å¾„ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ssl_certificate_key&lt;/code&gt;ï¼šæŒ‡å‘&lt;code&gt;.key&lt;/code&gt;ç§é’¥æ–‡ä»¶çš„è·¯å¾„ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;proxy_pass&lt;/code&gt;ï¼šè®¾ç½®ä¸º`æœåŠ¡ç›‘å¬çš„åœ°å€å’Œç«¯å£&lt;/li&gt;
&lt;li&gt;ç¬¬ä¸€ä¸ªÂ &lt;code&gt;server&lt;/code&gt;Â å—ç”¨äºå°† HTTP è¯·æ±‚é‡å®šå‘åˆ° HTTPS&lt;/li&gt;
&lt;/ul&gt;
&lt;ol start="3"&gt;
&lt;li&gt;&lt;strong&gt;å¯ç”¨ Nginx é…ç½®&lt;/strong&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;åˆ›å»ºè½¯é“¾æ¥åˆ°Â &lt;code&gt;sites-enabled&lt;/code&gt;Â ç›®å½•ï¼š&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;sudo ln -s /etc/nginx/sites-available/api.vtofun.me /etc/nginx/sites-enabled/api.vtofun.me
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;ç§»é™¤é»˜è®¤çš„ Nginx é…ç½®ï¼š&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;sudo rm /etc/nginx/sites-enabled/default
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;æµ‹è¯• Nginx é…ç½®ï¼š&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;sudo nginx -t
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;é‡å¯ Nginx æœåŠ¡ï¼š&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;sudo systemctl restart nginx
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;
&lt;h2 class="heading" id="swap-ç©ºé—´é…ç½®"&gt;
 Swap ç©ºé—´é…ç½®
 &lt;a class="anchor" href="#swap-%e7%a9%ba%e9%97%b4%e9%85%8d%e7%bd%ae"&gt;#&lt;/a&gt;
&lt;/h2&gt;
&lt;h3 class="heading" id="åˆ›å»ºswapç©ºé—´"&gt;
 åˆ›å»ºswapç©ºé—´
 &lt;a class="anchor" href="#%e5%88%9b%e5%bb%baswap%e7%a9%ba%e9%97%b4"&gt;#&lt;/a&gt;
&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;æ£€æŸ¥ Swap ç©ºé—´ï¼š
é¦–å…ˆï¼Œæ£€æŸ¥ç³»ç»Ÿå½“å‰æ˜¯å¦å·²ç»é…ç½®äº† Swap ç©ºé—´ï¼š&lt;/li&gt;
&lt;/ol&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;free -h
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ol start="2"&gt;
&lt;li&gt;åˆ›å»º Swap æ–‡ä»¶ï¼š
ä½¿ç”¨ &lt;code&gt;fallocate&lt;/code&gt; å‘½ä»¤åˆ›å»ºä¸€ä¸ª Swap æ–‡ä»¶ã€‚ä¾‹å¦‚ï¼Œåˆ›å»ºä¸€ä¸ª 2GB çš„ Swap æ–‡ä»¶ï¼š&lt;/li&gt;
&lt;/ol&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;sudo fallocate -l 2G /swapfile
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æˆ–è€…ï¼Œä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ &lt;code&gt;dd&lt;/code&gt; å‘½ä»¤åˆ›å»º Swap æ–‡ä»¶ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;sudo dd &lt;span style="font-weight:bold;text-decoration:underline"&gt;if&lt;/span&gt;=/dev/zero &lt;span style="color:#666;font-weight:bold;font-style:italic"&gt;of&lt;/span&gt;=/swapfile &lt;span style="color:#666;font-weight:bold;font-style:italic"&gt;bs&lt;/span&gt;=1M &lt;span style="color:#666;font-weight:bold;font-style:italic"&gt;count&lt;/span&gt;=2048
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¿™å°†åˆ›å»ºä¸€ä¸ªåä¸º &lt;code&gt;/swapfile&lt;/code&gt;ï¼Œå¤§å°ä¸º 2GB çš„æ–‡ä»¶ã€‚å¯ä»¥æ ¹æ®éœ€è¦è°ƒæ•´ &lt;code&gt;count&lt;/code&gt; çš„å€¼æ¥æ”¹å˜ Swap æ–‡ä»¶çš„å¤§å°ã€‚
3. è®¾ç½® Swap æ–‡ä»¶æƒé™ï¼š&lt;/p&gt;
&lt;p&gt;ä¸ºäº†å®‰å…¨èµ·è§ï¼Œè®¾ç½® Swap æ–‡ä»¶çš„æƒé™ï¼Œåªå…è®¸ root ç”¨æˆ·è¯»å†™ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;sudo chmod 600 /swapfile
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ol start="4"&gt;
&lt;li&gt;æ ¼å¼åŒ–ä¸º Swap ç©ºé—´ï¼š
ä½¿ç”¨ &lt;code&gt;mkswap&lt;/code&gt; å‘½ä»¤å°†æ–‡ä»¶æ ¼å¼åŒ–ä¸º Swap ç©ºé—´ï¼š&lt;/li&gt;
&lt;/ol&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;sudo mkswap /swapfile
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ol start="5"&gt;
&lt;li&gt;å¯ç”¨ Swap ç©ºé—´ï¼š
ä½¿ç”¨ &lt;code&gt;swapon&lt;/code&gt; å‘½ä»¤å¯ç”¨ Swap ç©ºé—´ï¼š&lt;/li&gt;
&lt;/ol&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;sudo swapon /swapfile
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ol start="6"&gt;
&lt;li&gt;éªŒè¯ Swap ç©ºé—´ï¼š
å†æ¬¡ä½¿ç”¨ &lt;code&gt;free -h&lt;/code&gt; å‘½ä»¤éªŒè¯ Swap ç©ºé—´æ˜¯å¦å·²å¯ç”¨ï¼š&lt;/li&gt;
&lt;/ol&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;free -h
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;åº”è¯¥èƒ½çœ‹åˆ° &lt;code&gt;Swap&lt;/code&gt; é‚£ä¸€è¡Œæ˜¾ç¤ºäº†ä½ åˆšåˆšé…ç½®çš„ Swap ç©ºé—´å¤§å°ã€‚&lt;/p&gt;
&lt;ol start="7"&gt;
&lt;li&gt;è®¾ç½®å¼€æœºè‡ªåŠ¨æŒ‚è½½ Swap ç©ºé—´ï¼š&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ä¸ºäº†ä½¿ Swap ç©ºé—´åœ¨ç³»ç»Ÿé‡å¯åä»ç„¶æœ‰æ•ˆï¼Œéœ€è¦å°†å…¶æ·»åŠ åˆ° &lt;code&gt;/etc/fstab&lt;/code&gt; æ–‡ä»¶ä¸­ã€‚ä½¿ç”¨æ–‡æœ¬ç¼–è¾‘å™¨æ‰“å¼€è¯¥æ–‡ä»¶ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;sudo vim /etc/fstab
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;åœ¨æ–‡ä»¶æœ«å°¾æ·»åŠ ä»¥ä¸‹ä¸€è¡Œï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;/swapfile swap swap defaults 0 0
&lt;/code&gt;&lt;/pre&gt;&lt;ol start="8"&gt;
&lt;li&gt;è°ƒæ•´ Swappiness å€¼ï¼ˆå¯é€‰ï¼‰ï¼š
&lt;code&gt;swappiness&lt;/code&gt; å‚æ•°æ§åˆ¶å†…æ ¸ä½¿ç”¨ Swap ç©ºé—´çš„ç§¯æç¨‹åº¦ã€‚é»˜è®¤å€¼é€šå¸¸æ˜¯ 60ã€‚å¯¹äºæœåŠ¡å™¨ï¼Œä½ å¯èƒ½å¸Œæœ›é™ä½è¿™ä¸ªå€¼ï¼Œä»¥ä¾¿ç³»ç»Ÿæ›´å€¾å‘äºä½¿ç”¨ç‰©ç†å†…å­˜ï¼Œåªæœ‰åœ¨å¿…è¦æ—¶æ‰ä½¿ç”¨ Swap ç©ºé—´ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;æŸ¥çœ‹å½“å‰çš„ &lt;code&gt;swappiness&lt;/code&gt; å€¼ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;cat /proc/sys/vm/swappiness
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä¸´æ—¶ä¿®æ”¹ &lt;code&gt;swappiness&lt;/code&gt; å€¼ï¼ˆä¾‹å¦‚è®¾ç½®ä¸º 10ï¼‰ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;sudo sysctl vm.swappiness=10
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æ°¸ä¹…ä¿®æ”¹ &lt;code&gt;swappiness&lt;/code&gt; å€¼ï¼Œç¼–è¾‘ &lt;code&gt;/etc/sysctl.conf&lt;/code&gt; æ–‡ä»¶ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;sudo nano /etc/sysctl.conf
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;åœ¨æ–‡ä»¶æœ«å°¾æ·»åŠ æˆ–ä¿®æ”¹ä»¥ä¸‹è¡Œï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;vm.swappiness=10
&lt;/code&gt;&lt;/pre&gt;&lt;h3 class="heading" id="åœç”¨swapç©ºé—´"&gt;
 åœç”¨swapç©ºé—´
 &lt;a class="anchor" href="#%e5%81%9c%e7%94%a8swap%e7%a9%ba%e9%97%b4"&gt;#&lt;/a&gt;
&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;å…³é—­ Swap ç©ºé—´ï¼š
ä½¿ç”¨ &lt;code&gt;swapoff&lt;/code&gt; å‘½ä»¤å…³é—­æŒ‡å®šçš„ Swap ç©ºé—´ã€‚å¦‚æœä½ çš„ Swap ç©ºé—´æ˜¯åŸºäºæ–‡ä»¶çš„ï¼ˆå¦‚å‰é¢ç¤ºä¾‹ä¸­çš„ &lt;code&gt;/swapfile&lt;/code&gt;ï¼‰ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š&lt;/li&gt;
&lt;/ol&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;sudo swapoff /swapfile
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä¸ç¡®å®š Swap åˆ†åŒºçš„è·¯å¾„ï¼Œå¯ä»¥ä½¿ç”¨ &lt;code&gt;swapon --show&lt;/code&gt; æˆ– &lt;code&gt;free -h&lt;/code&gt; å‘½ä»¤æŸ¥çœ‹ã€‚&lt;/p&gt;
&lt;ol start="2"&gt;
&lt;li&gt;åˆ é™¤ Swap æ–‡ä»¶ï¼ˆå¯é€‰ï¼‰ï¼š&lt;/li&gt;
&lt;/ol&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;sudo rm /swapfile
&lt;/code&gt;&lt;/pre&gt;&lt;ol start="3"&gt;
&lt;li&gt;ç¼–è¾‘ &lt;code&gt;/etc/fstab&lt;/code&gt; æ–‡ä»¶ï¼š&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ä¸ºäº†é˜²æ­¢ç³»ç»Ÿåœ¨é‡å¯åè‡ªåŠ¨æŒ‚è½½ Swap ç©ºé—´ï¼Œéœ€è¦ä» &lt;code&gt;/etc/fstab&lt;/code&gt; æ–‡ä»¶ä¸­åˆ é™¤æˆ–æ³¨é‡Šæ‰ç›¸å…³çš„æ¡ç›®ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;sudo vim /etc/fstab
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æ‰¾åˆ°åŒ…å« &lt;code&gt;/swapfile&lt;/code&gt; çš„é‚£ä¸€è¡Œï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;/swapfile swap swap defaults 0 0
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;åˆ é™¤è¿™ä¸€è¡Œï¼Œæˆ–è€…åœ¨è¡Œé¦–æ·»åŠ  &lt;code&gt;#&lt;/code&gt; å°†å…¶æ³¨é‡Šæ‰ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;#/swapfile swap swap defaults 0 0
&lt;/code&gt;&lt;/pre&gt;&lt;ol start="4"&gt;
&lt;li&gt;éªŒè¯ Swap ç©ºé—´æ˜¯å¦å·²åœç”¨ï¼š&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ä½¿ç”¨ &lt;code&gt;free -h&lt;/code&gt; å‘½ä»¤éªŒè¯ Swap ç©ºé—´æ˜¯å¦å·²åœç”¨ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;free -h
&lt;/code&gt;&lt;/pre&gt;</description></item><item><title>VPSåŸºç¡€å®‰å…¨é…ç½®å®è·µæŒ‡å—</title><link>https://blog.yzyy.de/explore/%E6%9C%8D%E5%8A%A1%E5%99%A8/vps%E5%9F%BA%E6%9C%AC%E5%AE%89%E5%85%A8%E6%8E%AA%E6%96%BD/</link><pubDate>Wed, 10 Apr 2024 00:00:00 +0000</pubDate><guid>https://blog.yzyy.de/explore/%E6%9C%8D%E5%8A%A1%E5%99%A8/vps%E5%9F%BA%E6%9C%AC%E5%AE%89%E5%85%A8%E6%8E%AA%E6%96%BD/</guid><description>&lt;p&gt;æœ¬æ–‡åŸºäºÂ &lt;code&gt;@Raven95676&lt;/code&gt;Â çš„åŸå¸–ï¼Œå¹¶ç»“åˆæˆ‘çš„ä¸ªäººä½¿ç”¨ä¹ æƒ¯è¿›è¡Œäº†å®šåˆ¶åŒ–æ•´ç†ï¼Œä½œä¸ºè‡ªå·±çš„æ“ä½œå¤‡å¿˜å½•ã€‚&lt;/p&gt;
&lt;p&gt;åŸå¸–åœ°å€ï¼š&lt;a href="https://linux.do/t/topic/267502"&gt;VPSåŸºæœ¬å®‰å…¨æªæ–½&lt;/a&gt;&lt;/p&gt;
&lt;h1 class="heading" id="å‰è¨€"&gt;
 å‰è¨€
 &lt;a class="anchor" href="#%e5%89%8d%e8%a8%80"&gt;#&lt;/a&gt;
&lt;/h1&gt;
&lt;p&gt;éšç€é€æ¸çœ‹åˆ°ä¸€äº›ã€ŒSelf Hostã€çš„æœåŠ¡ï¼Œæ‹¥æœ‰ä¸€å°å±äºè‡ªå·±çš„æœåŠ¡å™¨çš„æƒ³æ³•è¶Šæ¥è¶Šå¼ºçƒˆã€‚ç»ˆäºï¼Œåœ¨24å¹´çš„ä¸€æ¬¡ä¿ƒé”€ä¸­ï¼Œä¹°åˆ°äº†ç¬¬ä¸€å°å…·æœ‰å…¬ç½‘IPçš„å°æœºå™¨ï¼Œ1c1gã€‚&lt;/p&gt;
&lt;p&gt;æ‹¿åˆ°äº†æœºå™¨ï¼Œå¼€æœºä¹‹åæ„å‘³ç€æš´éœ²åœ¨äº†äº’è”ç½‘ä¸­ã€‚åœ¨äº’è”ç½‘ä¸­ï¼Œæ¯æ—¶æ¯åˆ»éƒ½æœ‰æ— æ•°çš„æ¶æ„æµé‡å‘å‡ºã€‚æˆ‘ä»¬éœ€è¦åšä»€ä¹ˆå‘¢ï¼Ÿ&lt;/p&gt;
&lt;p&gt;å¦‚æœé€‰æ‹©å°†ç½‘ç«™ / æœåŠ¡æ”¾åœ¨çŸ¥åå‚å•†è™šæ‹Ÿä¸»æœºä¸Šï¼Œè™šæ‹Ÿä¸»æœºçš„å‚å•†ä¼šè´Ÿè´£åŸºæœ¬çš„æœåŠ¡å™¨å®‰å…¨æªæ–½ã€‚ä½†å¦‚æœæ”¾åœ¨ VPS ä¸Šï¼Œé‚£ä¹ˆä½ å°±æ˜¯æœåŠ¡å™¨çš„å®‰å…¨è´Ÿè´£äººäº†ã€‚æ›´å¤šçš„æƒé™ä»£è¡¨ç€æ›´å¤šçš„ä¹‰åŠ¡ï¼ŒVPS åœ¨å…·æœ‰æ›´é«˜çš„è‡ªç”±åº¦çš„æƒ…å†µä¸‹è‡ªç„¶æœ‰æ›´é«˜çš„é£é™©ã€‚&lt;strong&gt;è€Œæˆ‘ä»¬è¦åšåˆ°çš„ä¸æ˜¯ç»å¯¹å®‰å…¨ï¼Œè€Œæ˜¯æ¯”å¤§å¤šæ•°äººå®‰å…¨ã€‚&lt;/strong&gt;Â åªè¦åšåˆ°æ²¡é‚£ä¹ˆå®¹æ˜“è¢«æ”»ç ´é‚£å°±æ˜¯èƒœåˆ©ã€‚&lt;/p&gt;
&lt;h2 class="heading" id="å®‰å…¨ç®¡ç†ç³»ç»Ÿ"&gt;
 å®‰å…¨ç®¡ç†ç³»ç»Ÿ
 &lt;a class="anchor" href="#%e5%ae%89%e5%85%a8%e7%ae%a1%e7%90%86%e7%b3%bb%e7%bb%9f"&gt;#&lt;/a&gt;
&lt;/h2&gt;
&lt;p&gt;æœ‰äº› VPS å‚å•†é»˜è®¤æä¾›çš„æ˜¯ root è´¦æˆ·ã€‚ä¼—æ‰€å‘¨çŸ¥ï¼Œroot è´¦æˆ·æ‹¥æœ‰æ•´ä¸ªç³»ç»Ÿæœ€é«˜çš„æƒé™ï¼Œè¿™ä¹ˆé«˜çš„æƒé™è‡ªç„¶æ˜¯ä¸å®‰å…¨çš„ã€‚æ­£ç¡®çš„åšæ³•æ˜¯åˆ›å»ºä¸€ä¸ªé root è´¦æˆ·ï¼Œåœ¨å¿…é¡»ä½¿ç”¨ root æƒé™æ—¶ä½¿ç”¨ sudo ææƒã€‚&lt;/p&gt;
&lt;h3 class="heading" id="åˆ›å»ºé-root-è´¦æˆ·"&gt;
 åˆ›å»ºé root è´¦æˆ·
 &lt;a class="anchor" href="#%e5%88%9b%e5%bb%ba%e9%9d%9e-root-%e8%b4%a6%e6%88%b7"&gt;#&lt;/a&gt;
&lt;/h3&gt;
&lt;p&gt;ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤åˆ›å»ºä¸€ä¸ªå…·æœ‰ææƒèƒ½åŠ›çš„è´¦æˆ·ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;useradd -m -G sudo -s /bin/bash ç”¨æˆ·å
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;useradd&lt;/code&gt;:&lt;/strong&gt;Â è¿™æ˜¯ä¸€ä¸ªç”¨äºåˆ›å»ºæ–°ç”¨æˆ·çš„å‘½ä»¤ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;-m&lt;/code&gt;:&lt;/strong&gt;Â æ­¤é€‰é¡¹ä¼šåœ¨Â &lt;code&gt;/home&lt;/code&gt;Â ç›®å½•ä¸‹ä¸ºæ–°ç”¨æˆ·åˆ›å»ºä¸»ç›®å½•ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;-G sudo&lt;/code&gt;:&lt;/strong&gt;Â æ­¤é€‰é¡¹å°†æ–°ç”¨æˆ·æ·»åŠ åˆ°Â &lt;code&gt;sudo&lt;/code&gt;Â ç»„ï¼Œå…è®¸å…¶ä½¿ç”¨Â &lt;code&gt;sudo&lt;/code&gt;Â å‘½ä»¤æ‰§è¡Œç®¡ç†å‘˜æ“ä½œã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;-s /bin/bash&lt;/code&gt;:&lt;/strong&gt;Â æ­¤é€‰é¡¹æŒ‡å®šæ–°ç”¨æˆ·çš„é»˜è®¤ shell ä¸ºÂ &lt;code&gt;/bin/bash&lt;/code&gt;ï¼ˆå¸¸ç”¨ shellï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;ç”¨æˆ·å&lt;/code&gt;:&lt;/strong&gt;Â è¿™æ˜¯ä½ è¦åˆ›å»ºçš„æ–°ç”¨æˆ·çš„ç”¨æˆ·åã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ç„¶åæˆ‘ä»¬ç»™è¿™ä¸ªç”¨æˆ·è®¾ç½®ä¸€ä¸ªè‡³å°‘ä¸º 16 ä½çš„éšæœºå¤§å°å†™å­—æ¯ + æ•°å­—çš„å¯†ç ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code class="language-undefined" data-lang="undefined"&gt;passwd ç”¨æˆ·å
&lt;/code&gt;&lt;/pre&gt;&lt;blockquote&gt;
&lt;p&gt;å»ºè®®æŠŠ root ç”¨æˆ·çš„å¯†ç ä¹Ÿæ”¹æ‰ï¼Œäº‘æœåŠ¡å™¨çš„é»˜è®¤å¯†ç å¼ºåº¦è¿˜æ˜¯å·®ç‚¹ï¼Œè€Œä¸”æœ‰äº›æœåŠ¡å•†ä¼šé€šè¿‡é‚®ä»¶æ¥å‘é€é»˜è®¤å¯†ç ï¼Œä¸å¤ªå®‰å…¨ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 class="heading" id="ç¦ç”¨-root-ssh-å¯†ç ç™»é™†"&gt;
 ç¦ç”¨ root SSH å¯†ç ç™»é™†
 &lt;a class="anchor" href="#%e7%a6%81%e7%94%a8-root-ssh-%e5%af%86%e7%a0%81%e7%99%bb%e9%99%86"&gt;#&lt;/a&gt;
&lt;/h3&gt;
&lt;p&gt;å…ˆä¸æ root ç™»å½•æœ¬èº«å°±æ˜¯å±é™©çš„è¡Œä¸ºï¼Œroot è´¦æˆ·çš„ç”¨æˆ·åå›ºå®šä¸ºâ€rootâ€ï¼Œå¦‚æœå…è®¸å…¶é€šè¿‡å¯†ç ç™»å½•ï¼Œæ”»å‡»è€…åªéœ€è¿›è¡Œå¯†ç ç©·ä¸¾å³å¯å°è¯•æ”»ç ´ç³»ç»Ÿã€‚ä¹‹å‰æˆ‘ä»¬å·²ç»åˆ›å»ºäº†é root è´¦æˆ·ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬åªéœ€è¦ç¦ç”¨é root è´¦æˆ·çš„ SSH ç™»å½•å³å¯ã€‚&lt;/p&gt;
&lt;p&gt;æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ç¼–è¾‘ SSH é…ç½®æ–‡ä»¶ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;sudo vim /etc/ssh/sshd_config
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¿›è¡Œå¦‚ä¸‹è®¾ç½®ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#888;font-style:italic"&gt;# ç¦æ­¢ Root ç”¨æˆ·é€šè¿‡å¯†ç è¿œç¨‹ç™»å½• &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;PermitRootLogin prohibit-password
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æŸ¥çœ‹&lt;code&gt;/etc/ssh/sshd_config.d/&lt;/code&gt;ç›®å½•ä¸‹æœ‰æ— å…¶ä»–é…ç½®æ–‡ä»¶ï¼Œé˜²æ­¢ä¸ç”Ÿæ•ˆã€‚æœ‰äº›å‚å•†çš„åˆå§‹é•œåƒå†…å·²ç»æœ‰äº†ä¸€äº›é…ç½®ä¼šè¦†ç›–æ‰æˆ‘ä»¬ç¼–å†™çš„ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;ls /etc/ssh/sshd_config.d/
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä¹‹åé‡å¯ SSH æœåŠ¡ç”Ÿæ•ˆï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;sudo systemctl restart ssh
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä¸ºä»€ä¹ˆä¸è®¾ç½®æˆ noï¼š&lt;/p&gt;
&lt;p&gt;åº„ sir:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;å¦ï¼Œç›´æ¥ç¦æ‰ root ç™»å½•Â &lt;code&gt;PermitRootLogin no&lt;/code&gt;Â æˆ‘ä¹Ÿä¸å¸¸ç”¨ï¼Œæ›´ä¹ æƒ¯å’Œå…¶ä»– sudoer ä¸€æ ·é…å¯†é’¥ç„¶åç¦æ­¢å¯†ç ç™»å½•ä»…å…è®¸å¯†é’¥ç™»å½•ã€‚æˆ‘æ˜¯ä¸€èˆ¬èƒ½æ“åšçº¿ä¸‹é›†ç¾¤çš„æœºå­æ‰ä¼šè¿™ä¹ˆé…ï¼Œä¸ç„¶å‡ºä¸ªæ•…éšœæ²¡ root ç”¨ä¸äº†äº†ï¼Œæ¯”å¦‚å­˜å‚¨æ»¡äº†è¿œç¨‹ ssh session éƒ½å»ºç«‹ä¸äº†ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Oganneson:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;ç†è®ºä¸Š PermitRootLogin æ˜¯å¥½çš„ï¼Œä½†åœ¨æœåŠ¡å™¨å¯„æ‰éœ€è¦æ•‘æ´æ—¶å°±ä¼šå˜éº»çƒ¦ï¼Œæˆ‘å…¶å®æ›´æ¨èåªå…³é—­è¿œç¨‹å¯†ç ç™»å½•ï¼Œä¿ç•™æœ¬åœ°å¯†ç ç™»å½•ï¼Œå‡ºé—®é¢˜æ—¶å¯ä»¥é€šè¿‡ vnc æˆ–è€… ipmi æœ¬åœ°ç™»å½• root è¿›è¡Œæ•‘æ´ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 class="heading" id="ä¿®æ”¹-ssh-ç«¯å£å·"&gt;
 ä¿®æ”¹ SSH ç«¯å£å·
 &lt;a class="anchor" href="#%e4%bf%ae%e6%94%b9-ssh-%e7%ab%af%e5%8f%a3%e5%8f%b7"&gt;#&lt;/a&gt;
&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;ç™»ä¸Šå»ç¬¬ä¸€ä»¶äº‹å°±æ˜¯æ”¹ SSHD çš„ ç«¯å£å¹¶ä¿®æ”¹é˜²ç«å¢™ï¼Œ22 å…¨æ˜¯çŒœå¯†ç çš„è¯·æ±‚ã€‚&lt;br&gt;
æœ‰ä¸ªå°æŠ€å·§ï¼Œå°±æ˜¯æ”¹ç«¯å£å¹¶é‡å¯ sshd åå½“å‰çš„è¿æ¥å¹¶æ²¡æœ‰æ–­ï¼Œæ–°å»ºä¸€ä¸ªç»ˆç«¯ä½¿ç”¨æ–°ç«¯å£å‘è¯·æ±‚ï¼Œèƒ½è¿ä¸Šå°±æ˜¯ä¿®æ”¹æ­£ç¡®ï¼Œè¦æ˜¯ä¸èƒ½å»ºç«‹æ–°è¿æ¥ï¼Œè¿˜å¯ä»¥æ”¹å›æ¥ï¼Œæˆ–æŸ¥ä¸‹é˜²ç«å¢™çš„é…ç½®ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;æ­£å¸¸æƒ…å†µä¸‹ï¼Œç›´æ¥é€šè¿‡ &lt;code&gt;sudo vim /etc/ssh/sshd_config&lt;/code&gt; ä¿®æ”¹ SSH ç«¯å£ï¼Œç„¶åå†ä½¿ç”¨ &lt;code&gt;sudo systemctl restart ssh.service&lt;/code&gt; é‡å¯ SSH æœåŠ¡åº”ç”¨æ›´æ”¹æ˜¯å¯è¡Œçš„ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#888;font-style:italic"&gt;# è®¾ç½® SSHç«¯å£ Port è‡ªæ‹Ÿ&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;Port 20251
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä½†æ˜¯åœ¨ &lt;strong&gt;Ubuntu 22.10 æˆ–æ›´é«˜ç‰ˆæœ¬&lt;/strong&gt;ä¸­å„ä½å¯èƒ½å‘ç°è¿™æ˜¯&lt;strong&gt;æ— æ•ˆ&lt;/strong&gt;çš„ï¼Œå„ä½ä¼šå‘ç° SSH æœåŠ¡åœ¨é‡å¯åä¾ç„¶ç›‘å¬åŸç«¯å£ã€‚&lt;/p&gt;
&lt;p&gt;å› ä¸ºåœ¨ Ubuntu 22.10 æˆ–æ›´é«˜ç‰ˆæœ¬ä¸­ï¼Œssh é»˜è®¤é€šè¿‡å¥—æ¥å­—æ¿€æ´»ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨ Ubuntu 22.10ã€Ubuntu 23.04 å’Œ Ubuntu 23.10 ä¸­è¿›è¡Œä¿®æ”¹çš„æ–¹æ³•æ˜¯ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;sudo mkdir -p /etc/systemd/system/ssh.socket.d
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;sudo vim /etc/systemd/system/ssh.socket.d/listen.conf
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;sudo systemctl daemon-reload
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;sudo systemctl restart ssh.socket
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;sudo systemctl restart ssh.service
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;listen.conf çš„å‚è€ƒé…ç½®ä¸ºï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-ini" data-lang="ini"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="font-weight:bold;text-decoration:underline"&gt;[Socket]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;ListenStream=
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;ListenStream=&lt;span style="color:#666;font-style:italic"&gt;2233&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;åœ¨ Ubuntu 24.04 ä¸­è¿›è¡Œä¿®æ”¹çš„æ–¹æ³•æ˜¯ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;sudo vim /etc/ssh/sshd_config
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;sudo systemctl daemon-reload
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;sudo systemctl restart ssh.service
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å¦‚æœä¸åœ¨ä¹é€šè¿‡å¥—æ¥å­—æ¿€æ´»èŠ‚çœçš„å†…å­˜ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤æ¢å¤åˆ°éå¥—æ¥å­—æ¿€æ´»ï¼š&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;è­¦å‘Šï¼š&lt;/strong&gt; åŠ¡å¿…ç¡®è®¤é…ç½®æ–‡ä»¶æ­£å¸¸ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;sudo systemctl disable --now ssh.socket
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;sudo systemctl &lt;span style="font-weight:bold;font-style:italic"&gt;enable&lt;/span&gt; --now ssh.service
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å¦‚æœ‰é…ç½®è¿ç§»ï¼ˆUbuntu 22.10 åŠä»¥ä¸Šï¼ŒUbuntu 24.04 ä»¥ä¸‹ï¼‰ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;sudo systemctl disable --now ssh.socket
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;rm -f /etc/systemd/system/ssh.service.d/00-socket.conf
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;rm -f /etc/systemd/system/ssh.socket.d/addresses.conf
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;sudo systemctl daemon-reload
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;sudo systemctl &lt;span style="font-weight:bold;font-style:italic"&gt;enable&lt;/span&gt; --now ssh.service
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 class="heading" id="fail2ban-é˜²æš´åŠ›ç ´è§£-ssh-é…ç½®ssh-ipç™½åå•"&gt;
 Fail2ban é˜²æš´åŠ›ç ´è§£ SSH é…ç½®SSH ipç™½åå•
 &lt;a class="anchor" href="#fail2ban-%e9%98%b2%e6%9a%b4%e5%8a%9b%e7%a0%b4%e8%a7%a3-ssh-%e9%85%8d%e7%bd%aessh-ip%e7%99%bd%e5%90%8d%e5%8d%95"&gt;#&lt;/a&gt;
&lt;/h3&gt;
&lt;p&gt;æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å®‰è£… Fail2banï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;sudo apt install fail2ban
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å®‰è£…å®Œæˆå Fail2banä¼šè‡ªåŠ¨è¿è¡Œï¼Œå¯ä»¥æ£€æŸ¥ä¸€ä¸‹æœåŠ¡çŠ¶æ€&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;sudo systemctl status fail2ban
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å¦‚æœä¸ºdeadï¼Œæ³¨æ„å¼€å¯fail2banæœåŠ¡&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;sudo systemctl start fail2ban
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å®˜æ–¹æ¨èçš„åšæ³•æ˜¯åˆ©ç”¨ jail.local æ¥è¿›è¡Œè‡ªå®šä¹‰è®¾ç½®ï¼š
è¿™æ ·åšçš„å¥½å¤„æ˜¯ï¼Œåœ¨å‡çº§ Fail2ban æ—¶ï¼Œä½ çš„è‡ªå®šä¹‰é…ç½®ä¸ä¼šä¸¢å¤±ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;sudo vim /etc/fail2ban/jail.local
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å¯ä»¥å‚ç…§ä»¥ä¸‹é…ç½®æ–‡ä»¶æ¥è¿›è¡Œè‡ªå·±çš„é…ç½®ï¼ˆè®°å¾—åˆ æ³¨é‡Šï¼‰ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-ini" data-lang="ini"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="font-weight:bold;text-decoration:underline"&gt;[sshd]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;ignoreip = &lt;span style="color:#666;font-style:italic"&gt;127.0.0.1/8 # ç™½åå•ï¼ŒçŸ¥é“è‡ªå·±çš„å›ºå®šå…¬ç½‘ipç½‘æ®µå¯ä»¥é…ç½®&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;enabled = &lt;span style="color:#666;font-style:italic"&gt;true&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;filter = &lt;span style="color:#666;font-style:italic"&gt;sshd&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;port = &lt;span style="color:#666;font-style:italic"&gt;22 # ç«¯å£ï¼Œæ”¹äº†çš„è¯è¿™é‡Œä¹Ÿè¦æ”¹&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;maxretry = &lt;span style="color:#666;font-style:italic"&gt;5 # æœ€å¤§å°è¯•æ¬¡æ•°&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;findtime = &lt;span style="color:#666;font-style:italic"&gt;300 # å¤šå°‘ç§’ä»¥å†…æœ€å¤§å°è¯•æ¬¡æ•°è§„åˆ™ç”Ÿæ•ˆ&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;bantime = &lt;span style="color:#666;font-style:italic"&gt;600 # å°ç¦å¤šå°‘ç§’ï¼Œ-1æ˜¯æ°¸ä¹…å°ç¦ï¼ˆä¸å»ºè®®æ°¸ä¹…å°ç¦ï¼‰&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;action = &lt;span style="color:#666;font-style:italic"&gt;%(action_)s[port=&amp;#34;%(port)s&amp;#34;, protocol=&amp;#34;%(protocol)s&amp;#34;, logpath=&amp;#34;%(logpath)s&amp;#34;, chain=&amp;#34;%(chain)s&amp;#34;] # ä¸éœ€è¦å‘é‚®ä»¶é€šçŸ¥å°±è¿™æ ·è®¾ç½®&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;banaction = &lt;span style="color:#666;font-style:italic"&gt;iptables-multiport # ç¦ç”¨æ–¹å¼&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;logpath = &lt;span style="color:#666;font-style:italic"&gt;/var/log/auth.log # SSH ç™»é™†æ—¥å¿—ä½ç½®&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ç›´æ¥å¤åˆ¶ç‰ˆæœ¬ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;[sshd]
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#666;font-weight:bold;font-style:italic"&gt;ignoreip&lt;/span&gt; = 127.0.0.1/8
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#666;font-weight:bold;font-style:italic"&gt;enabled&lt;/span&gt; = &lt;span style="font-weight:bold;font-style:italic"&gt;true&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#666;font-weight:bold;font-style:italic"&gt;filter&lt;/span&gt; = sshd
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#666;font-weight:bold;font-style:italic"&gt;port&lt;/span&gt; = 20253
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#666;font-weight:bold;font-style:italic"&gt;maxretry&lt;/span&gt; = 5 
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#666;font-weight:bold;font-style:italic"&gt;findtime&lt;/span&gt; = 300 
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#666;font-weight:bold;font-style:italic"&gt;bantime&lt;/span&gt; = 600
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#666;font-weight:bold;font-style:italic"&gt;action&lt;/span&gt; = %(action_)s[&lt;span style="color:#666;font-weight:bold;font-style:italic"&gt;port&lt;/span&gt;=&lt;span style="color:#666;font-style:italic"&gt;&amp;#34;%(port)s&amp;#34;&lt;/span&gt;, &lt;span style="color:#666;font-weight:bold;font-style:italic"&gt;protocol&lt;/span&gt;=&lt;span style="color:#666;font-style:italic"&gt;&amp;#34;%(protocol)s&amp;#34;&lt;/span&gt;, &lt;span style="color:#666;font-weight:bold;font-style:italic"&gt;logpath&lt;/span&gt;=&lt;span style="color:#666;font-style:italic"&gt;&amp;#34;%(logpath)s&amp;#34;&lt;/span&gt;, &lt;span style="color:#666;font-weight:bold;font-style:italic"&gt;chain&lt;/span&gt;=&lt;span style="color:#666;font-style:italic"&gt;&amp;#34;%(chain)s&amp;#34;&lt;/span&gt;]
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#666;font-weight:bold;font-style:italic"&gt;banaction&lt;/span&gt; = iptables-multiport
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#666;font-weight:bold;font-style:italic"&gt;logpath&lt;/span&gt; = /var/log/auth.log
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è®¾ç½®fail2banå¼€æœºè‡ªåŠ¨å¯åŠ¨ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;sudo systemctl &lt;span style="font-weight:bold;font-style:italic"&gt;enable&lt;/span&gt; fail2ban
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 class="heading" id="ä½¿ç”¨å¯†é’¥ç™»å½•"&gt;
 ä½¿ç”¨å¯†é’¥ç™»å½•
 &lt;a class="anchor" href="#%e4%bd%bf%e7%94%a8%e5%af%86%e9%92%a5%e7%99%bb%e5%bd%95"&gt;#&lt;/a&gt;
&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;å¦‚æœ VPS å‚å•†æä¾›äº† SSH å¯†é’¥ç»‘å®šåŠŸèƒ½ï¼Œå¯ä»¥å¿½ç•¥æœ¬èŠ‚å†…å®¹å¹¶æŒ‰ç…§ VPS å‚å•†æä¾›çš„æ–¹æ³•ç»‘å®šã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;åœ¨æœ¬åœ° powershell ä¸­è¿è¡Œï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;ssh-keygen -t ed25519
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æˆ–è€…&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;ssh-keygen -t rsa -b 4096
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;äºŒè€…åŠ å¯†ç®—æ³•ä¸åŒ:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;-b 4096&lt;/code&gt;Â æŒ‡å®šç”Ÿæˆçš„ RSA å¯†é’¥çš„é•¿åº¦ä¸º 4096 ä½&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Ed25519 çš„å¯†é’¥é•¿åº¦å›ºå®šï¼Œçº¦ä¸º 256 ä½ï¼Œæ— éœ€æŒ‡å®šå¯†é’¥é•¿åº¦ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ç›´æ¥ä½¿ç”¨é»˜è®¤çš„å¯†é’¥è·¯å¾„å³å¯ã€‚å¯†ç å¯ä»¥ç•™ç©ºï¼Œä¹Ÿå¯ä»¥è®¾ç½®ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-php" data-lang="php"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;Generating &lt;span style="font-weight:bold;text-decoration:underline"&gt;public&lt;/span&gt;/&lt;span style="font-weight:bold;text-decoration:underline"&gt;private&lt;/span&gt; ed25519 key pair.
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;Enter file in which to save the key (C:\Users\&amp;lt;user&amp;gt;/.ssh/id_ed25519): &lt;span style="color:#888;font-style:italic"&gt;# ç›´æ¥å›è½¦
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;Enter passphrase (&lt;span style="font-weight:bold;text-decoration:underline"&gt;empty&lt;/span&gt; &lt;span style="font-weight:bold;text-decoration:underline"&gt;for&lt;/span&gt; no passphrase): &lt;span style="color:#888;font-style:italic"&gt;# å¯ä»¥ç•™ç©ºï¼Œä¹Ÿå¯ä»¥è®¾ç½®
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;Enter same passphrase again: &lt;span style="color:#888;font-style:italic"&gt;# å’Œä¸Šä¸€ä¸ªä¸€æ ·
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ç„¶åæˆ‘ä»¬åœ¨ VPS ä¸Šç¼–è¾‘ SSH æˆæƒå¯†é’¥æ–‡ä»¶ï¼Œæ³¨æ„éœ€è¦åœ¨rootç”¨æˆ·å’Œérootç”¨æˆ·ä¸‹éƒ½éœ€è¦æ·»åŠ ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;vim ~/.ssh/authorized_keys
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;åœ¨rootä¸‹ä¸ºå…¶ä»–ç”¨æˆ·åˆ›å»ºå¯†é’¥æ–‡ä»¶ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#888;font-style:italic"&gt;# 1. ç¡®ä¿ç›®å½•å’Œæ–‡ä»¶å­˜åœ¨&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;mkdir /home/ghung/.ssh
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;cp /root/.ssh/authorized_keys /home/ghung/.ssh/
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#888;font-style:italic"&gt;# 2. ã€ä¿®æ­£æ‰€æœ‰æƒã€‘æŠŠ .ssh ç›®å½•åŠå…¶ä¸‹æ‰€æœ‰æ–‡ä»¶çš„æ‰€æœ‰è€…éƒ½æ”¹æˆ ghung&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;sudo chown -R ghung:ghung /home/ghung/.ssh
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#888;font-style:italic"&gt;# 3. ã€ä¿®æ­£ç›®å½•æƒé™ã€‘&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;sudo chmod 700 /home/ghung/.ssh
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#888;font-style:italic"&gt;# 4. ã€ä¿®æ­£æ–‡ä»¶æƒé™ã€‘&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;sudo chmod 600 /home/ghung/.ssh/authorized_keys
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å¦‚æœç›®æ ‡ç”¨æˆ·çš„å®¶ç›®å½•ä¸‹è¿˜æ²¡æœ‰ &lt;code&gt;.ssh&lt;/code&gt; ç›®å½•ï¼Œ ç¡®ä¿ç›®å½•çš„æƒé™æ˜¯ &lt;code&gt;700&lt;/code&gt;ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;mkdir -p ~/.ssh
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;chmod 700 ~/.ssh
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;åˆ›å»º&lt;code&gt;authorized_keys&lt;/code&gt;æ–‡ä»¶å¹¶èµ‹äºˆç›¸åº”æƒé™&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;touch ~/.ssh/authorized_keys
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;chmod 600 ~/.ssh/authorized_keys
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä¹‹åæ‰“å¼€ &lt;code&gt;C:\\\Users&amp;lt;user\&amp;gt;/.ssh/id\_ed25519.pub&lt;/code&gt;ï¼Œå¤åˆ¶å…¶å†…å®¹å¹¶ç²˜è´´è¿‡å»ã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ç¼–è¾‘ SSH é…ç½®æ–‡ä»¶ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;sudo vim /etc/ssh/sshd_config
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¿›è¡Œå¦‚ä¸‹è®¾ç½®ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;PubkeyAuthentication yes
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;AuthorizedKeysFile .ssh/authorized_keys
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;PasswordAuthentication no
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å¦‚æœå‘ç°æ²¡æœ‰ç”Ÿæ•ˆï¼š
æ£€æŸ¥ &lt;code&gt;/etc/ssh/sshd_config.d&lt;/code&gt;ä¸‹çš„æ–‡ä»¶&lt;/p&gt;
&lt;p&gt;ä¹‹åé‡å¯ SSH æœåŠ¡ç”Ÿæ•ˆï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;sudo systemctl restart ssh
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 class="heading" id="å¯ç”¨-ufw-é˜²ç«å¢™"&gt;
 å¯ç”¨ UFW é˜²ç«å¢™
 &lt;a class="anchor" href="#%e5%90%af%e7%94%a8-ufw-%e9%98%b2%e7%81%ab%e5%a2%99"&gt;#&lt;/a&gt;
&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;å¦‚æœ VPS å‚å•†æä¾›äº†é˜²ç«å¢™åŠŸèƒ½ï¼Œä¸”æ²¡æœ‰å¤æ‚çš„éœ€æ±‚ï¼Œå¯ä»¥å¿½ç•¥æœ¬èŠ‚å†…å®¹å¹¶ä½¿ç”¨ VPS å‚å•†æä¾›çš„é˜²ç«å¢™ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;åœ¨æ­£å¼å¯ç”¨ UFW ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å…ˆè®¾ç½®è§„åˆ™ã€‚æˆ‘ä»¬é¦–å…ˆæ¥è®¾ç½® UFW çš„é»˜è®¤è¡Œä¸ºï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;sudo ufw default allow outgoing &lt;span style="color:#888;font-style:italic"&gt;# é»˜è®¤å…è®¸æ‰€æœ‰æ•°æ®å‡ºç«™&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;sudo ufw default deny incoming &lt;span style="color:#888;font-style:italic"&gt;# é»˜è®¤ç¦æ­¢æ‰€æœ‰æ•°æ®å…¥ç«™&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æˆ‘ä»¬å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹ UFW å½“å‰ç”Ÿæ•ˆçš„è§„åˆ™ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;sudo ufw status
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;sudo ufw status numbered &lt;span style="color:#888;font-style:italic"&gt;# åŠ ä¸Šæ•°å­—ç¼–å·&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æˆ‘ä»¬å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤å…è®¸æˆ–æ‹’ç»æŸç«¯å£çš„ä¼ å…¥ / ä¼ å‡ºæµé‡ï¼ˆéƒ¨åˆ†ä»¥ 22ã€80ã€443 ç«¯å£ä¸ºä¾‹ï¼‰ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#888;font-style:italic"&gt;# å…è®¸22ç«¯å£çš„protoåè®®çš„æµé‡å…¥ç«™&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;sudo ufw allow in 22/proto
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#888;font-style:italic"&gt;#å…è®¸22ç«¯å£çš„protoåè®®çš„æµé‡å‡ºç«™&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;sudo ufw allow out 22/proto
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#888;font-style:italic"&gt;# åœ¨æœªæŒ‡å®šin/outçš„æƒ…å†µä¸‹ï¼Œé»˜è®¤ä¸ºin&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;sudo ufw allow 22/proto
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#888;font-style:italic"&gt;# åœ¨æœªæŒ‡å®šprotoçš„æƒ…å†µä¸‹ï¼Œé»˜è®¤ä¸ºtcpå’Œudp&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;sudo ufw allow 22
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#888;font-style:italic"&gt;# æ‹’ç»çš„è¯å°±æŠŠallowæ”¹æˆdeny&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;sudo ufw deny 22
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#888;font-style:italic"&gt;# å…è®¸ä»start_portåˆ°end_portçš„ç«¯å£&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;sudo ufw allow start_port:end_port
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#888;font-style:italic"&gt;# å…è®¸å¤æ•°ä¸ªç«¯å£ï¼Œä»¥è‹±æ–‡é€—å·åˆ†éš”&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;sudo ufw allow port1,port2
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#888;font-style:italic"&gt;# å…è®¸æ¥è‡ªäºç‰¹å®šipæˆ–cidræ®µçš„æµé‡&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;sudo ufw allow from ip/cidr
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#888;font-style:italic"&gt;# å…è®¸æ¥è‡ªäºç‰¹å®šipæˆ–cidræ®µç«¯å£22çš„æµé‡&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;sudo ufw allow from ip/cidr to any port 22
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#888;font-style:italic"&gt;# å…è®¸æ¥è‡ªäºç‰¹å®šipæˆ–cidræ®µç«¯å£22çš„tcpåè®®çš„æµé‡&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;sudo ufw allow from ip/cidr to any proto tcp port 22
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#888;font-style:italic"&gt;# å¦‚æœæŒ‡å®šå¤æ•°ä¸ªç«¯å£ï¼Œåˆ™å¿…é¡»æŒ‡å®šåè®®&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;sudo ufw allow from ip to any proto tcp port 80,443
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#888;font-style:italic"&gt;# commentç”¨äºæ³¨é‡Š&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;sudo ufw allow from ip to any proto tcp port 80,443 comment &lt;span style="color:#666;font-style:italic"&gt;&amp;#34;hello&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æˆ‘ä»¬å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤åˆ é™¤ç”Ÿæ•ˆçš„è§„åˆ™ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;sudo ufw delete allow 22 &lt;span style="color:#888;font-style:italic"&gt;# åœ¨è§„åˆ™å‰é¢åŠ ä¸ªdelete&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;sudo ufw delete 1 &lt;span style="color:#888;font-style:italic"&gt;# æŒ‰ç…§numberedçš„ç¼–å·åˆ é™¤ä¹Ÿè¡Œ&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;åœ¨ç¡®å®šæ‰€æœ‰è§„åˆ™å‡æˆåŠŸè®¾ç½®åï¼Œé€šè¿‡ä»¥ä¸‹å‘½ä»¤å¯åŠ¨ \ å…³é—­ \ é‡å¯ UFW&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;å¯åŠ¨é˜²ç«å¢™å‰åŠ¡å¿…ä¿è¯ 22 ç«¯å£ï¼ˆæˆ–è€…å…¶ä»– SSH ç«¯å£ï¼‰è¢«æ”¾è¡Œã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;sudo ufw enable|disable|reload
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å¦‚æœéœ€è¦é‡ç½®è§„åˆ™ï¼Œè¯·ä½¿ç”¨ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;é‡ç½®è§„åˆ™å‰åŠ¡å¿…ä¿è¯ UFW å¤„äºå…³é—­çŠ¶æ€ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;sudo ufw reset
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æœ¬äººå»ºè®®ä»…æ”¾è¡Œæ­£åœ¨ä½¿ç”¨çš„ç«¯å£ï¼Œæ¯”å¦‚ 22ã€80ã€443ã€‚&lt;/p&gt;
&lt;p&gt;é»˜è®¤æƒ…å†µä¸‹ï¼ŒUFW ä»…è®°å½•ä¸ç¬¦åˆè§„åˆ™çš„è¢«æ‹’ç»çš„æ•°æ®åŒ…ã€‚å¦‚æœéœ€è¦è®°å½•ä¸è¯¥æœåŠ¡ç›¸å…³çš„æ¯ä¸ªè¯¦ç»†ä¿¡æ¯ï¼Œå¯ä»¥åœ¨ allow ååŠ ä¸Š log ä»¥è¿›è¡Œè®°å½•ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;# æˆåŠŸè¿æ¥ ssh çš„ä¹Ÿè®°ä¸€ä¸‹æ—¥å¿—å¤‡æŸ¥æ¯”è¾ƒå¥½ ufw allow log 22/tcp
&lt;/code&gt;&lt;/pre&gt;&lt;h2 class="heading" id="æ›´æ”¹æ—¶åŒº"&gt;
 æ›´æ”¹æ—¶åŒº
 &lt;a class="anchor" href="#%e6%9b%b4%e6%94%b9%e6%97%b6%e5%8c%ba"&gt;#&lt;/a&gt;
&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;sudo timedatectl set-timezone Asia/Shanghai
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 class="heading" id="ä¿è¯è½¯ä»¶æ›´æ–°"&gt;
 ä¿è¯è½¯ä»¶æ›´æ–°
 &lt;a class="anchor" href="#%e4%bf%9d%e8%af%81%e8%bd%af%e4%bb%b6%e6%9b%b4%e6%96%b0"&gt;#&lt;/a&gt;
&lt;/h2&gt;
&lt;h3 class="heading" id="æ—¥å¸¸æ›´æ–°ç³»ç»Ÿ"&gt;
 æ—¥å¸¸æ›´æ–°ç³»ç»Ÿ
 &lt;a class="anchor" href="#%e6%97%a5%e5%b8%b8%e6%9b%b4%e6%96%b0%e7%b3%bb%e7%bb%9f"&gt;#&lt;/a&gt;
&lt;/h3&gt;
&lt;p&gt;ä¸ªäººå»ºè®®å®šæœŸç™»å½• VPS è¿è¡Œ &lt;code&gt;sudo apt update &amp;amp;&amp;amp; sudo apt upgrade&lt;/code&gt; æ¥ä¿è¯ VPS å†…æ‰€æœ‰è½¯ä»¶åŒ…å‡ä¸ºæœ€æ–°ã€‚&lt;/p&gt;
&lt;p&gt;ä¸è¿‡ Ubuntu é»˜è®¤ä¼šæ¯å¤©è‡ªåŠ¨å®‰è£…ç³»ç»Ÿçš„å®‰å…¨æ›´æ–°ï¼Œæ‰€ä»¥è¯´è¿™ä¸ªé¢‘ç‡æ²¡å¿…è¦å¤ªå‹¤ã€‚&lt;/p&gt;</description></item></channel></rss>